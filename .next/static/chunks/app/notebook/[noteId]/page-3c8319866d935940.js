(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{602:function(e,s,t){Promise.resolve().then(t.bind(t,8085)),Promise.resolve().then(t.bind(t,3530)),Promise.resolve().then(t.bind(t,1507)),Promise.resolve().then(t.bind(t,1726)),Promise.resolve().then(t.t.bind(t,4724,23)),Promise.resolve().then(t.t.bind(t,3388,23)),Promise.resolve().then(t.bind(t,5622)),Promise.resolve().then(t.bind(t,2630))},5622:function(e,s,t){"use strict";t.r(s);var n=t(7437);t(2265);var i=t(8700),o=t(4737),c=t(1110),a=t(4829),r=t(4033);s.default=e=>{let{noteId:s}=e,t=(0,r.useRouter)(),l=(0,c.D)({mutationFn:async()=>{let e=await a.Z.post("/api/deleteNote",{noteId:s});return e.data}});return(0,n.jsx)(i.z,{variant:"destructive",size:"sm",disabled:l.isLoading,onClick:()=>{let e=window.confirm("Are you sure you want to delete this note?");e&&l.mutate(void 0,{onSuccess:()=>{t.push("/dashboard")},onError:e=>{console.error(e)}})},children:(0,n.jsx)(o.Z,{})})}},2630:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return E}});var n=t(7437),i=t(2265),o=t(6932),c=t(1761),a=t(4721),r=t(5890),l=t(4673),u=t(2455),d=t(9124),h=t(9186),g=t(268),v=t(875),f=t(1828),m=t(6310),x=t(4689),b=t(6981),j=t(8602),N=t(7973),p=t(1721),k=t(4094),w=e=>{let{editor:s}=e;return(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleBold().run(),disabled:!s.can().chain().focus().toggleBold().run(),className:s.isActive("bold")?"is-active":"",children:(0,n.jsx)(a.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleItalic().run(),disabled:!s.can().chain().focus().toggleItalic().run(),className:s.isActive("italic")?"is-active":"",children:(0,n.jsx)(r.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleStrike().run(),disabled:!s.can().chain().focus().toggleStrike().run(),className:s.isActive("strike")?"is-active":"",children:(0,n.jsx)(l.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleCode().run(),disabled:!s.can().chain().focus().toggleCode().run(),className:s.isActive("code")?"is-active":"",children:(0,n.jsx)(u.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:1}).run(),className:s.isActive("heading",{level:1})?"is-active":"",children:(0,n.jsx)(d.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:2}).run(),className:s.isActive("heading",{level:2})?"is-active":"",children:(0,n.jsx)(h.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:3}).run(),className:s.isActive("heading",{level:3})?"is-active":"",children:(0,n.jsx)(g.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:4}).run(),className:s.isActive("heading",{level:4})?"is-active":"",children:(0,n.jsx)(v.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:5}).run(),className:s.isActive("heading",{level:5})?"is-active":"",children:(0,n.jsx)(f.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleHeading({level:6}).run(),className:s.isActive("heading",{level:6})?"is-active":"",children:(0,n.jsx)(m.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleBulletList().run(),className:s.isActive("bulletList")?"is-active":"",children:(0,n.jsx)(x.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleOrderedList().run(),className:s.isActive("orderedList")?"is-active":"",children:(0,n.jsx)(b.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleCodeBlock().run(),className:s.isActive("codeBlock")?"is-active":"",children:(0,n.jsx)(j.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().toggleBlockquote().run(),className:s.isActive("blockquote")?"is-active":"",children:(0,n.jsx)(N.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().undo().run(),disabled:!s.can().chain().focus().undo().run(),children:(0,n.jsx)(p.Z,{className:"w-6 h-6"})}),(0,n.jsx)("button",{onClick:()=>s.chain().focus().redo().run(),disabled:!s.can().chain().focus().redo().run(),children:(0,n.jsx)(k.Z,{className:"w-6 h-6"})})]})},C=t(8700),y=t(1110),Z=t(5975),A=t(4829),S=t(3933),E=e=>{let{note:s}=e,[t,a]=i.useState(s.editorState||"<h1>".concat(s.name,"</h1>")),{complete:r,completion:l}=(0,S.GO)({api:"/api/completion"}),u=(0,y.D)({mutationFn:async()=>{let e=await A.Z.post("/api/saveNote",{noteId:s.id,editorState:t});return e.data}}),d=Z.Z.extend({addKeyboardShortcuts(){return{"Shift-a":()=>{let e=this.editor.getText().split(" ").slice(-30).join(" ");return r(e),!0}}}}),h=(0,o.jE)({autofocus:!0,extensions:[c.V,d],content:t,onUpdate:e=>{let{editor:s}=e;a(s.getHTML())}}),g=i.useRef("");i.useEffect(()=>{if(!l||!h)return;let e=l.slice(g.current.length);g.current=l,h.commands.insertContent(e)},[l,h]);let v=function(e,s){let[t,n]=i.useState(e);return i.useEffect(()=>{let t=setTimeout(()=>{n(e)},s);return()=>{clearTimeout(t)}},[e,s]),t}(t,500);return i.useEffect(()=>{""!==v&&u.mutate(void 0,{onSuccess:e=>{console.log("success update!",e)},onError:e=>{console.error(e)}})},[v]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex",children:[h&&(0,n.jsx)(w,{editor:h}),(0,n.jsx)(C.z,{disabled:!0,variant:"outline",children:u.isLoading?"Saving...":"Saved"})]}),(0,n.jsx)("div",{className:"prose prose-sm w-full mt-4",children:(0,n.jsx)(o.kg,{editor:h})}),(0,n.jsx)("div",{className:"h-4"}),(0,n.jsxs)("span",{className:"text-sm",children:["Tip: Press"," ",(0,n.jsx)("kbd",{className:"px-2 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg",children:"Shift + A"})," ","for AI autocomplete"]})]})}},8700:function(e,s,t){"use strict";t.d(s,{z:function(){return l}});var n=t(7437),i=t(2265),o=t(7256),c=t(9213),a=t(992);let r=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-pink-500 to-blue-500 text-white hover:from-pink-600 hover:to-blue-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,s)=>{let{className:t,variant:i,size:c,asChild:l=!1,...u}=e,d=l?o.g7:"button";return(0,n.jsx)(d,{className:(0,a.cn)(r({variant:i,size:c,className:t})),ref:s,...u})});l.displayName="Button"},992:function(e,s,t){"use strict";t.d(s,{cn:function(){return o}});var n=t(7042),i=t(3986);function o(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,i.m)((0,n.W)(s))}}},function(e){e.O(0,[572,902,674,616,631,291,587,971,864,744],function(){return e(e.s=602)}),_N_E=e.O()}]);