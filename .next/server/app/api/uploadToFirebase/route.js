"use strict";(()=>{var e={};e.id=18,e.ids=[18],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},50852:e=>{e.exports=require("async_hooks")},14300:e=>{e.exports=require("buffer")},96206:e=>{e.exports=require("console")},6113:e=>{e.exports=require("crypto")},67643:e=>{e.exports=require("diagnostics_channel")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},85158:e=>{e.exports=require("http2")},41808:e=>{e.exports=require("net")},15673:e=>{e.exports=require("node:events")},84492:e=>{e.exports=require("node:stream")},47261:e=>{e.exports=require("node:util")},4074:e=>{e.exports=require("perf_hooks")},63477:e=>{e.exports=require("querystring")},12781:e=>{e.exports=require("stream")},35356:e=>{e.exports=require("stream/web")},71576:e=>{e.exports=require("string_decoder")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},29830:e=>{e.exports=require("util/types")},71267:e=>{e.exports=require("worker_threads")},59796:e=>{e.exports=require("zlib")},72920:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>_,requestAsyncStorage:()=>h,routeModule:()=>w,serverHooks:()=>A,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>b});var a={};t.r(a),t.d(a,{POST:()=>f}),t(95655);var o=t(83323),i=t(54647),s=t(45746),n=t(23158),u=t(57613),p=t(71213);let l={apiKey:process.env.FIREBASE_API_KEY,authDomain:"notellect-ai.firebaseapp.com",projectId:"notellect-ai",storageBucket:"notellect-ai.appspot.com",messagingSenderId:"814890053910",appId:"1:814890053910:web:5f2aa300e63c41e295a037"},d=(0,u.ZF)(l),c=(0,p.cF)(d);async function x(e,r){try{let t=await fetch(e),a=await t.arrayBuffer(),o=r.replace(" ","")+Date.now+".jpeg",i=(0,p.iH)(c,o);await (0,p.KV)(i,a,{contentType:"image/jpeg"});let s=await (0,p.Jt)(i);return s}catch(e){console.error(e)}}var q=t(5042),m=t(66886);async function f(e){try{let{noteId:r}=await e.json(),t=await s.db.select().from(n.M).where((0,q.F)(n.M.id,parseInt(r)));if(!t[0].imageUrl)return new m.Z("no image url",{status:400});let a=await x(t[0].imageUrl,t[0].name);return await s.db.update(n.M).set({imageUrl:a}).where((0,q.F)(n.M.id,parseInt(r))),new m.Z("ok",{status:200})}catch(e){return console.error(e),new m.Z("error",{status:500})}}let g=o.AppRouteRouteModule,w=new g({definition:{kind:i.x.APP_ROUTE,page:"/api/uploadToFirebase/route",pathname:"/api/uploadToFirebase",filename:"route",bundlePath:"app/api/uploadToFirebase/route"},resolvedPagePath:"/Users/tiennguyen/Documents/Coding/AI-NOTE/src/app/api/uploadToFirebase/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:v,serverHooks:A,headerHooks:y,staticGenerationBailout:b}=w,_="/api/uploadToFirebase/route"},45746:(e,r,t)=>{t.d(r,{db:()=>s});var a=t(24641),o=t(49668);if(a.vK.fetchConnectionCache=!0,!process.env.DATABASE_URL)throw Error("DATABASE_URL is not defined");let i=(0,a.qn)(process.env.DATABASE_URL),s=(0,o.tS)(i)},23158:(e,r,t)=>{t.d(r,{M:()=>i});var a=t(5042),o=t(27030);let i=(0,a.aG)("notes",{id:(0,o.eP)("id").primaryKey(),name:(0,o.fL)("name").notNull(),createdAt:(0,a.an)("created_at").notNull().defaultNow(),imageUrl:(0,o.fL)("imageUrl"),userId:(0,o.fL)("user_id").notNull(),editorState:(0,o.fL)("editor_state")})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[922,675,727,441],()=>t(72920));module.exports=a})();