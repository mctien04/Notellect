"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},22050:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>A,originalPathname:()=>h,requestAsyncStorage:()=>v,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>g});var a={};r.r(a),r.d(a,{POST:()=>l}),r(95655);var o=r(83323),s=r(54647),n=r(45746),i=r(23158),u=r(5042),d=r(66886);async function l(e){try{let t=await e.json(),{noteId:r,editorState:a}=t;if(!a||!r)return new d.Z("Missing editorState or noteId",{status:400});r=parseInt(r);let o=await n.db.select().from(i.M).where((0,u.F)(i.M.id,r));if(1!=o.length)return new d.Z("failed to update",{status:500});let s=o[0];return s.editorState!==a&&await n.db.update(i.M).set({editorState:a}).where((0,u.F)(i.M.id,r)),d.Z.json({success:!0},{status:200})}catch(e){return console.error(e),d.Z.json({success:!1},{status:500})}}let p=o.AppRouteRouteModule,c=new p({definition:{kind:s.x.APP_ROUTE,page:"/api/saveNote/route",pathname:"/api/saveNote",filename:"route",bundlePath:"app/api/saveNote/route"},resolvedPagePath:"/Users/tiennguyen/Documents/Coding/AI-NOTE/src/app/api/saveNote/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:v,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:A,staticGenerationBailout:g}=c,h="/api/saveNote/route"},45746:(e,t,r)=>{r.d(t,{db:()=>n});var a=r(24641),o=r(49668);if(a.vK.fetchConnectionCache=!0,!process.env.DATABASE_URL)throw Error("DATABASE_URL is not defined");let s=(0,a.qn)(process.env.DATABASE_URL),n=(0,o.tS)(s)},23158:(e,t,r)=>{r.d(t,{M:()=>s});var a=r(5042),o=r(27030);let s=(0,a.aG)("notes",{id:(0,o.eP)("id").primaryKey(),name:(0,o.fL)("name").notNull(),createdAt:(0,a.an)("created_at").notNull().defaultNow(),imageUrl:(0,o.fL)("imageUrl"),userId:(0,o.fL)("user_id").notNull(),editorState:(0,o.fL)("editor_state")})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[922,675,727],()=>r(22050));module.exports=a})();