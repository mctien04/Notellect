(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{6195:e=>{"use strict";e.exports=require("node:buffer")},1182:(e,t,r)=>{"use strict";let n,i,s,a,o;r.r(t),r.d(t,{ComponentMod:()=>or,default:()=>on});var l,u,c={};r.r(c),r.d(c,{RuntimeAbortController:()=>ic,RuntimeBlob:()=>is,RuntimeFetch:()=>ih,RuntimeFormData:()=>ia,RuntimeHeaders:()=>io,RuntimeRequest:()=>il,RuntimeResponse:()=>iu});var h={};r.r(h),r.d(h,{POST:()=>a6,runtime:()=>a2});var d={};async function f(){if("_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&_ENTRIES.middleware_instrumentation.register)try{await _ENTRIES.middleware_instrumentation.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}r.r(d),r.d(d,{headerHooks:()=>a9,originalPathname:()=>ot,requestAsyncStorage:()=>a5,routeModule:()=>a4,serverHooks:()=>a7,staticGenerationAsyncStorage:()=>a8,staticGenerationBailout:()=>oe});let p=null;function g(){return p||(p=f()),p}function m(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==r.g.process&&(process.env=r.g.process.env,r.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Error(m(e))},construct(){throw Error(m(e))},apply(r,n,i){if("function"==typeof i[0])return i[0](t);throw Error(m(e))}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1}),g();class y extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class v extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class b extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}function w(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...function(e){var t,r,n,i,s,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&a.push(e.substring(t,e.length))}return a}(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function S(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}let _=Symbol("response"),E=Symbol("passThrough"),P=Symbol("waitUntil");class C{constructor(e){this[P]=[],this[E]=!1}respondWith(e){this[_]||(this[_]=Promise.resolve(e))}passThroughOnException(){this[E]=!0}waitUntil(e){this[P].push(e)}}class T extends C{constructor(e){super(e.request),this.sourcePage=e.page}get request(){throw new y({page:this.sourcePage})}respondWith(){throw new y({page:this.sourcePage})}}var A=r(6256),x=r(3764);let O=Symbol("internal request");class I extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);S(r),e instanceof Request?super(e,t):super(r,t);let n=new A.c(r,{headers:w(this.headers),nextConfig:t.nextConfig});this[O]={cookies:new x.q(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[O].cookies}get geo(){return this[O].geo}get ip(){return this[O].ip}get nextUrl(){return this[O].nextUrl}get page(){throw new v}get ua(){throw new b}get url(){return this[O].url}}let R=Symbol("internal response"),N=new Set([301,302,303,307,308]);function k(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class M extends Response{constructor(e,t={}){super(e,t),this[R]={cookies:new x.n(this.headers),url:t.url?new A.c(t.url,{headers:w(this.headers),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[R].cookies}static json(e,t){let r=Response.json(e,t);return new M(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!N.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",S(e)),new M(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",S(e)),k(t,r),new M(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),k(e,t),new M(null,{...e,headers:t})}}function L(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),i=r.protocol+"//"+r.host;return n.protocol+"//"+n.host===i?n.toString().replace(i,""):n.toString()}var D=r(1034);let U=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound",D.H4],B=["__nextDataReq"];var $=r(6824),j=r(2533),q=r(1276);class F extends I{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw new y({page:this.sourcePage})}respondWith(){throw new y({page:this.sourcePage})}waitUntil(){throw new y({page:this.sourcePage})}}let Q=[[D.i4],[D.ph],[D.pz]];async function z(e){let t,r;await g();let n=void 0!==self.__BUILD_MANIFEST,i="string"==typeof self.__PRERENDER_MANIFEST?JSON.parse(self.__PRERENDER_MANIFEST):void 0;e.request.url=e.request.url.replace(/\.rsc($|\?)/,"$1");let s=new A.c(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig}),a=[...s.searchParams.keys()];for(let e of a){let t=s.searchParams.getAll(e);if(e!==$.dN&&e.startsWith($.dN)){let r=e.substring($.dN.length);for(let e of(s.searchParams.delete(r),t))s.searchParams.append(r,e);s.searchParams.delete(e)}}let o=s.buildId;s.buildId="";let l=e.request.headers["x-nextjs-data"];l&&"/index"===s.pathname&&(s.pathname="/");let u=function(e){let t=new Headers;for(let[r,n]of Object.entries(e)){let e=Array.isArray(n)?n:[n];for(let n of e)void 0!==n&&("number"==typeof n&&(n=n.toString()),t.append(r,n))}return t}(e.request.headers),c=new Map;if(!n)for(let e of Q){let t=e.toString().toLowerCase(),r=u.get(t);r&&(c.set(t,u.get(t)),u.delete(t))}let h=new F({page:e.page,input:(function(e,t){let r="string"==typeof e,n=r?new URL(e):e;for(let e of U)n.searchParams.delete(e);if(t)for(let e of B)n.searchParams.delete(e);return r?n.toString():n})(s,!0).toString(),init:{body:e.request.body,geo:e.request.geo,headers:u,ip:e.request.ip,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});l&&Object.defineProperty(h,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCache&&e.IncrementalCache&&(globalThis.__incrementalCache=new e.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:void 0,dev:!1,requestHeaders:e.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:{previewModeId:"development-id"}})}));let d=new T({request:h,page:e.page}),f="/middleware"===e.page||"/src/middleware"===e.page;if((t=f?await j.B.wrap(q.F,{req:h,renderOpts:{onUpdateCookies:e=>{r=e},previewProps:(null==i?void 0:i.preview)||{previewModeId:"development-id",previewModeEncryptionKey:"",previewModeSigningKey:""}}},()=>e.handler(h,d)):await e.handler(h,d))&&!(t instanceof Response))throw TypeError("Expected an instance of Response to be returned");t&&r&&t.headers.set("set-cookie",r);let p=null==t?void 0:t.headers.get("x-middleware-rewrite");if(t&&p){let r=new A.c(p,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});r.host===h.nextUrl.host&&(r.buildId=o||r.buildId,t.headers.set("x-middleware-rewrite",String(r)));let n=L(String(r),String(s));l&&t.headers.set("x-nextjs-rewrite",n)}let m=null==t?void 0:t.headers.get("Location");if(t&&m&&!n){let r=new A.c(m,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});t=new Response(t.body,t),r.host===h.nextUrl.host&&(r.buildId=o||r.buildId,t.headers.set("Location",String(r))),l&&(t.headers.delete("Location"),t.headers.set("x-nextjs-redirect",L(String(r),String(s))))}let y=t||M.next(),v=y.headers.get("x-middleware-override-headers"),b=[];if(v){for(let[e,t]of c)y.headers.set(`x-middleware-request-${e}`,t),b.push(e);b.length>0&&y.headers.set("x-middleware-override-headers",v+","+b.join(","))}return{response:y,waitUntil:Promise.all(d[P])}}var H=r(1939),V=r.n(H);let K=0,G="x-vercel-cache-tags",W="x-vercel-sc-headers",J="x-vercel-revalidate",Y="x-vercel-cache-item-name";class X{static isAvailable(e){return!!(e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(e){if(this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,this.headers={},this.headers["Content-Type"]="application/json",W in e._requestHeaders){let t=JSON.parse(e._requestHeaders[W]);for(let e in t)this.headers[e]=t[e];delete e._requestHeaders[W]}let t=e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,r=e._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),t?(this.cacheEndpoint=`https://${t}${r||""}`,this.debug&&console.log("using cache endpoint",this.cacheEndpoint)):this.debug&&console.log("no cache endpoint available"),e.maxMemoryCacheSize?n||(this.debug&&console.log("using memory store for fetch cache"),n=new(V())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache")}async revalidateTag(e){if(this.debug&&console.log("revalidateTag",e),Date.now()<K){this.debug&&console.log("rate limited ",K);return}try{let t=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${e}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(429===t.status){let e=t.headers.get("retry-after")||"60000";K=Date.now()+parseInt(e)}if(!t.ok)throw Error(`Request failed with status ${t.status}.`)}catch(t){console.warn(`Failed to revalidate tag ${e}`,t)}}async get(e,t){let{tags:r,softTags:i,fetchCache:s,fetchIdx:a,fetchUrl:o}=t;if(!s)return null;if(Date.now()<K)return this.debug&&console.log("rate limited"),null;let l=null==n?void 0:n.get(e);if(Date.now()-((null==l?void 0:l.lastModified)||0)>2e3&&(l=void 0),!l&&this.cacheEndpoint)try{let t=Date.now(),s=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${e}`,{method:"GET",headers:{...this.headers,[Y]:o,[G]:(null==r?void 0:r.join(","))||"",[$.Ar]:(null==i?void 0:i.join(","))||""},next:{internal:!0,fetchType:"cache-get",fetchUrl:o,fetchIdx:a}});if(429===s.status){let e=s.headers.get("retry-after")||"60000";K=Date.now()+parseInt(e)}if(404===s.status)return this.debug&&console.log(`no fetch cache entry for ${e}, duration: ${Date.now()-t}ms`),null;if(!s.ok)throw console.error(await s.text()),Error(`invalid response from cache ${s.status}`);let u=await s.json();if(!u||"FETCH"!==u.kind)throw this.debug&&console.log({cached:u}),Error("invalid cache value");let c=s.headers.get("x-vercel-cache-state"),h=s.headers.get("age");l={value:u,lastModified:"fresh"!==c?Date.now()-$.BR:Date.now()-1e3*parseInt(h||"0",10)},this.debug&&console.log(`got fetch cache entry for ${e}, duration: ${Date.now()-t}ms, size: ${Object.keys(u).length}, cache-state: ${c} tags: ${null==r?void 0:r.join(",")} softTags: ${null==i?void 0:i.join(",")}`),l&&(null==n||n.set(e,l))}catch(e){this.debug&&console.error("Failed to get from fetch-cache",e)}return l||null}async set(e,t,{fetchCache:r,fetchIdx:i,fetchUrl:s,tags:a}){if(r){if(Date.now()<K){this.debug&&console.log("rate limited");return}if(null==n||n.set(e,{value:t,lastModified:Date.now()}),this.cacheEndpoint)try{let r=Date.now();null!==t&&"revalidate"in t&&(this.headers[J]=t.revalidate.toString()),!this.headers[J]&&null!==t&&"data"in t&&(this.headers["x-vercel-cache-control"]=t.data.headers["cache-control"]);let n=JSON.stringify({...t,tags:void 0});this.debug&&console.log("set cache",e);let o=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${e}`,{method:"POST",headers:{...this.headers,[Y]:s||"",[G]:(null==a?void 0:a.join(","))||""},body:n,next:{internal:!0,fetchType:"cache-set",fetchUrl:s,fetchIdx:i}});if(429===o.status){let e=o.headers.get("retry-after")||"60000";K=Date.now()+parseInt(e)}if(!o.ok)throw this.debug&&console.log(await o.text()),Error(`invalid response ${o.status}`);this.debug&&console.log(`successfully set to fetch-cache for ${e}, duration: ${Date.now()-r}ms, size: ${n.length}`)}catch(e){this.debug&&console.error("Failed to update fetch cache",e)}}}}var Z=r(4276),ee=r.n(Z);class et{constructor(e){this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.appDir=!!e._appDir,this.revalidatedTags=e.revalidatedTags,e.maxMemoryCacheSize&&!i&&(i=new(V())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})),this.serverDistDir&&this.fs&&(this.tagsManifestPath=ee().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!s)try{s=JSON.parse(this.fs.readFileSync(this.tagsManifestPath).toString("utf8"))}catch(e){s={version:1,items:{}}}}async revalidateTag(e){if(this.loadTagsManifest(),!s||!this.tagsManifestPath)return;let t=s.items[e]||{};t.revalidatedAt=Date.now(),s.items[e]=t;try{await this.fs.mkdir(ee().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(s||{}))}catch(e){console.warn("Failed to update tags manifest.",e)}}async get(e,{tags:t,softTags:r,fetchCache:n}={}){var a,o,l;let u=null==i?void 0:i.get(e);if((null==u?void 0:null==(a=u.value)?void 0:a.kind)==="PAGE"){let e;let t=null==(l=u.value.headers)?void 0:l[$.Et];if("string"==typeof t&&(e=t.split(",")),null==e?void 0:e.length){this.loadTagsManifest();let t=e.some(e=>{var t;return(null==s?void 0:null==(t=s.items[e])?void 0:t.revalidatedAt)&&(null==s?void 0:s.items[e].revalidatedAt)>=((null==u?void 0:u.lastModified)||Date.now())});t&&(u=void 0)}}if(u&&(null==u?void 0:null==(o=u.value)?void 0:o.kind)==="FETCH"){this.loadTagsManifest();let e=[...t||[],...r||[]],n=e.some(e=>{var t;return!!this.revalidatedTags.includes(e)||(null==s?void 0:null==(t=s.items[e])?void 0:t.revalidatedAt)&&(null==s?void 0:s.items[e].revalidatedAt)>=((null==u?void 0:u.lastModified)||Date.now())});n&&(u=void 0)}return u||null}async set(e,t,r){if(null==i||i.set(e,{value:t,lastModified:Date.now()}),this.flushToDisk){if((null==t?void 0:t.kind)==="ROUTE"){let{filePath:r}=await this.getFsPath({pathname:`${e}.body`,appDir:!0});await this.fs.mkdir(ee().dirname(r)),await this.fs.writeFile(r,t.body),await this.fs.writeFile(r.replace(/\.body$/,".meta"),JSON.stringify({headers:t.headers,status:t.status}));return}if((null==t?void 0:t.kind)==="PAGE"){let r="string"==typeof t.pageData,{filePath:n}=await this.getFsPath({pathname:`${e}.html`,appDir:r});await this.fs.mkdir(ee().dirname(n)),await this.fs.writeFile(n,t.html),await this.fs.writeFile((await this.getFsPath({pathname:`${e}.${r?"rsc":"json"}`,appDir:r})).filePath,r?t.pageData:JSON.stringify(t.pageData)),(t.headers||t.status)&&await this.fs.writeFile(n.replace(/\.html$/,".meta"),JSON.stringify({headers:t.headers,status:t.status}))}else if((null==t?void 0:t.kind)==="FETCH"){let{filePath:n}=await this.getFsPath({pathname:e,fetchCache:!0});await this.fs.mkdir(ee().dirname(n)),await this.fs.writeFile(n,JSON.stringify({...t,tags:r.tags}))}}}async getFsPath({pathname:e,appDir:t,fetchCache:r}){if(r)return{filePath:ee().join(this.serverDistDir,"..","cache","fetch-cache",e),isAppPath:!1};let n=ee().join(this.serverDistDir,"pages",e);if(!this.appDir||!1===t)return{filePath:n,isAppPath:!1};try{return await this.fs.readFile(n),{filePath:n,isAppPath:!1}}catch(t){return{filePath:ee().join(this.serverDistDir,"app",e),isAppPath:!0}}}}function er(e){return new TextEncoder().encode(e)}var en=r(9209);let ei=/\/\[[^/]+?\](?=\/|$)/,es="undefined"!=typeof performance;es&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class ea extends Error{}function eo(e){let t=/^\/index(\/|$)/.test(e)&&!ei.test(e)?"/index"+e:"/"===e?"/index":e.startsWith("/")?e:"/"+e;return t}function el(e){return e.replace(/\/$/,"").replace(/\/index$/,"")||"/"}class eu{constructor({fs:e,dev:t,appDir:r,flushToDisk:n,fetchCache:i,minimalMode:s,serverDistDir:a,requestHeaders:o,requestProtocol:l,maxMemoryCacheSize:u,getPrerenderManifest:c,fetchCacheKeyPrefix:h,CurCacheHandler:d,allowedRevalidateHeaderKeys:f}){var p,g,m,y;this.locks=new Map,this.unlocks=new Map;let v=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;d?v&&console.log("using custom cache handler",d.name):(e&&a&&(v&&console.log("using filesystem cache handler"),d=et),X.isAvailable({_requestHeaders:o})&&s&&i&&(v&&console.log("using fetch cache handler"),d=X)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(u=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.minimalMode=s,this.requestHeaders=o,this.requestProtocol=l,this.allowedRevalidateHeaderKeys=f,this.prerenderManifest=c(),this.fetchCacheKeyPrefix=h;let b=[];o[$.y3]===(null==(g=this.prerenderManifest)?void 0:null==(p=g.preview)?void 0:p.previewModeId)&&(this.isOnDemandRevalidate=!0),s&&"string"==typeof o[$.of]&&o[$.X_]===(null==(y=this.prerenderManifest)?void 0:null==(m=y.preview)?void 0:m.previewModeId)&&(b=o[$.of].split(",")),d&&(this.cacheHandler=new d({dev:t,fs:e,flushToDisk:n,serverDistDir:a,revalidatedTags:b,maxMemoryCacheSize:u,_appDir:!!r,_requestHeaders:o,fetchCacheKeyPrefix:h}))}calculateRevalidate(e,t,r){if(r)return new Date().getTime()-1e3;let{initialRevalidateSeconds:n}=this.prerenderManifest.routes[el(e)]||{initialRevalidateSeconds:1};return"number"==typeof n?1e3*n+t:n}_getPathname(e,t){return t?e:eo(e)}async unlock(e){let t=this.unlocks.get(e);t&&(t(),this.locks.delete(e),this.unlocks.delete(e))}async lock(e){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let t=()=>Promise.resolve(),r=this.locks.get(e);if(r)await r;else{let r=new Promise(e=>{t=async()=>{e()}});this.locks.set(e,r),this.unlocks.set(e,t)}return t}async revalidateTag(e){var t,r;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,null==(r=this.cacheHandler)?void 0:null==(t=r.revalidateTag)?void 0:t.call(r,e)}async fetchCacheKey(e,t={}){let r;let n=[];if(t.body){if("function"==typeof t.body.getReader){let e=t.body,r=e.getReader(),i=new Uint8Array;await r.read().then(function e({done:t,value:s}){if(!t){if(s)try{n.push("string"==typeof s?s:(0,en.encode)(s));let e="string"==typeof s?er(s):new Uint8Array(s),t=i;(i=new Uint8Array(t.byteLength+e.byteLength)).set(t),i.set(e,t.byteLength)}catch(e){console.error(e)}r.read().then(e)}}),t._ogBody=i}else if("function"==typeof t.body.keys){let e=t.body;for(let r of(t._ogBody=t.body,new Set([...e.keys()]))){let t=e.getAll(r);n.push(`${r}=${(await Promise.all(t.map(async e=>"string"==typeof e?e:await e.text()))).join(",")}`)}}else if("function"==typeof t.body.arrayBuffer){let e=t.body,r=await e.arrayBuffer();n.push((0,en.encode)(await t.body.arrayBuffer())),t._ogBody=new Blob([r],{type:e.type})}else"string"==typeof t.body&&(n.push(t.body),t._ogBody=t.body)}let i=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,"function"==typeof(t.headers||{}).keys?Object.fromEntries(t.headers):t.headers,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,n]);{var s;let e=er(i);s=await crypto.subtle.digest("SHA-256",e),r=Array.prototype.map.call(new Uint8Array(s),e=>e.toString(16).padStart(2,"0")).join("")}return r}async get(e,t={}){var r,n,i;let s,a;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.dev&&(!t.fetchCache||"no-cache"===this.requestHeaders["cache-control"]))return null;e=this._getPathname(e,t.fetchCache);let o=null,l=t.revalidate,u=await (null==(r=this.cacheHandler)?void 0:r.get(e,t));if((null==u?void 0:null==(n=u.value)?void 0:n.kind)==="FETCH"){let e=[...t.tags||[],...t.softTags||[]];if(e.some(e=>{var t;return null==(t=this.revalidatedTags)?void 0:t.includes(e)}))return null;l=l||u.value.revalidate;let r=Math.round((Date.now()-(u.lastModified||0))/1e3),n=r>l,i=u.value.data;return{isStale:n,value:{kind:"FETCH",data:i,revalidate:l},revalidateAfter:Date.now()+1e3*l}}let c=null==(i=this.prerenderManifest.routes[el(e)])?void 0:i.initialRevalidateSeconds;return(null==u?void 0:u.lastModified)===-1?(s=-1,a=-1*$.BR):s=!!(!1!==(a=this.calculateRevalidate(e,(null==u?void 0:u.lastModified)||Date.now(),this.dev&&!t.fetchCache))&&a<Date.now())||void 0,u&&(o={isStale:s,curRevalidate:c,revalidateAfter:a,value:u.value}),!u&&this.prerenderManifest.notFoundRoutes.includes(e)&&(o={isStale:s,value:null,curRevalidate:c,revalidateAfter:a},this.set(e,o.value,t)),o}async set(e,t,r){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,!this.dev||r.fetchCache){if(r.fetchCache&&JSON.stringify(t).length>2097152){if(this.dev)throw Error("fetch for over 2MB of data can not be cached");return}e=this._getPathname(e,r.fetchCache);try{var n;void 0===r.revalidate||r.fetchCache||(this.prerenderManifest.routes[e]={dataRoute:ee().posix.join("/_next/data",`${eo(e)}.json`),srcRoute:null,initialRevalidateSeconds:r.revalidate}),await (null==(n=this.cacheHandler)?void 0:n.set(e,t,r))}catch(t){console.warn("Failed to update prerender cache for",e,t)}}}}let ec=["(..)(..)","(.)","(..)","(...)"],eh=/[|\\{}()[\]^$+*?.-]/,ed=/[|\\{}()[\]^$+*?.-]/g;function ef(e){return eh.test(e)?e.replace(ed,"\\$&"):e}var ep=r(542);function eg(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}class em{constructor(e){var t;this.definition=e,t=e.pathname,ei.test(t)&&(this.dynamic=function(e){let{re:t,groups:r}=e;return e=>{let n=t.exec(e);if(!n)return!1;let i=e=>{try{return decodeURIComponent(e)}catch(e){throw new ea("failed to decode param")}},s={};return Object.keys(r).forEach(e=>{let t=r[e],a=n[t.pos];void 0!==a&&(s[e]=~a.indexOf("/")?a.split("/").map(e=>i(e)):t.repeat?[i(a)]:i(a))}),s}}(function(e){let{parameterizedRoute:t,groups:r}=function(e){let t=(0,ep.Q)(e).slice(1).split("/"),r={},n=1;return{parameterizedRoute:t.map(e=>{let t=ec.find(t=>e.startsWith(t)),i=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&i){let{key:e,optional:s,repeat:a}=eg(i[1]);return r[e]={pos:n++,repeat:a,optional:s},"/"+ef(t)+"([^/]+?)"}if(!i)return"/"+ef(e);{let{key:e,repeat:t,optional:s}=eg(i[1]);return r[e]={pos:n++,repeat:t,optional:s},t?s?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}(e.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return void 0!==this.dynamic}match(e){let t=this.test(e);return t?{definition:this.definition,params:t.params}:null}test(e){if(this.dynamic){let t=this.dynamic(e);return t?{params:t}:null}return e===this.definition.pathname?{}:null}}var ey=r(8752);class ev{constructor(e){this.routeModule=e,this.matcher=new em(e.definition)}static wrap(e,t={}){let r=new ev(e);return e=>z({...e,...t,IncrementalCache:eu,handler:r.handler.bind(r)})}async handler(e){let t=(0,ep.Q)(new URL(e.url).pathname),{basePath:r}=e.nextUrl;r&&(t=(0,ey.n)(t,r));let n=this.matcher.match(t);if(!n)throw Error(`Invariant: no match found for request. Pathname '${t}' should have matched '${this.matcher.definition.pathname}'`);let i="string"==typeof self.__PRERENDER_MANIFEST?JSON.parse(self.__PRERENDER_MANIFEST):void 0,s={params:n.params,prerenderManifest:{version:4,routes:{},dynamicRoutes:{},preview:(null==i?void 0:i.preview)||{previewModeEncryptionKey:"",previewModeId:"development-id",previewModeSigningKey:""},notFoundRoutes:[]},staticGenerationContext:{supportsDynamicHTML:!0}};return await this.routeModule.handle(e,s)}}r(3747);var eb=r(8333),ew=r(6085),eS=r(7652);eS.Client,eS.ClientBase,eS.Connection,eS.DatabaseError,eS.NeonDbError,eS.Pool,eS.Query,eS.defaults;let e_=eS.neon,eE=eS.neonConfig,eP=eS.types,eC=Symbol.for("drizzle:entityKind");function eT(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,eC))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=e.constructor;if(r)for(;r;){if(eC in r&&r[eC]===t[eC])return!0;r=Object.getPrototypeOf(r)}return!1}Symbol.for("drizzle:hasOwnEntityKind");class eA{static{this[eC]="Column"}constructor(e,t){this.enumValues=void 0,this.table=e,this.config=t,this.name=t.name,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}}let ex=Symbol.for("drizzle:ViewBaseConfig");class eO{static{this[eC]="View"}constructor({name:e,schema:t,selectedFields:r,query:n}){this[ex]={name:e,originalName:e,schema:t,selectedFields:r,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new rp([this])}}let eI=Symbol.for("drizzle:SubqueryConfig");class eR{static{this[eC]="Subquery"}constructor(e,t,r,n=!1){this[eI]={sql:e,selection:t,alias:r,isWith:n}}getSQL(){return new rp([this])}}class eN extends eR{static{this[eC]="WithSubquery"}}class ek{static{this[eC]="SelectionProxyHandler"}constructor(e){this.config={...e}}get(e,t){if(t===eI)return{...e[eI],selection:new Proxy(e[eI].selection,this)};if(t===ex)return{...e[ex],selectedFields:new Proxy(e[ex].selectedFields,this)};if("symbol"==typeof t)return e[t];let r=eT(e,eR)?e[eI].selection:eT(e,eO)?e[ex].selectedFields:e,n=r[t];if(eT(n,rp.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!n.isSelectionField)return n.sql;let e=n.clone();return e.isSelectionField=!0,e}if(eT(n,rp)){if("sql"===this.config.sqlBehavior)return n;throw Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return eT(n,eA)?this.config.alias?new Proxy(n,new r_(new Proxy(n.table,new rE(this.config.alias,this.config.replaceOriginalName??!1)))):n:"object"!=typeof n||null===n?n:new Proxy(n,new ek(this.config))}}function eM(e,t){return Object.entries(e).reduce((e,[r,n])=>{if("string"!=typeof r)return e;let i=t?[...t,r]:[r];return eT(n,eA)||eT(n,rp)||eT(n,rp.Aliased)?e.push({path:i,field:n}):eT(n,eV)?e.push(...eM(n[eV.Symbol.Columns],i)):e.push(...eM(n,i)),e},[])}function eL(e,t){let r=Object.entries(t).filter(([,e])=>void 0!==e).map(([t,r])=>eT(r,rp)?[t,r]:[t,new rv(r,e[eV.Symbol.Columns][t])]);if(0===r.length)throw Error("No values to set");return Object.fromEntries(r)}function eD(e){return e[eV.Symbol.Columns]}function eU(e){return eT(e,eR)?e[eI].alias:eT(e,eO)?e[ex].name:eT(e,rp)?void 0:e[eV.Symbol.IsAlias]?e[eV.Symbol.Name]:e[eV.Symbol.BaseName]}let eB=Symbol.for("drizzle:Name"),e$=Symbol.for("drizzle:Schema"),ej=Symbol.for("drizzle:Columns"),eq=Symbol.for("drizzle:OriginalName"),eF=Symbol.for("drizzle:BaseName"),eQ=Symbol.for("drizzle:IsAlias"),ez=Symbol.for("drizzle:ExtraConfigBuilder"),eH=Symbol.for("drizzle:IsDrizzleTable");class eV{static{this[eC]="Table"}static{this.Symbol={Name:eB,Schema:e$,OriginalName:eq,Columns:ej,BaseName:eF,IsAlias:eQ,ExtraConfigBuilder:ez}}constructor(e,t,r){this[eQ]=!1,this[ez]=void 0,this[eH]=!0,this[eB]=this[eq]=e,this[e$]=t,this[eF]=r}getSQL(){return new rp([this])}}class eK{static{a=Symbol.toStringTag}static{this[eC]="QueryPromise"}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}constructor(){this[a]="QueryPromise"}}let eG={startActiveSpan:(e,t)=>t()};class eW extends Error{static{this[eC]="DrizzleError"}constructor(e){super(e),this.name="DrizzleError"}static wrap(e,t){return new eW(e instanceof Error?t?`${t}: ${e.message}`:e.message:t??String(e))}}class eJ extends eW{static{this[eC]="TransactionRollbackError"}constructor(){super("Rollback")}}let eY=Symbol.for("drizzle:PgInlineForeignKeys");class eX extends eV{static{o=eV.Symbol.ExtraConfigBuilder}static{this[eC]="PgTable"}static{this.Symbol=Object.assign({},eV.Symbol,{InlineForeignKeys:eY})}constructor(...e){super(...e),this[eY]=[],this[o]=void 0}}function eZ(e,t,r,n,i=e){let s=new eX(e,n,i),a=Object.fromEntries(Object.entries(t).map(([e,t])=>{let r=t.build(s);return s[eY].push(...t.buildForeignKeys(r,s)),[e,r]})),o=Object.assign(s,a);return o[eV.Symbol.Columns]=a,r&&(o[eX.Symbol.ExtraConfigBuilder]=r),o}let e0=(e,t,r)=>eZ(e,t,r,void 0);class e1{static{this[eC]="PgCheckBuilder"}constructor(e,t){this.name=e,this.value=t}build(e){return new e2(e,this)}}class e2{static{this[eC]="PgCheck"}constructor(e,t){this.table=e,this.name=t.name,this.value=t.value}}class e6{static{this[eC]="PgForeignKeyBuilder"}constructor(e,t){this._onUpdate="no action",this._onDelete="no action",this.reference=()=>{let{columns:t,foreignColumns:r}=e();return{columns:t,foreignTable:r[0].table,foreignColumns:r}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new e3(e,this)}}class e3{static{this[eC]="PgForeignKey"}constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){let{columns:e,foreignColumns:t}=this.reference(),r=e.map(e=>e.name),n=t.map(e=>e.name),i=[this.table[eX.Symbol.Name],...r,t[0].table[eX.Symbol.Name],...n];return`${i.join("_")}_fk`}}class e4{static{this[eC]="PgIndexBuilderOn"}constructor(e,t){this.unique=e,this.name=t}on(...e){return new e5(e,this.unique,!1,this.name)}onOnly(...e){return new e5(e,this.unique,!0,this.name)}}class e5{static{this[eC]="PgIndexBuilder"}constructor(e,t,r,n){this.config={name:n,columns:e,unique:t,only:r}}concurrently(){return this.config.concurrently=!0,this}using(e){return this.config.using=e,this}asc(){return this.config.order="asc",this}desc(){return this.config.order="desc",this}nullsFirst(){return this.config.nulls="first",this}nullsLast(){return this.config.nulls="last",this}where(e){return this.config.where=e,this}build(e){return new e8(this.config,e)}}class e8{static{this[eC]="PgIndex"}constructor(e,t){this.config={...e,table:t}}}class e7{static{this[eC]="PgPrimaryKeyBuilder"}constructor(e){this.columns=e}build(e){return new e9(e,this.columns)}}class e9{static{this[eC]="PgPrimaryKey"}constructor(e,t){this.table=e,this.columns=t}getName(){return`${this.table[eX.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}function te(e,t){return`${e[eX.Symbol.Name]}_${t.join("_")}_unique`}class tt{static{this[eC]="PgUniqueConstraintBuilder"}constructor(e,t){this.nullsNotDistinctConfig=!1,this.name=t,this.columns=e}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new tn(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class tr{static{this[eC]="PgUniqueOnConstraintBuilder"}constructor(e){this.name=e}on(...e){return new tt(e,this.name)}}class tn{static{this[eC]="PgUniqueConstraint"}constructor(e,t,r,n){this.nullsNotDistinct=!1,this.table=e,this.columns=t,this.name=n??te(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=r}getName(){return this.name}}function ti(e,t,r){for(let n=t;n<e.length;n++){let i=e[n];if("\\"===i){n++;continue}if('"'===i)return[e.slice(t,n).replace(/\\/g,""),n+1];if(!r&&(","===i||"}"===i))return[e.slice(t,n).replace(/\\/g,""),n]}return[e.slice(t).replace(/\\/g,""),e.length]}class ts{static{this[eC]="ColumnBuilder"}constructor(e,t,r){this.$default=this.$defaultFn,this.config={name:e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}class ta extends ts{static{this[eC]="PgColumnBuilder"}array(e){return new tl(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,actions:n})=>(function(e,...t){return e(...t)})((r,n)=>{let i=new e6(()=>{let t=r();return{columns:[e],foreignColumns:[t]}});return n.onUpdate&&i.onUpdate(n.onUpdate),n.onDelete&&i.onDelete(n.onDelete),i.build(t)},r,n))}constructor(...e){super(...e),this.foreignKeyConfigs=[]}}class to extends eA{static{this[eC]="PgColumn"}constructor(e,t){t.uniqueName||(t.uniqueName=te(e,[t.name])),super(e,t),this.table=e}}class tl extends ta{static{this[eC]="PgArrayBuilder"}constructor(e,t,r){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=r}build(e){let t=this.config.baseBuilder.build(e);return new tu(e,this.config,t)}}class tu extends to{static{this[eC]="PgArray"}constructor(e,t,r,n){super(e,t),this.baseColumn=r,this.range=n,this.size=t.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,r=0){let n=[],i=r,s=!1;for(;i<t.length;){let a=t[i];if(","===a){(s||i===r)&&n.push(""),s=!0,i++;continue}if(s=!1,"\\"===a){i+=2;continue}if('"'===a){let[e,r]=ti(t,i+1,!0);n.push(e),i=r;continue}if("}"===a)return[n,i+1];if("{"===a){let[r,s]=e(t,i+1);n.push(r),i=s;continue}let[o,l]=ti(t,i,!1);n.push(o),i=l}return[n,i]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let r=e.map(e=>null===e?null:eT(this.baseColumn,tu)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?r:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t&&t.includes(",")?`"${t.replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(r)}}class tc extends ta{static{this[eC]="PgDateColumnBaseBuilder"}defaultNow(){return this.default(rb`now()`)}}class th extends tc{static{this[eC]="PgDateBuilder"}constructor(e){super(e,"date","PgDate")}build(e){return new td(e,this.config)}}class td extends to{static{this[eC]="PgDate"}getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class tf extends tc{static{this[eC]="PgDateStringBuilder"}constructor(e){super(e,"string","PgDateString")}build(e){return new tp(e,this.config)}}class tp extends to{static{this[eC]="PgDateString"}getSQLType(){return"date"}}class tg extends ta{static{this[eC]="PgJsonBuilder"}constructor(e){super(e,"json","PgJson")}build(e){return new tm(e,this.config)}}class tm extends to{static{this[eC]="PgJson"}constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}class ty extends ta{static{this[eC]="PgJsonbBuilder"}constructor(e){super(e,"json","PgJsonb")}build(e){return new tv(e,this.config)}}class tv extends to{static{this[eC]="PgJsonb"}constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}class tb extends ta{static{this[eC]="PgNumericBuilder"}constructor(e,t,r){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new tw(e,this.config)}}class tw extends to{static{this[eC]="PgNumeric"}constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class tS extends tc{static{this[eC]="PgTimeBuilder"}constructor(e,t,r){super(e,"string","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}build(e){return new t_(e,this.config)}}class t_ extends to{static{this[eC]="PgTime"}constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}class tE extends tc{static{this[eC]="PgTimestampBuilder"}constructor(e,t,r){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new tP(e,this.config)}}class tP extends to{static{this[eC]="PgTimestamp"}constructor(e,t){super(e,t),this.mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000"),this.mapToDriverValue=e=>this.withTimezone?e.toUTCString():e.toISOString(),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}class tC extends tc{static{this[eC]="PgTimestampStringBuilder"}constructor(e,t,r){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new tT(e,this.config)}}class tT extends to{static{this[eC]="PgTimestampString"}constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}class tA extends ta{static{this[eC]="PgUUIDBuilder"}constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(rb`gen_random_uuid()`)}build(e){return new tx(e,this.config)}}class tx extends to{static{this[eC]="PgUUID"}getSQLType(){return"uuid"}}class tO{static{this[eC]="PgDialect"}async migrate(e,t){let r=rb`
			CREATE TABLE IF NOT EXISTS "drizzle"."__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(rb`CREATE SCHEMA IF NOT EXISTS "drizzle"`),await t.execute(r);let n=await t.all(rb`select id, hash, created_at from "drizzle"."__drizzle_migrations" order by created_at desc limit 1`),i=n[0];await t.transaction(async t=>{for await(let r of e)if(!i||Number(i.created_at)<r.folderMillis){for(let e of r.sql)await t.execute(rb.raw(e));await t.execute(rb`insert into "drizzle"."__drizzle_migrations" ("hash", "created_at") values(${r.hash}, ${r.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildDeleteQuery({table:e,where:t,returning:r}){let n=r?rb` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,i=t?rb` where ${t}`:void 0;return rb`delete from ${e}${i}${n}`}buildUpdateSet(e,t){let r=Object.entries(t),n=r.length;return rb.join(r.flatMap(([t,r],i)=>{let s=e[eV.Symbol.Columns][t],a=rb`${rb.identifier(s.name)} = ${r}`;return i<n-1?[a,rb.raw(", ")]:[a]}))}buildUpdateQuery({table:e,set:t,where:r,returning:n}){let i=this.buildUpdateSet(e,t),s=n?rb` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,a=r?rb` where ${r}`:void 0;return rb`update ${e} set ${i}${a}${s}`}buildSelection(e,{isSingleTable:t=!1}={}){let r=e.length,n=e.flatMap(({field:e},n)=>{let i=[];if(eT(e,rp.Aliased)&&e.isSelectionField)i.push(rb.identifier(e.fieldAlias));else if(eT(e,rp.Aliased)||eT(e,rp)){let r=eT(e,rp.Aliased)?e.sql:e;t?i.push(new rp(r.queryChunks.map(e=>eT(e,to)?rb.identifier(e.name):e))):i.push(r),eT(e,rp.Aliased)&&i.push(rb` as ${rb.identifier(e.fieldAlias)}`)}else eT(e,eA)&&(t?i.push(rb.identifier(e.name)):i.push(e));return n<r-1&&i.push(rb`, `),i});return rb.join(n)}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:n,having:i,table:s,joins:a,orderBy:o,groupBy:l,limit:u,offset:c,lockingClauses:h,distinct:d}){let f,p,g,m;let y=r??eM(t);for(let e of y){var v;if(eT(e.field,eA)&&e.field.table[eB]!==(eT(s,eR)?s[eI].alias:eT(s,tq)?s[ex].name:eT(s,rp)?void 0:s[eB])&&(v=e.field.table,!a?.some(({alias:e})=>e===(v[eV.Symbol.IsAlias]?v[eB]:v[eV.Symbol.BaseName])))){let t=e.field.table[eB];throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let b=!a||0===a.length;if(e?.length){let t=[rb`with `];for(let[r,n]of e.entries())t.push(rb`${rb.identifier(n[eI].alias)} as (${n[eI].sql})`),r<e.length-1&&t.push(rb`, `);t.push(rb` `),f=rb.join(t)}d&&(p=!0===d?rb` distinct`:rb` distinct on (${rb.join(d.on,", ")})`);let w=this.buildSelection(y,{isSingleTable:b}),S=(()=>{if(eT(s,eV)&&s[eV.Symbol.OriginalName]!==s[eV.Symbol.Name]){let e=rb`${rb.identifier(s[eV.Symbol.OriginalName])}`;return s[eV.Symbol.Schema]&&(e=rb`${rb.identifier(s[eV.Symbol.Schema])}.${e}`),rb`${e} ${rb.identifier(s[eV.Symbol.Name])}`}return s})(),_=[];if(a)for(let[e,t]of a.entries()){0===e&&_.push(rb` `);let r=t.table,n=t.lateral?rb` lateral`:void 0;if(eT(r,eX)){let e=r[eX.Symbol.Name],i=r[eX.Symbol.Schema],s=r[eX.Symbol.OriginalName],a=e===s?void 0:t.alias;_.push(rb`${rb.raw(t.joinType)} join${n} ${i?rb`${rb.identifier(i)}.`:void 0}${rb.identifier(s)}${a&&rb` ${rb.identifier(a)}`} on ${t.on}`)}else if(eT(r,eO)){let e=r[ex].name,i=r[ex].schema,s=r[ex].originalName,a=e===s?void 0:t.alias;_.push(rb`${rb.raw(t.joinType)} join${n} ${i?rb`${rb.identifier(i)}.`:void 0}${rb.identifier(s)}${a&&rb` ${rb.identifier(a)}`} on ${t.on}`)}else _.push(rb`${rb.raw(t.joinType)} join${n} ${r} on ${t.on}`);e<a.length-1&&_.push(rb` `)}let E=rb.join(_),P=n?rb` where ${n}`:void 0,C=i?rb` having ${i}`:void 0;o&&o.length>0&&(g=rb` order by ${rb.join(o,rb`, `)}`),l&&l.length>0&&(m=rb` group by ${rb.join(l,rb`, `)}`);let T=u?rb` limit ${u}`:void 0,A=c?rb` offset ${c}`:void 0,x=rb.empty();if(h)for(let{strength:e,config:t}of h){let r=rb` for ${rb.raw(e)}`;t.of&&r.append(rb` of ${t.of}`),t.noWait?r.append(rb` no wait`):t.skipLocked&&r.append(rb` skip locked`),x.append(r)}return rb`${f}select${p} ${w} from ${S}${E}${P}${m}${C}${g}${T}${A}${x}`}buildInsertQuery({table:e,values:t,onConflict:r,returning:n}){let i=[],s=e[eV.Symbol.Columns],a=Object.entries(s),o=a.map(([,e])=>rb.identifier(e.name));for(let[e,r]of t.entries()){let n=[];for(let[e,t]of a){let i=r[e];if(void 0===i||eT(i,rv)&&void 0===i.value){if(void 0!==t.defaultFn){let e=t.defaultFn(),r=eT(e,rp)?e:rb.param(e,t);n.push(r)}else n.push(rb`default`)}else n.push(i)}i.push(n),e<t.length-1&&i.push(rb`, `)}let l=rb.join(i),u=n?rb` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,c=r?rb` on conflict ${r}`:void 0;return rb`insert into ${e} ${o} values ${l}${c}${u}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:r}){let n=t?rb` concurrently`:void 0,i=r?rb` with no data`:void 0;return rb`refresh materialized view${n} ${e}${i}`}prepareTyping(e){return eT(e,tv)||eT(e,tm)?"json":eT(e,tw)?"decimal":eT(e,t_)?"time":eT(e,tP)?"timestamp":eT(e,td)?"date":eT(e,tx)?"uuid":"none"}sqlToQuery(e){return e.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:i,queryConfig:s,tableAlias:a,nestedQueryRelation:o,joinOn:l}){let u,c=[],h,d,f=[],p,g=[];if(!0===s){let e=Object.entries(i.columns);c=e.map(([e,t])=>({dbKey:t.name,tsKey:e,field:rT(t,a),relationTableTsKey:void 0,isJson:!1,selection:[]}))}else{let n=Object.fromEntries(Object.entries(i.columns).map(([e,t])=>[e,rT(t,a)]));if(s.where){let e="function"==typeof s.where?s.where(n,{and:t0,between:rn,eq:tX,exists:rt,gt:t6,gte:t3,ilike:ro,inArray:t8,isNull:t9,isNotNull:re,like:rs,lt:t4,lte:t5,ne:tZ,not:t2,notBetween:ri,notExists:rr,notLike:ra,notIlike:rl,notInArray:t7,or:t1,sql:rb}):s.where;p=e&&rx(e,a)}let o=[],l=[];if(s.columns){let e=!1;for(let[t,r]of Object.entries(s.columns))void 0!==r&&t in i.columns&&(e||!0!==r||(e=!0),l.push(t));l.length>0&&(l=e?l.filter(e=>s.columns?.[e]===!0):Object.keys(i.columns).filter(e=>!l.includes(e)))}else l=Object.keys(i.columns);for(let e of l){let t=i.columns[e];o.push({tsKey:e,value:t})}let u=[];if(s.with&&(u=Object.entries(s.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:i.relations[e]}))),s.extras)for(let[e,t]of Object.entries("function"==typeof s.extras?s.extras(n,{sql:rb}):s.extras))o.push({tsKey:e,value:rA(t,a)});for(let{tsKey:e,value:t}of o)c.push({dbKey:eT(t,rp.Aliased)?t.fieldAlias:i.columns[e].name,tsKey:e,field:eT(t,eA)?rT(t,a):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let m="function"==typeof s.orderBy?s.orderBy(n,{sql:rb,asc:ru,desc:rc}):s.orderBy??[];for(let{tsKey:n,queryConfig:i,relation:o}of(Array.isArray(m)||(m=[m]),f=m.map(e=>eT(e,eA)?rT(e,a):rx(e,a)),h=s.limit,d=s.offset,u)){let s=function(e,t,r){if(eT(r,tG)&&r.config)return{fields:r.config.fields,references:r.config.references};let n=t[r.referencedTable[eV.Symbol.Name]];if(!n)throw Error(`Table "${r.referencedTable[eV.Symbol.Name]}" not found in schema`);let i=e[n];if(!i)throw Error(`Table "${n}" not found in schema`);let s=r.sourceTable,a=t[s[eV.Symbol.Name]];if(!a)throw Error(`Table "${s[eV.Symbol.Name]}" not found in schema`);let o=[];for(let e of Object.values(i.relations))(r.relationName&&r!==e&&e.relationName===r.relationName||!r.relationName&&e.referencedTable===r.sourceTable)&&o.push(e);if(o.length>1)throw r.relationName?Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):Error(`There are multiple relations between "${n}" and "${r.sourceTable[eV.Symbol.Name]}". Please specify relation name`);if(o[0]&&eT(o[0],tG)&&o[0].config)return{fields:o[0].config.references,references:o[0].config.fields};throw Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}(t,r,o),l=o.referencedTable[eV.Symbol.Name],u=r[l],h=`${a}_${n}`,d=t0(...s.fields.map((e,t)=>tX(rT(s.references[t],h),rT(e,a)))),f=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:e[u],tableConfig:t[u],queryConfig:eT(o,tG)?!0===i?{limit:1}:{...i,limit:1}:i,tableAlias:h,joinOn:d,nestedQueryRelation:o}),p=rb`${rb.identifier(h)}.${rb.identifier("data")}`.as(n);g.push({on:rb`true`,table:new eR(f.sql,{},h),alias:h,joinType:"left",lateral:!0}),c.push({dbKey:n,tsKey:n,field:p,relationTableTsKey:u,isJson:!0,selection:f.selection})}}if(0===c.length)throw new eW(`No fields selected for table "${i.tsName}" ("${a}")`);if(p=t0(l,p),o){let e=rb`json_build_array(${rb.join(c.map(({field:e,tsKey:t,isJson:r})=>r?rb`${rb.identifier(`${a}_${t}`)}.${rb.identifier("data")}`:eT(e,rp.Aliased)?e.sql:e),rb`, `)})`;eT(o,tW)&&(e=rb`coalesce(json_agg(${e}${f.length>0?rb` order by ${rb.join(f,rb`, `)}`:void 0}), '[]'::json)`);let t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:c}],r=void 0!==h||void 0!==d||f.length>0;r?(u=this.buildSelectQuery({table:rC(n,a),fields:{},fieldsFlat:[{path:[],field:rb.raw("*")}],where:p,limit:h,offset:d,orderBy:f}),p=void 0,h=void 0,d=void 0,f=[]):u=rC(n,a),u=this.buildSelectQuery({table:eT(u,eX)?u:new eR(u,{},a),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:eT(e,eA)?rT(e,a):e})),joins:g,where:p,limit:h,offset:d,orderBy:f})}else u=this.buildSelectQuery({table:rC(n,a),fields:{},fieldsFlat:c.map(({field:e})=>({path:[],field:eT(e,eA)?rT(e,a):e})),joins:g,where:p,limit:h,offset:d,orderBy:f});return{tableTsKey:i.tsName,sql:u,selection:c}}}class tI{static{this[eC]="TypedQueryBuilder"}getSelectedFields(){return this._.selectedFields}}class tR{static{this[eC]="PgSelectBuilder"}constructor(e){this.withList=[],this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}from(e){let t;let r=!!this.fields;return t=this.fields?this.fields:eT(e,eR)?Object.fromEntries(Object.keys(e[eI].selection).map(t=>[t,e[t]])):eT(e,tq)?e[ex].selectedFields:eT(e,rp)?{}:eD(e),new tk({table:e,fields:t,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class tN extends tI{static{this[eC]="PgSelectQueryBuilder"}constructor({table:e,fields:t,isPartialSelect:r,session:n,dialect:i,withList:s,distinct:a}){super(),this.leftJoin=this.createJoin("left"),this.rightJoin=this.createJoin("right"),this.innerJoin=this.createJoin("inner"),this.fullJoin=this.createJoin("full"),this.config={withList:s,table:e,fields:{...t},distinct:a},this.isPartialSelect=r,this.session=n,this.dialect=i,this._={selectedFields:t},this.tableName=eU(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(e){return(t,r)=>{let n=this.tableName,i=eU(t);if("string"==typeof i&&this.config.joins?.some(e=>e.alias===i))throw Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof n&&(this.config.fields={[n]:this.config.fields}),"string"==typeof i&&!eT(t,rp))){let e=eT(t,eR)?t[eI].selection:eT(t,eO)?t[ex].selectedFields:t[eV.Symbol.Columns];this.config.fields[i]=e}if("function"==typeof r&&(r=r(new Proxy(this.config.fields,new ek({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:r,table:t,joinType:e,alias:i}),"string"==typeof i)switch(e){case"left":this.joinsNotNullableMap[i]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[i]=!0;break;case"inner":this.joinsNotNullableMap[i]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[i]=!1}return this}}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ek({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ek({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ek({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ek({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.orderBy=Array.isArray(t)?t:[t]}else this.config.orderBy=e;return this}limit(e){return this.config.limit=e,this}offset(e){return this.config.offset=e,this}for(e,t={}){return this.config.lockingClauses||(this.config.lockingClauses=[]),this.config.lockingClauses.push({strength:e,config:t}),this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new eR(this.getSQL(),this.config.fields,e),new ek({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}class tk extends tN{static{this[eC]="PgSelect"}_prepare(e){let{session:t,config:r,dialect:n,joinsNotNullableMap:i}=this;if(!t)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");return eG.startActiveSpan("drizzle.prepareQuery",()=>{let s=eM(r.fields),a=t.prepareQuery(n.sqlToQuery(this.getSQL()),s,e);return a.joinsNotNullableMap=i,a})}prepare(e){return this._prepare(e)}constructor(...e){super(...e),this.execute=e=>eG.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e))}}!function(e,t){for(let r of t)for(let t of Object.getOwnPropertyNames(r.prototype))Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(r.prototype,t)||Object.create(null))}(tk,[eK]);class tM{static{this[eC]="PgQueryBuilder"}$with(e){let t=this;return{as:r=>("function"==typeof r&&(r=r(t)),new Proxy(new eN(r.getSQL(),r.getSelectedFields(),e,!0),new ek({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){let t=this;return{select:function(r){return new tR({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(e){return new tR({fields:e??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})},selectDistinctOn:function(e,r){return new tR({fields:r??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:e}})}}}select(e){return new tR({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new tR({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new tR({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new tO),this.dialect}}class tL{static{this[eC]="PgDefaultViewBuilderCore"}constructor(e,t){this.config={},this.name=e,this.schema=t}with(e){return this.config.with=e,this}}class tD extends tL{static{this[eC]="PgViewBuilder"}as(e){"function"==typeof e&&(e=e(new tM));let t=new ek({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),r=new Proxy(e.getSelectedFields(),t);return new Proxy(new tQ({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:r,query:e.getSQL().inlineParams()}}),t)}}class tU extends tL{static{this[eC]="PgManualViewBuilder"}constructor(e,t,r){super(e,r),this.columns=eD(e0(e,t))}existing(){return new Proxy(new tQ({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new ek({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new tQ({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new ek({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class tB{static{this[eC]="PgMaterializedViewBuilderCore"}constructor(e,t){this.config={},this.name=e,this.schema=t}using(e){return this.config.using=e,this}with(e){return this.config.with=e,this}tablespace(e){return this.config.tablespace=e,this}withNoData(){return this.config.withNoData=!0,this}}class t$ extends tB{static{this[eC]="PgMaterializedViewBuilder"}as(e){"function"==typeof e&&(e=e(new tM));let t=new ek({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),r=new Proxy(e.getSelectedFields(),t);return new Proxy(new tH({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:r,query:e.getSQL().inlineParams()}}),t)}}class tj extends tB{static{this[eC]="PgManualMaterializedViewBuilder"}constructor(e,t,r){super(e,r),this.columns=eD(e0(e,t))}existing(){return new Proxy(new tH({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new ek({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new tH({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new ek({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class tq extends eO{static{this[eC]="PgViewBase"}}let tF=Symbol.for("drizzle:PgViewConfig");class tQ extends tq{static{this[eC]="PgView"}constructor({pgConfig:e,config:t}){super(t),e&&(this[tF]={with:e.with})}}let tz=Symbol.for("drizzle:PgMaterializedViewConfig");class tH extends tq{static{this[eC]="PgMaterializedView"}constructor({pgConfig:e,config:t}){super(t),this[tz]={with:e?.with,using:e?.using,tablespace:e?.tablespace,withNoData:e?.withNoData}}}class tV{static{this[eC]="Relation"}constructor(e,t,r){this.sourceTable=e,this.referencedTable=t,this.relationName=r,this.referencedTableName=t[eV.Symbol.Name]}}class tK{static{this[eC]="Relations"}constructor(e,t){this.table=e,this.config=t}}class tG extends tV{static{this[eC]="One"}constructor(e,t,r,n){super(e,t,r?.relationName),this.config=r,this.isNullable=n}withFieldName(e){let t=new tG(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class tW extends tV{static{this[eC]="Many"}constructor(e,t,r){super(e,t,r?.relationName),this.config=r}withFieldName(e){let t=new tW(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function tJ(e){return{one:function(t,r){return new tG(e,t,r,r?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)},many:function(t,r){return new tW(e,t,r)}}}function tY(e,t){return!("object"==typeof t&&null!==t&&"mapToDriverValue"in t&&"function"==typeof t.mapToDriverValue)||rd(e)||eT(e,rv)||eT(e,rw)||eT(e,eA)||eT(e,eV)||eT(e,eO)?e:new rv(e,t)}let tX=(e,t)=>rb`${e} = ${tY(t,e)}`,tZ=(e,t)=>rb`${e} <> ${tY(t,e)}`;function t0(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new rp(1===t.length?t:[new rf("("),rb.join(t,new rf(" and ")),new rf(")")])}function t1(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new rp(1===t.length?t:[new rf("("),rb.join(t,new rf(" or ")),new rf(")")])}function t2(e){return rb`not ${e}`}let t6=(e,t)=>rb`${e} > ${tY(t,e)}`,t3=(e,t)=>rb`${e} >= ${tY(t,e)}`,t4=(e,t)=>rb`${e} < ${tY(t,e)}`,t5=(e,t)=>rb`${e} <= ${tY(t,e)}`;function t8(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("inArray requires at least one value");return rb`${e} in ${t.map(t=>tY(t,e))}`}return rb`${e} in ${tY(t,e)}`}function t7(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("notInArray requires at least one value");return rb`${e} not in ${t.map(t=>tY(t,e))}`}return rb`${e} not in ${tY(t,e)}`}function t9(e){return rb`${e} is null`}function re(e){return rb`${e} is not null`}function rt(e){return rb`exists (${e})`}function rr(e){return rb`not exists (${e})`}function rn(e,t,r){return rb`${e} between ${tY(t,e)} and ${tY(r,e)}`}function ri(e,t,r){return rb`${e} not between ${tY(t,e)} and ${tY(r,e)}`}function rs(e,t){return rb`${e} like ${t}`}function ra(e,t){return rb`${e} not like ${t}`}function ro(e,t){return rb`${e} ilike ${t}`}function rl(e,t){return rb`${e} not ilike ${t}`}function ru(e){return rb`${e} asc`}function rc(e){return rb`${e} desc`}class rh{static{this[eC]="FakePrimitiveParam"}}function rd(e){return"object"==typeof e&&null!==e&&"getSQL"in e&&"function"==typeof e.getSQL}class rf{static{this[eC]="StringChunk"}constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new rp([this])}}class rp{static{this[eC]="SQL"}constructor(e){this.decoder=rm,this.shouldInlineParams=!1,this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return eG.startActiveSpan("drizzle.buildSQL",t=>{let r=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,t){let r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{escapeName:n,escapeParam:i,prepareTyping:s,inlineParams:a,paramStartIndex:o}=r;return function(e){let t={sql:"",params:[]};for(let r of e)t.sql+=r.sql,t.params.push(...r.params),r.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}(e.map(e=>{if(eT(e,rf))return{sql:e.value.join(""),params:[]};if(eT(e,rg))return{sql:n(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new rf("(")];for(let[r,n]of e.entries())t.push(n),r<e.length-1&&t.push(new rf(", "));return t.push(new rf(")")),this.buildQueryFromSourceParams(t,r)}if(eT(e,rp))return this.buildQueryFromSourceParams(e.queryChunks,{...r,inlineParams:a||e.shouldInlineParams});if(eT(e,eV)){let t=e[eV.Symbol.Schema],r=e[eV.Symbol.Name];return{sql:void 0===t?n(r):n(t)+"."+n(r),params:[]}}if(eT(e,eA))return{sql:n(e.table[eV.Symbol.Name])+"."+n(e.name),params:[]};if(eT(e,eO)){let t=e[ex].schema,r=e[ex].name;return{sql:void 0===t?n(r):n(t)+"."+n(r),params:[]}}if(eT(e,rv)){let t;let n=null===e.value?null:e.encoder.mapToDriverValue(e.value);return eT(n,rp)?this.buildQueryFromSourceParams([n],r):a?{sql:this.mapInlineParam(n,r),params:[]}:(void 0!==s&&(t=[s(e.encoder)]),{sql:i(o.value++,n),params:[n],typings:t})}return eT(e,rw)?{sql:i(o.value++,e),params:[e]}:eT(e,rp.Aliased)&&void 0!==e.fieldAlias?{sql:n(e.fieldAlias),params:[]}:eT(e,eR)?e[eI].isWith?{sql:n(e[eI].alias),params:[]}:this.buildQueryFromSourceParams([new rf("("),e[eI].sql,new rf(") "),new rg(e[eI].alias)],r):rd(e)?this.buildQueryFromSourceParams([new rf("("),e.getSQL(),new rf(")")],r):eT(e,tV)?this.buildQueryFromSourceParams([e.sourceTable,new rf("."),rb.identifier(e.fieldName)],r):a?{sql:this.mapInlineParam(e,r),params:[]}:{sql:i(o.value++,e),params:[e]}}))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let r=e.toString();return"[object Object]"===r?t(JSON.stringify(e)):t(r)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new rp.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}}class rg{static{this[eC]="Name"}constructor(e){this.value=e}getSQL(){return new rp([this])}}let rm={mapFromDriverValue:e=>e},ry={mapToDriverValue:e=>e};({...rm,...ry});class rv{static{this[eC]="Param"}constructor(e,t=ry){this.value=e,this.encoder=t}getSQL(){return new rp([this])}}function rb(e,...t){let r=[];for(let[n,i]of((t.length>0||e.length>0&&""!==e[0])&&r.push(new rf(e[0])),t.entries()))r.push(i,new rf(e[n+1]));return new rp(r)}!function(e){e.empty=function(){return new rp([])},e.fromList=function(e){return new rp(e)},e.raw=function(e){return new rp([new rf(e)])},e.join=function(e,t){let r=[];for(let[n,i]of e.entries())n>0&&void 0!==t&&r.push(t),r.push(i);return new rp(r)},e.identifier=function(e){return new rg(e)},e.placeholder=function(e){return new rw(e)},e.param=function(e,t){return new rv(e,t)}}(rb||(rb={})),function(e){class t{static{this[eC]="SQL.Aliased"}constructor(e,t){this.isSelectionField=!1,this.sql=e,this.fieldAlias=t}getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t}(rp||(rp={}));class rw{static{this[eC]="Placeholder"}constructor(e){this.name=e}getSQL(){return new rp([this])}}function rS(e,t){return e.map(e=>{if(eT(e,rw)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}return e})}eA.prototype.getSQL=function(){return new rp([this])};class r_{static{this[eC]="ColumnAliasProxyHandler"}constructor(e){this.table=e}get(e,t){return"table"===t?this.table:e[t]}}class rE{static{this[eC]="TableAliasProxyHandler"}constructor(e,t){this.alias=e,this.replaceOriginalName=t}get(e,t){if(t===eV.Symbol.IsAlias)return!0;if(t===eV.Symbol.Name||this.replaceOriginalName&&t===eV.Symbol.OriginalName)return this.alias;if(t===ex)return{...e[ex],name:this.alias,isAlias:!0};if(t===eV.Symbol.Columns){let t=e[eV.Symbol.Columns];if(!t)return t;let r={};return Object.keys(t).map(n=>{r[n]=new Proxy(t[n],new r_(new Proxy(e,this)))}),r}let r=e[t];return eT(r,eA)?new Proxy(r,new r_(new Proxy(e,this))):r}}class rP{static{this[eC]="RelationTableAliasProxyHandler"}constructor(e){this.alias=e}get(e,t){return"sourceTable"===t?rC(e.sourceTable,this.alias):e[t]}}function rC(e,t){return new Proxy(e,new rE(t,!1))}function rT(e,t){return new Proxy(e,new r_(new Proxy(e.table,new rE(t,!1))))}function rA(e,t){return new rp.Aliased(rx(e.sql,t),e.fieldAlias)}function rx(e,t){return rb.join(e.queryChunks.map(e=>eT(e,eA)?rT(e,t):eT(e,rp)?rx(e,t):eT(e,rp.Aliased)?rA(e,t):e))}class rO{static{this[eC]="ConsoleLogWriter"}write(e){console.log(e)}}class rI{static{this[eC]="DefaultLogger"}constructor(e){this.writer=e?.writer??new rO}logQuery(e,t){let r=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),n=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${n}`)}}class rR{static{this[eC]="NoopLogger"}logQuery(){}}class rN extends eK{static{this[eC]="PgDelete"}constructor(e,t,r){super(),this.execute=e=>eG.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e)),this.session=t,this.dialect=r,this.config={table:e}}where(e){return this.config.where=e,this}returning(e=this.config.table[eV.Symbol.Columns]){return this.config.returning=eM(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return eG.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e))}prepare(e){return this._prepare(e)}}class rk{static{this[eC]="PgInsertBuilder"}constructor(e,t,r){this.table=e,this.session=t,this.dialect=r}values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let t=e.map(e=>{let t={},r=this.table[eV.Symbol.Columns];for(let n of Object.keys(e)){let i=e[n];t[n]=eT(i,rp)?i:new rv(i,r[n])}return t});return new rM(this.table,t,this.session,this.dialect)}}class rM extends eK{static{this[eC]="PgInsert"}constructor(e,t,r,n){super(),this.execute=e=>eG.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e)),this.session=r,this.dialect=n,this.config={table:e,values:t}}returning(e=this.config.table[eV.Symbol.Columns]){return this.config.returning=eM(e),this}onConflictDoNothing(e={}){if(void 0===e.target)this.config.onConflict=rb`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(e.name)).join(","):this.dialect.escapeName(e.target.name);let r=e.where?rb` where ${e.where}`:void 0;this.config.onConflict=rb`(${rb.raw(t)}) do nothing${r}`}return this}onConflictDoUpdate(e){let t=e.where?rb` where ${e.where}`:void 0,r=this.dialect.buildUpdateSet(this.config.table,eL(this.config.table,e.set)),n="";return n=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(e.name)).join(","):this.dialect.escapeName(e.target.name),this.config.onConflict=rb`(${rb.raw(n)}) do update set ${r}${t}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return eG.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e))}prepare(e){return this._prepare(e)}}class rL extends eK{static{this[eC]="PgRefreshMaterializedView"}constructor(e,t,r){super(),this.execute=e=>eG.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e)),this.session=t,this.dialect=r,this.config={view:e}}concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return eG.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e))}prepare(e){return this._prepare(e)}}class rD{static{this[eC]="PgUpdateBuilder"}constructor(e,t,r){this.table=e,this.session=t,this.dialect=r}set(e){return new rU(this.table,eL(this.table,e),this.session,this.dialect)}}class rU extends eK{static{this[eC]="PgUpdate"}constructor(e,t,r,n){super(),this.execute=e=>this._prepare().execute(e),this.session=r,this.dialect=n,this.config={set:t,table:e}}where(e){return this.config.where=e,this}returning(e=this.config.table[eV.Symbol.Columns]){return this.config.returning=eM(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e)}prepare(e){return this._prepare(e)}}class rB{static{this[eC]="PgRelationalQueryBuilder"}constructor(e,t,r,n,i,s,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=i,this.dialect=s,this.session=a}findMany(e){return new r$(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new r$(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class r$ extends eK{static{this[eC]="PgRelationalQuery"}constructor(e,t,r,n,i,s,a,o,l){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=i,this.dialect=s,this.session=a,this.config=o,this.mode=l}_prepare(e){return eG.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:r}=this._toSQL();return this.session.prepareQuery(r,void 0,e,(e,r)=>{let n=e.map(e=>(function e(t,r,n,i,s=e=>e){let a={};for(let[o,l]of i.entries())if(l.isJson){let i=r.relations[l.tsKey],u=n[o],c="string"==typeof u?JSON.parse(u):u;a[l.tsKey]=eT(i,tG)?c&&e(t,t[l.relationTableTsKey],c,l.selection,s):c.map(r=>e(t,t[l.relationTableTsKey],r,l.selection,s))}else{let e;let t=s(n[o]),r=l.field;e=eT(r,eA)?r:eT(r,rp)?r.decoder:r.sql.decoder,a[l.tsKey]=null===t?null:e.mapFromDriverValue(t)}return a})(this.schema,this.tableConfig,e,t.selection,r));return"first"===this.mode?n[0]:n})})}prepare(e){return this._prepare(e)}_toSQL(){let e=this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}execute(){return eG.startActiveSpan("drizzle.operation",()=>this._prepare().execute())}}class rj{static{this[eC]="PgDatabase"}constructor(e,t,r){if(this.dialect=e,this.session=t,this._=r?{schema:r.schema,tableNamesMap:r.tableNamesMap}:{schema:void 0,tableNamesMap:{}},this.query={},this._.schema)for(let[n,i]of Object.entries(this._.schema))this.query[n]=new rB(r.fullSchema,this._.schema,this._.tableNamesMap,r.fullSchema[n],i,e,t)}$with(e){return{as:t=>("function"==typeof t&&(t=t(new tM)),new Proxy(new eN(t.getSQL(),t.getSelectedFields(),e,!0),new ek({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){let t=this;return{select:function(r){return new tR({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e})}}}select(e){return new tR({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new tR({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new tR({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new rD(e,this.session,this.dialect)}insert(e){return new rk(e,this.session,this.dialect)}delete(e){return new rN(e,this.session,this.dialect)}refreshMaterializedView(e){return new rL(e,this.session,this.dialect)}execute(e){return this.session.execute(e.getSQL())}transaction(e,t){return this.session.transaction(e,t)}}class rq{static{this[eC]="PgPreparedQuery"}}class rF{static{this[eC]="PgSession"}constructor(e){this.dialect=e}execute(e){return eG.startActiveSpan("drizzle.operation",()=>{let t=eG.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0));return t.execute()})}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0).all()}}class rQ extends rj{static{this[eC]="PgTransaction"}constructor(e,t,r,n=0){super(e,t,r),this.schema=r,this.nestedIndex=n}rollback(){throw new eJ}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),"boolean"==typeof e.deferrable&&t.push(e.deferrable?"deferrable":"not deferrable"),rb.raw(t.join(" "))}setTransaction(e){return this.session.execute(rb`set transaction ${this.getTransactionConfigSQL(e)}`)}}class rz extends rq{static{this[eC]="NeonHttpPreparedQuery"}constructor(e,t,r,n,i,s,a){super(),this.client=e,this.queryString=t,this.params=r,this.logger=n,this.fields=i,this.name=s,this.customResultMapper=a,this.rawQuery={arrayMode:!1,fullResults:!0},this.query={arrayMode:!0,fullResults:!0}}async execute(e={}){let t=rS(this.params,e);this.logger.logQuery(this.queryString,t);let{fields:r,client:n,queryString:i,query:s,rawQuery:a,joinsNotNullableMap:o,customResultMapper:l}=this;if(!r&&!l)return n(i,t,a);let u=await n(i,t,s);return l?l(u.rows):u.rows.map(e=>(function(e,t,r){let n={},i=e.reduce((e,{path:i,field:s},a)=>{let o;o=eT(s,eA)?s:eT(s,rp)?s.decoder:s.sql.decoder;let l=e;for(let[e,h]of i.entries())if(e<i.length-1)h in l||(l[h]={}),l=l[h];else{let e=t[a],d=l[h]=null===e?null:o.mapFromDriverValue(e);if(r&&eT(s,eA)&&2===i.length){var u,c;let e=i[0];e in n?"string"==typeof n[e]&&n[e]!==s.table[eB]&&(n[e]=!1):n[e]=null===d&&s.table[eB]}}return e},{});if(r&&Object.keys(n).length>0)for(let[e,t]of Object.entries(n))"string"!=typeof t||r[t]||(i[e]=null);return i})(r,e,o))}all(e={}){let t=rS(this.params,e);return this.logger.logQuery(this.queryString,t),this.client(this.queryString,t,this.rawQuery).then(e=>e.rows)}values(e={}){let t=rS(this.params,e);return this.logger.logQuery(this.queryString,t),this.client(this.queryString,t).then(e=>e.rows)}}class rH extends rF{static{this[eC]="NeonHttpSession"}constructor(e,t,r,n={}){super(t),this.client=e,this.schema=r,this.options=n,this.logger=n.logger??new rR}prepareQuery(e,t,r,n){return new rz(this.client,e.sql,e.params,this.logger,t,r,n)}async query(e,t){this.logger.logQuery(e,t);let r=await this.client(e,t,{arrayMode:!0});return r}async queryObjects(e,t){return this.client(e,t)}async transaction(e,t={}){throw Error("No transactions support in neon-http driver")}}class rV extends rQ{static{this[eC]="NeonHttpTransaction"}async transaction(e){throw Error("No transactions support in neon-http driver")}}class rK{static{this[eC]="NeonDriver"}constructor(e,t,r={}){this.client=e,this.dialect=t,this.options=r,this.initMappers()}createSession(e){return new rH(this.client,this.dialect,e,{logger:this.options.logger})}initMappers(){eP.setTypeParser(eP.builtins.TIMESTAMPTZ,e=>e),eP.setTypeParser(eP.builtins.TIMESTAMP,e=>e),eP.setTypeParser(eP.builtins.DATE,e=>e)}}if(eE.fetchConnectionCache=!0,!process.env.DATABASE_URL)throw Error("DATABASE_URL is not defined");let rG=e_(process.env.DATABASE_URL),rW=function(e,t={}){let r,n;let i=new tO;if(!0===t.logger?r=new rI:!1!==t.logger&&(r=t.logger),t.schema){let e=function(e,t){1===Object.keys(e).length&&"default"in e&&!eT(e.default,eV)&&(e=e.default);let r={},n={},i={};for(let[s,a]of Object.entries(e))if("object"==typeof a&&null!==a&&eH in a){let e=a[eV.Symbol.Name],t=n[e];for(let n of(r[e]=s,i[s]={tsName:s,dbName:a[eV.Symbol.Name],columns:a[eV.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]},Object.values(a[eV.Symbol.Columns])))n.primary&&i[s].primaryKey.push(n);let o=a[eV.Symbol.ExtraConfigBuilder]?.(a);if(o)for(let e of Object.values(o))eT(e,e7)&&i[s].primaryKey.push(...e.columns)}else if(eT(a,tK)){let e;let s=a.table[eV.Symbol.Name],o=r[s],l=a.config(t(a.table));for(let[t,r]of Object.entries(l))if(o){let e=i[o];e.relations[t]=r}else s in n||(n[s]={relations:{},primaryKey:e}),n[s].relations[t]=r}return{tables:i,tableNamesMap:r}}(t.schema,tJ);n={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}let s=new rK(e,i,{logger:r}),a=s.createSession(n);return new rj(i,a,n)}(rG);class rJ extends ta{static{this[eC]="PgBigInt53Builder"}constructor(e){super(e,"number","PgBigInt53")}build(e){return new rY(e,this.config)}}class rY extends to{static{this[eC]="PgBigInt53"}getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class rX extends ta{static{this[eC]="PgBigInt64Builder"}constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new rZ(e,this.config)}}class rZ extends to{static{this[eC]="PgBigInt64"}getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}class r0 extends ta{static{this[eC]="PgBigSerial53Builder"}constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new r1(e,this.config)}}class r1 extends to{static{this[eC]="PgBigSerial53"}getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class r2 extends ta{static{this[eC]="PgBigSerial64Builder"}constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new r6(e,this.config)}}class r6 extends to{static{this[eC]="PgBigSerial64"}getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}class r3 extends ta{static{this[eC]="PgBooleanBuilder"}constructor(e){super(e,"boolean","PgBoolean")}build(e){return new r4(e,this.config)}}class r4 extends to{static{this[eC]="PgBoolean"}getSQLType(){return"boolean"}}class r5 extends ta{static{this[eC]="PgCharBuilder"}constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new r8(e,this.config)}}class r8 extends to{static{this[eC]="PgChar"}getSQLType(){return void 0===this.length?"char":`char(${this.length})`}constructor(...e){super(...e),this.length=this.config.length,this.enumValues=this.config.enumValues}}class r7 extends ta{static{this[eC]="PgCidrBuilder"}constructor(e){super(e,"string","PgCidr")}build(e){return new r9(e,this.config)}}class r9 extends to{static{this[eC]="PgCidr"}getSQLType(){return"cidr"}}class ne extends ta{static{this[eC]="PgCustomColumnBuilder"}constructor(e,t,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new nt(e,this.config)}}class nt extends to{static{this[eC]="PgCustomColumn"}constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}class nr extends ta{static{this[eC]="PgDoublePrecisionBuilder"}constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new nn(e,this.config)}}class nn extends to{static{this[eC]="PgDoublePrecision"}getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}Symbol.for("drizzle:isPgEnum");class ni extends ta{static{this[eC]="PgEnumColumnBuilder"}constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new ns(e,this.config)}}class ns extends to{static{this[eC]="PgEnumColumn"}constructor(e,t){super(e,t),this.enum=this.config.enum,this.enumValues=this.config.enum.enumValues,this.enum=t.enum}getSQLType(){return this.enum.enumName}}class na extends ta{static{this[eC]="PgInetBuilder"}constructor(e){super(e,"string","PgInet")}build(e){return new no(e,this.config)}}class no extends to{static{this[eC]="PgInet"}getSQLType(){return"inet"}}class nl extends ta{static{this[eC]="PgIntegerBuilder"}constructor(e){super(e,"number","PgInteger")}build(e){return new nu(e,this.config)}}class nu extends to{static{this[eC]="PgInteger"}getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}class nc extends ta{static{this[eC]="PgIntervalBuilder"}constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new nh(e,this.config)}}class nh extends to{static{this[eC]="PgInterval"}getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}constructor(...e){super(...e),this.fields=this.config.intervalConfig.fields,this.precision=this.config.intervalConfig.precision}}class nd extends ta{static{this[eC]="PgMacaddrBuilder"}constructor(e){super(e,"string","PgMacaddr")}build(e){return new nf(e,this.config)}}class nf extends to{static{this[eC]="PgMacaddr"}getSQLType(){return"macaddr"}}class np extends ta{static{this[eC]="PgMacaddr8Builder"}constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ng(e,this.config)}}class ng extends to{static{this[eC]="PgMacaddr8"}getSQLType(){return"macaddr8"}}class nm extends ta{static{this[eC]="PgRealBuilder"}constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new ny(e,this.config)}}class ny extends to{static{this[eC]="PgReal"}constructor(e,t){super(e,t),this.mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}getSQLType(){return"real"}}class nv extends to{static{this[eC]="PgSerial"}getSQLType(){return"serial"}}class nb extends ta{static{this[eC]="PgSmallIntBuilder"}constructor(e){super(e,"number","PgSmallInt")}build(e){return new nw(e,this.config)}}class nw extends to{static{this[eC]="PgSmallInt"}getSQLType(){return"smallint"}constructor(...e){super(...e),this.mapFromDriverValue=e=>"string"==typeof e?Number(e):e}}class nS extends ta{static{this[eC]="PgSmallSerialBuilder"}constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new n_(e,this.config)}}class n_ extends to{static{this[eC]="PgSmallSerial"}getSQLType(){return"smallserial"}}class nE extends ta{static{this[eC]="PgTextBuilder"}constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new nP(e,this.config)}}class nP extends to{static{this[eC]="PgText"}getSQLType(){return"text"}constructor(...e){super(...e),this.enumValues=this.config.enumValues}}function nC(e,t={}){return new nE(e,t)}class nT extends ta{static{this[eC]="PgVarcharBuilder"}constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new nA(e,this.config)}}class nA extends to{static{this[eC]="PgVarchar"}getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}constructor(...e){super(...e),this.length=this.config.length,this.enumValues=this.config.enumValues}}class nx{static{this[eC]="PgSchema"}constructor(e){this.table=(e,t,r)=>eZ(e,t,r,this.schemaName),this.view=(e,t)=>(function(e,t,r){return t?new tU(e,t,r):new tD(e,r)})(e,t,this.schemaName),this.materializedView=(e,t)=>(function(e,t,r){return t?new tj(e,t,r):new t$(e,r)})(e,t,this.schemaName),this.schemaName=e}}let nO=e0("notes",{id:new class extends ta{static{this[eC]="PgSerialBuilder"}constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new nv(e,this.config)}}("id").primaryKey(),name:nC("name").notNull(),createdAt:(function(e,t={}){return"string"===t.mode?new tC(e,t.withTimezone??!1,t.precision):new tE(e,t.withTimezone??!1,t.precision)})("created_at").notNull().defaultNow(),imageUrl:nC("imageUrl"),userId:nC("user_id").notNull(),editorState:nC("editor_state")}),nI="https://api.openai.com/v1".replace(/\/+$/,""),nR="undefined"==typeof fetch?void 0:fetch;class nN{constructor(e,t=nI,r=nR){this.basePath=t,this.fetch=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class nk extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}let nM="https://example.com",nL=function(e,t,r){if(null==r)throw new nk(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},nD=function(e,...t){let r=new URLSearchParams(e.search);!function e(t,r,n=""){null!=r&&("object"==typeof r?Array.isArray(r)?r.forEach(r=>e(t,r,n)):Object.keys(r).forEach(i=>e(t,r[i],`${n}${""!==n?".":""}${i}`)):t.has(n)?t.append(n,r):t.set(n,r))}(r,t),e.search=r.toString()},nU=function(e,t,r){let n="string"!=typeof e,i=n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n;return i?JSON.stringify(void 0!==e?e:{}):e||""},nB=function(e){return e.pathname+e.search+e.hash},n$=function(e,t,r,n){return(i=t,s=r)=>{if(void 0===i)throw Error("You must pass a fetch polyfill if you're running in an environment without a global fetch");let a=e.url;if(n?.defaultQueryParams){let e=-1===a.indexOf("?")?"?":"&";a+=e+n.defaultQueryParams}return i((n?.basePath||s)+a,e.options)}},nj="undefined"==typeof fetch?void 0:fetch,nq=function(e){let t={cancelFineTune:async(t,r={})=>{let n;nL("cancelFineTune","fineTuneId",t);let i="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"POST",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}},createAnswer:async(t,r={})=>{let n;nL("createAnswer","createAnswerRequest",t);let i=new URL("/answers",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createChatCompletion:async(t,r={})=>{let n;nL("createChatCompletion","createChatCompletionRequest",t);let i=new URL("/chat/completions",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createClassification:async(t,r={})=>{let n;nL("createClassification","createClassificationRequest",t);let i=new URL("/classifications",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createCompletion:async(t,r={})=>{let n;nL("createCompletion","createCompletionRequest",t);let i=new URL("/completions",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createEdit:async(t,r={})=>{let n;nL("createEdit","createEditRequest",t);let i=new URL("/edits",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createEmbedding:async(t,r={})=>{let n;nL("createEmbedding","createEmbeddingRequest",t);let i=new URL("/embeddings",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createFile:async(t,r,n={})=>{let i;nL("createFile","file",t),nL("createFile","purpose",r);let s=new URL("/files",nM);e&&(i=e.baseOptions);let a={method:"POST",...i,...n},o={},l=new(e&&e.formDataCtor||FormData);void 0!==t&&l.append("file",t),void 0!==r&&l.append("purpose",r),o["Content-Type"]="multipart/form-data",nD(s,{});let u=i&&i.headers?i.headers:{};return a.headers={...o,...l.getHeaders(),...u,...n.headers},a.body=l,{url:nB(s),options:a}},createFineTune:async(t,r={})=>{let n;nL("createFineTune","createFineTuneRequest",t);let i=new URL("/fine-tunes",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createImage:async(t,r={})=>{let n;nL("createImage","createImageRequest",t);let i=new URL("/images/generations",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createImageEdit:async(t,r,n,i,s,a,o,l={})=>{let u;nL("createImageEdit","image",t),nL("createImageEdit","prompt",r);let c=new URL("/images/edits",nM);e&&(u=e.baseOptions);let h={method:"POST",...u,...l},d={},f=new(e&&e.formDataCtor||FormData);void 0!==t&&f.append("image",t),void 0!==n&&f.append("mask",n),void 0!==r&&f.append("prompt",r),void 0!==i&&f.append("n",i),void 0!==s&&f.append("size",s),void 0!==a&&f.append("response_format",a),void 0!==o&&f.append("user",o),d["Content-Type"]="multipart/form-data",nD(c,{});let p=u&&u.headers?u.headers:{};return h.headers={...d,...f.getHeaders(),...p,...l.headers},h.body=f,{url:nB(c),options:h}},createImageVariation:async(t,r,n,i,s,a={})=>{let o;nL("createImageVariation","image",t);let l=new URL("/images/variations",nM);e&&(o=e.baseOptions);let u={method:"POST",...o,...a},c={},h=new(e&&e.formDataCtor||FormData);void 0!==t&&h.append("image",t),void 0!==r&&h.append("n",r),void 0!==n&&h.append("size",n),void 0!==i&&h.append("response_format",i),void 0!==s&&h.append("user",s),c["Content-Type"]="multipart/form-data",nD(l,{});let d=o&&o.headers?o.headers:{};return u.headers={...c,...h.getHeaders(),...d,...a.headers},u.body=h,{url:nB(l),options:u}},createModeration:async(t,r={})=>{let n;nL("createModeration","createModerationRequest",t);let i=new URL("/moderations",nM);e&&(n=e.baseOptions);let s={method:"POST",...n,...r},a={};a["Content-Type"]="application/json",nD(i,{});let o=n&&n.headers?n.headers:{};return s.headers={...a,...o,...r.headers},s.body=nU(t,s,e),{url:nB(i),options:s}},createSearch:async(t,r,n={})=>{let i;nL("createSearch","engineId",t),nL("createSearch","createSearchRequest",r);let s="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(t))),a=new URL(s,nM);e&&(i=e.baseOptions);let o={method:"POST",...i,...n},l={};l["Content-Type"]="application/json",nD(a,{});let u=i&&i.headers?i.headers:{};return o.headers={...l,...u,...n.headers},o.body=nU(r,o,e),{url:nB(a),options:o}},createTranscription:async(t,r,n,i,s,a,o={})=>{let l;nL("createTranscription","file",t),nL("createTranscription","model",r);let u=new URL("/audio/transcriptions",nM);e&&(l=e.baseOptions);let c={method:"POST",...l,...o},h={},d=new(e&&e.formDataCtor||FormData);void 0!==t&&d.append("file",t),void 0!==r&&d.append("model",r),void 0!==n&&d.append("prompt",n),void 0!==i&&d.append("response_format",i),void 0!==s&&d.append("temperature",s),void 0!==a&&d.append("language",a),h["Content-Type"]="multipart/form-data",nD(u,{});let f=l&&l.headers?l.headers:{};return c.headers={...h,...d.getHeaders(),...f,...o.headers},c.body=d,{url:nB(u),options:c}},createTranslation:async(t,r,n,i,s,a={})=>{let o;nL("createTranslation","file",t),nL("createTranslation","model",r);let l=new URL("/audio/translations",nM);e&&(o=e.baseOptions);let u={method:"POST",...o,...a},c={},h=new(e&&e.formDataCtor||FormData);void 0!==t&&h.append("file",t),void 0!==r&&h.append("model",r),void 0!==n&&h.append("prompt",n),void 0!==i&&h.append("response_format",i),void 0!==s&&h.append("temperature",s),c["Content-Type"]="multipart/form-data",nD(l,{});let d=o&&o.headers?o.headers:{};return u.headers={...c,...h.getHeaders(),...d,...a.headers},u.body=h,{url:nB(l),options:u}},deleteFile:async(t,r={})=>{let n;nL("deleteFile","fileId",t);let i="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"DELETE",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}},deleteModel:async(t,r={})=>{let n;nL("deleteModel","model",t);let i="/models/{model}".replace("{model}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"DELETE",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}},downloadFile:async(t,r={})=>{let n;nL("downloadFile","fileId",t);let i="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"GET",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}},listEngines:async(t={})=>{let r;let n=new URL("/engines",nM);e&&(r=e.baseOptions);let i={method:"GET",...r,...t};nD(n,{});let s=r&&r.headers?r.headers:{};return i.headers={...s,...t.headers},{url:nB(n),options:i}},listFiles:async(t={})=>{let r;let n=new URL("/files",nM);e&&(r=e.baseOptions);let i={method:"GET",...r,...t};nD(n,{});let s=r&&r.headers?r.headers:{};return i.headers={...s,...t.headers},{url:nB(n),options:i}},listFineTuneEvents:async(t,r,n={})=>{let i;nL("listFineTuneEvents","fineTuneId",t);let s="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(t))),a=new URL(s,nM);e&&(i=e.baseOptions);let o={method:"GET",...i,...n},l={};void 0!==r&&(l.stream=r),nD(a,l);let u=i&&i.headers?i.headers:{};return o.headers={...u,...n.headers},{url:nB(a),options:o}},listFineTunes:async(t={})=>{let r;let n=new URL("/fine-tunes",nM);e&&(r=e.baseOptions);let i={method:"GET",...r,...t};nD(n,{});let s=r&&r.headers?r.headers:{};return i.headers={...s,...t.headers},{url:nB(n),options:i}},listModels:async(t={})=>{let r;let n=new URL("/models",nM);e&&(r=e.baseOptions);let i={method:"GET",...r,...t};nD(n,{});let s=r&&r.headers?r.headers:{};return i.headers={...s,...t.headers},{url:nB(n),options:i}},retrieveEngine:async(t,r={})=>{let n;nL("retrieveEngine","engineId",t);let i="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"GET",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}},retrieveFile:async(t,r={})=>{let n;nL("retrieveFile","fileId",t);let i="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"GET",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}},retrieveFineTune:async(t,r={})=>{let n;nL("retrieveFineTune","fineTuneId",t);let i="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"GET",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}},retrieveModel:async(t,r={})=>{let n;nL("retrieveModel","model",t);let i="/models/{model}".replace("{model}",encodeURIComponent(String(t))),s=new URL(i,nM);e&&(n=e.baseOptions);let a={method:"GET",...n,...r};nD(s,{});let o=n&&n.headers?n.headers:{};return a.headers={...o,...r.headers},{url:nB(s),options:a}}};return{async cancelFineTune(r,n){let i=await t.cancelFineTune(r,n);return n$(i,nj,nI,e)},async createAnswer(r,n){let i=await t.createAnswer(r,n);return n$(i,nj,nI,e)},async createChatCompletion(r,n){let i=await t.createChatCompletion(r,n);return n$(i,nj,nI,e)},async createClassification(r,n){let i=await t.createClassification(r,n);return n$(i,nj,nI,e)},async createCompletion(r,n){let i=await t.createCompletion(r,n);return n$(i,nj,nI,e)},async createEdit(r,n){let i=await t.createEdit(r,n);return n$(i,nj,nI,e)},async createEmbedding(r,n){let i=await t.createEmbedding(r,n);return n$(i,nj,nI,e)},async createFile(r,n,i){let s=await t.createFile(r,n,i);return n$(s,nj,nI,e)},async createFineTune(r,n){let i=await t.createFineTune(r,n);return n$(i,nj,nI,e)},async createImage(r,n){let i=await t.createImage(r,n);return n$(i,nj,nI,e)},async createImageEdit(r,n,i,s,a,o,l,u){let c=await t.createImageEdit(r,n,i,s,a,o,l,u);return n$(c,nj,nI,e)},async createImageVariation(r,n,i,s,a,o){let l=await t.createImageVariation(r,n,i,s,a,o);return n$(l,nj,nI,e)},async createModeration(r,n){let i=await t.createModeration(r,n);return n$(i,nj,nI,e)},async createSearch(r,n,i){let s=await t.createSearch(r,n,i);return n$(s,nj,nI,e)},async createTranscription(r,n,i,s,a,o,l){let u=await t.createTranscription(r,n,i,s,a,o,l);return n$(u,nj,nI,e)},async createTranslation(r,n,i,s,a,o){let l=await t.createTranslation(r,n,i,s,a,o);return n$(l,nj,nI,e)},async deleteFile(r,n){let i=await t.deleteFile(r,n);return n$(i,nj,nI,e)},async deleteModel(r,n){let i=await t.deleteModel(r,n);return n$(i,nj,nI,e)},async downloadFile(r,n){let i=await t.downloadFile(r,n);return n$(i,nj,nI,e)},async listEngines(r){let n=await t.listEngines(r);return n$(n,nj,nI,e)},async listFiles(r){let n=await t.listFiles(r);return n$(n,nj,nI,e)},async listFineTuneEvents(r,n,i){let s=await t.listFineTuneEvents(r,n,i);return n$(s,nj,nI,e)},async listFineTunes(r){let n=await t.listFineTunes(r);return n$(n,nj,nI,e)},async listModels(r){let n=await t.listModels(r);return n$(n,nj,nI,e)},async retrieveEngine(r,n){let i=await t.retrieveEngine(r,n);return n$(i,nj,nI,e)},async retrieveFile(r,n){let i=await t.retrieveFile(r,n);return n$(i,nj,nI,e)},async retrieveFineTune(r,n){let i=await t.retrieveFineTune(r,n);return n$(i,nj,nI,e)},async retrieveModel(r,n){let i=await t.retrieveModel(r,n);return n$(i,nj,nI,e)}}};class nF extends FormData{constructor(...e){super(...e),this._boundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);return e}()}getHeaders(){return{"content-type":"multipart/form-data; boundary="+this._boundary}}}let nQ=new class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.defaultQueryParams=e.defaultQueryParams,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers={Authorization:`Bearer ${this.apiKey}`,...this.baseOptions.headers},this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=nF)}isJsonMime(e){let t=RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}}({apiKey:process.env.OPENAI_API_KEY}),nz=new class extends nN{cancelFineTune(e,t){return nq(this.configuration).cancelFineTune(e,t).then(e=>e(this.fetch,this.basePath))}createAnswer(e,t){return nq(this.configuration).createAnswer(e,t).then(e=>e(this.fetch,this.basePath))}createChatCompletion(e,t){return nq(this.configuration).createChatCompletion(e,t).then(e=>e(this.fetch,this.basePath))}createClassification(e,t){return nq(this.configuration).createClassification(e,t).then(e=>e(this.fetch,this.basePath))}createCompletion(e,t){return nq(this.configuration).createCompletion(e,t).then(e=>e(this.fetch,this.basePath))}createEdit(e,t){return nq(this.configuration).createEdit(e,t).then(e=>e(this.fetch,this.basePath))}createEmbedding(e,t){return nq(this.configuration).createEmbedding(e,t).then(e=>e(this.fetch,this.basePath))}createFile(e,t,r){return nq(this.configuration).createFile(e,t,r).then(e=>e(this.fetch,this.basePath))}createFineTune(e,t){return nq(this.configuration).createFineTune(e,t).then(e=>e(this.fetch,this.basePath))}createImage(e,t){return nq(this.configuration).createImage(e,t).then(e=>e(this.fetch,this.basePath))}createImageEdit(e,t,r,n,i,s,a,o){return nq(this.configuration).createImageEdit(e,t,r,n,i,s,a,o).then(e=>e(this.fetch,this.basePath))}createImageVariation(e,t,r,n,i,s){return nq(this.configuration).createImageVariation(e,t,r,n,i,s).then(e=>e(this.fetch,this.basePath))}createModeration(e,t){return nq(this.configuration).createModeration(e,t).then(e=>e(this.fetch,this.basePath))}createSearch(e,t,r){return nq(this.configuration).createSearch(e,t,r).then(e=>e(this.fetch,this.basePath))}createTranscription(e,t,r,n,i,s,a){return nq(this.configuration).createTranscription(e,t,r,n,i,s,a).then(e=>e(this.fetch,this.basePath))}createTranslation(e,t,r,n,i,s){return nq(this.configuration).createTranslation(e,t,r,n,i,s).then(e=>e(this.fetch,this.basePath))}deleteFile(e,t){return nq(this.configuration).deleteFile(e,t).then(e=>e(this.fetch,this.basePath))}deleteModel(e,t){return nq(this.configuration).deleteModel(e,t).then(e=>e(this.fetch,this.basePath))}downloadFile(e,t){return nq(this.configuration).downloadFile(e,t).then(e=>e(this.fetch,this.basePath))}listEngines(e){return nq(this.configuration).listEngines(e).then(e=>e(this.fetch,this.basePath))}listFiles(e){return nq(this.configuration).listFiles(e).then(e=>e(this.fetch,this.basePath))}listFineTuneEvents(e,t,r){return nq(this.configuration).listFineTuneEvents(e,t,r).then(e=>e(this.fetch,this.basePath))}listFineTunes(e){return nq(this.configuration).listFineTunes(e).then(e=>e(this.fetch,this.basePath))}listModels(e){return nq(this.configuration).listModels(e).then(e=>e(this.fetch,this.basePath))}retrieveEngine(e,t){return nq(this.configuration).retrieveEngine(e,t).then(e=>e(this.fetch,this.basePath))}retrieveFile(e,t){return nq(this.configuration).retrieveFile(e,t).then(e=>e(this.fetch,this.basePath))}retrieveFineTune(e,t){return nq(this.configuration).retrieveFineTune(e,t).then(e=>e(this.fetch,this.basePath))}retrieveModel(e,t){return nq(this.configuration).retrieveModel(e,t).then(e=>e(this.fetch,this.basePath))}}(nQ);async function nH(e){try{let t=await nz.createChatCompletion({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are an creative and helpful AI assistance capable of generating interesting thumbnail descriptions for my notes. Your output will be fed into the DALLE API to generate a thumbnail. The description should be minimalistic and flat styled"},{role:"user",content:`Please generate a thumbnail description for my notebook titles ${e}`}]}),r=await t.json(),n=r.choices[0].message.content;return n}catch(e){throw console.log(e),e}}async function nV(e){try{let t=await nz.createImage({prompt:e,n:1,size:"256x256"}),r=await t.json(),n=r.data[0].url;return n}catch(e){console.error(e)}}r(6544);var nK=r(718);let nG=(0,nK.D)(String.raw`/Users/tiennguyen/Documents/Coding/AI-NOTE/node_modules/@clerk/nextjs/dist/esm/app-router/client/ClerkProvider.js`),{__esModule:nW,$$typeof:nJ}=nG;nG.default,nG.ClientClerkProvider;var nY=()=>!1,nX=()=>{try{return!0}catch(e){}return!1},nZ=new Set,n0=(e,t,r)=>{let n=nY()||nX(),i=null!=r?r:e;nZ.has(i)||n||(nZ.add(i),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${t}`))},n1=(e,t,r,n=!1)=>{let i=n?e:e.prototype,s=i[t];Object.defineProperty(i,t,{get:()=>(n0(t,r,`${e.name}:${t}`),s),set(e){s=e}})},n2=(e,t,r,n)=>{let i=e[t];Object.defineProperty(e,t,{get:()=>(n0(t,r,n),i),set(e){i=e}})},n6=(Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.prototype.hasOwnProperty,(e,t)=>!t&&function(e){return e.endsWith(".lclstage.dev")||e.endsWith(".stgstage.dev")||e.endsWith(".clerkstage.dev")||e.endsWith(".accountsstage.dev")}(e)?"canary":t&&t.split(".")[0]||"latest"),n3=(e,{pkgVersion:t="4.71.2",clerkJSVersion:r})=>{let n=e.replace(/http(s)?:\/\//,""),i=n6(e,t);return`https://${n}/npm/@clerk/clerk-js@${r||i}/dist/clerk.browser.js`};async function n4(e,t=1,r=5){try{return await e()}catch(i){var n;if(t>=r)throw i;return await (n=2**t*100,new Promise(e=>setTimeout(e,n))),n4(e,t+1,r)}}var n5=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,n8="pk_live_";function n7(e){if(!function(e){e=e||"";let t=e.startsWith(n8)||e.startsWith("pk_test_"),r=n5(e.split("_")[2]||"").endsWith("$");return t&&r}(e=e||""))return null;let t=e.startsWith(n8)?"production":"development",r=n5(e.split("_")[2]);return r.endsWith("$")?{instanceType:t,frontendApi:r=r.slice(0,-1)}:null}function n9(e){return e.startsWith("test_")||e.startsWith("sk_test_")}function ie(e){var t,r,n,i,s;return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:null==(t=null==e?void 0:e.meta)?void 0:t.param_name,sessionId:null==(r=null==e?void 0:e.meta)?void 0:r.session_id,emailAddresses:null==(n=null==e?void 0:e.meta)?void 0:n.email_addresses,identifiers:null==(i=null==e?void 0:e.meta)?void 0:i.identifiers,zxcvbn:null==(s=null==e?void 0:e.meta)?void 0:s.zxcvbn}}}var it=class e extends Error{constructor(t,{data:r,status:n,clerkTraceId:i}){super(t),this.toString=()=>{let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(e=>JSON.stringify(e))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e},Object.setPrototypeOf(this,e.prototype),this.status=n,this.message=t,this.clerkTraceId=i,this.clerkError=!0,this.errors=function(e=[]){return e.length>0?e.map(ie):[]}(r)}};new Proxy({Expired:"expired",Failed:"failed"},{get:(e,t,r)=>(n0("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(e,t,r))});var ir=Object.freeze({InvalidFrontendApiErrorMessage:"The frontendApi passed to Clerk is invalid. You can get your Frontend API key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys."});let ii=crypto,is=Blob,ia=FormData,io=Headers,il=Request,iu=Response,ic=AbortController,ih=fetch;var id=r(7806),ip=r.n(id),ig=r(3632),im=r.n(ig),iy=r(7489),iv=class{constructor(e){this.request=e}requireId(e){if(!e)throw Error("A valid resource ID is required.")}},ib=RegExp("(?<!:)/{1,}","g");function iw(...e){return e.filter(e=>e).join("/").replace(ib,"/")}var iS="/allowlist_identifiers",i_=class extends iv{async getAllowlistIdentifierList(){return this.request({method:"GET",path:iS})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:iS,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:iw(iS,e)})}},iE="/clients",iP=class extends iv{async getClientList(){return this.request({method:"GET",path:iE})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:iw(iE,e)})}verifyClient(e){return this.request({method:"POST",path:iw(iE,"verify"),bodyParams:{token:e}})}},iC=class extends iv{async deleteDomain(e){return this.request({method:"DELETE",path:iw("/domains",e)})}},iT="/email_addresses",iA=class extends iv{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:iw(iT,e)})}async createEmailAddress(e){return this.request({method:"POST",path:iT,bodyParams:e})}async updateEmailAddress(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:iw(iT,e),bodyParams:t})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:iw(iT,e)})}},ix=class extends iv{async createEmail(e){return n0("EmailAPI.createEmail","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/emails",bodyParams:e})}},iO=function({packageName:e,customMessages:t}){let r=e,n={...ir,...t};function i(e,t){if(!t)return`${r}: ${e}`;let n=e,i=e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(let e of i){let r=(t[e[1]]||"").toString();n=n.replace(`{{${e[1]}}}`,r)}return`${r}: ${n}`}return{setPackageName({packageName:e}){return"string"==typeof e&&(r=e),this},setMessages({customMessages:e}){return Object.assign(n,e||{}),this},throwInvalidPublishableKeyError(e){throw Error(i(n.InvalidPublishableKeyErrorMessage,e))},throwInvalidFrontendApiError(e){throw Error(i(n.InvalidFrontendApiErrorMessage,e))},throwInvalidProxyUrl(e){throw Error(i(n.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw Error(i(n.MissingPublishableKeyErrorMessage))}}}({packageName:"@clerk/backend"}),{isDevOrStagingUrl:iI}=function(){let e=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],t=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;let n="string"==typeof r?r:r.hostname,i=t.get(n);return void 0===i&&(i=e.some(e=>n.endsWith(e)),t.set(n,i)),i}}}(),iR=class extends iv{async getInterstitial(){return n0("getInterstitial()",'Switch to `Clerk(...).localInterstitial(...)` from `import { Clerk } from "@clerk/backend"`.'),this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}},iN="/invitations",ik=class extends iv{async getInvitationList(e={}){return this.request({method:"GET",path:iN,queryParams:e})}async createInvitation(e){return this.request({method:"POST",path:iN,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:iw(iN,e,"revoke")})}},{RuntimeFetch:iM,RuntimeAbortController:iL,RuntimeBlob:iD,RuntimeFormData:iU,RuntimeHeaders:iB,RuntimeRequest:i$,RuntimeResponse:ij}=c,iq={crypto:ii,fetch:iM.bind(globalThis),AbortController:iL,Blob:iD,FormData:iU,Headers:iB,Request:i$,Response:ij},iF="/organizations",iQ=class extends iv{async getOrganizationList(e){return this.request({method:"GET",path:iF,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:iF,bodyParams:e})}async getOrganization(e){let t="organizationId"in e?e.organizationId:e.slug;return this.requireId(t),this.request({method:"GET",path:iw(iF,t)})}async updateOrganization(e,t){return this.requireId(e),this.request({method:"PATCH",path:iw(iF,e),bodyParams:t})}async updateOrganizationLogo(e,t){this.requireId(e);let r=new iq.FormData;return r.append("file",t?.file),r.append("uploader_user_id",t?.uploaderUserId),this.request({method:"PUT",path:iw(iF,e,"logo"),formData:r})}async deleteOrganizationLogo(e){return this.requireId(e),this.request({method:"DELETE",path:iw(iF,e,"logo")})}async updateOrganizationMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:iw(iF,e,"metadata"),bodyParams:t})}async deleteOrganization(e){return this.request({method:"DELETE",path:iw(iF,e)})}async getOrganizationMembershipList(e){let{organizationId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:iw(iF,t,"memberships"),queryParams:{limit:r,offset:n}})}async createOrganizationMembership(e){let{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"POST",path:iw(iF,t,"memberships"),bodyParams:{userId:r,role:n}})}async updateOrganizationMembership(e){let{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"PATCH",path:iw(iF,t,"memberships",r),bodyParams:{role:n}})}async updateOrganizationMembershipMetadata(e){let{organizationId:t,userId:r,publicMetadata:n,privateMetadata:i}=e;return this.request({method:"PATCH",path:iw(iF,t,"memberships",r,"metadata"),bodyParams:{publicMetadata:n,privateMetadata:i}})}async deleteOrganizationMembership(e){let{organizationId:t,userId:r}=e;return this.requireId(t),this.request({method:"DELETE",path:iw(iF,t,"memberships",r)})}async getOrganizationInvitationList(e){let{organizationId:t,status:r,limit:n,offset:i}=e;return this.requireId(t),this.request({method:"GET",path:iw(iF,t,"invitations"),queryParams:{status:r,limit:n,offset:i}})}async getPendingOrganizationInvitationList(e){n0("getPendingOrganizationInvitationList","Use `getOrganizationInvitationList` instead.");let{organizationId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:iw(iF,t,"invitations","pending"),queryParams:{limit:r,offset:n}})}async createOrganizationInvitation(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"POST",path:iw(iF,t,"invitations"),bodyParams:{...r}})}async getOrganizationInvitation(e){let{organizationId:t,invitationId:r}=e;return this.requireId(t),this.requireId(r),this.request({method:"GET",path:iw(iF,t,"invitations",r)})}async revokeOrganizationInvitation(e){let{organizationId:t,invitationId:r,requestingUserId:n}=e;return this.requireId(t),this.request({method:"POST",path:iw(iF,t,"invitations",r,"revoke"),bodyParams:{requestingUserId:n}})}},iz="/phone_numbers",iH=class extends iv{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:iw(iz,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:iz,bodyParams:e})}async updatePhoneNumber(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:iw(iz,e),bodyParams:t})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:iw(iz,e)})}},iV="/redirect_urls",iK=class extends iv{async getRedirectUrlList(){return this.request({method:"GET",path:iV})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:iw(iV,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:iV,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:iw(iV,e)})}},iG="/sessions",iW=class extends iv{async getSessionList(e){return this.request({method:"GET",path:iG,queryParams:e})}async getSession(e){return this.requireId(e),this.request({method:"GET",path:iw(iG,e)})}async revokeSession(e){return this.requireId(e),this.request({method:"POST",path:iw(iG,e,"revoke")})}async verifySession(e,t){return this.requireId(e),this.request({method:"POST",path:iw(iG,e,"verify"),bodyParams:{token:t}})}async getToken(e,t){return this.requireId(e),(await this.request({method:"POST",path:iw(iG,e,"tokens",t||"")})).jwt}},iJ="/sign_in_tokens",iY=class extends iv{async createSignInToken(e){return this.request({method:"POST",path:iJ,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:iw(iJ,e,"revoke")})}},iX=class extends iv{async createSMSMessage(e){return n0("SMSMessageAPI.createSMSMessage","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/sms_messages",bodyParams:e})}},iZ="/users",i0=class extends iv{async getUserList(e={}){return this.request({method:"GET",path:iZ,queryParams:e})}async getUser(e){return this.requireId(e),this.request({method:"GET",path:iw(iZ,e)})}async createUser(e){return this.request({method:"POST",path:iZ,bodyParams:e})}async updateUser(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:iw(iZ,e),bodyParams:t})}async updateUserProfileImage(e,t){this.requireId(e);let r=new iq.FormData;return r.append("file",t?.file),this.request({method:"POST",path:iw(iZ,e,"profile_image"),formData:r})}async updateUserMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:iw(iZ,e,"metadata"),bodyParams:t})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:iw(iZ,e)})}async getCount(e={}){return this.request({method:"GET",path:iw(iZ,"count"),queryParams:e})}async getUserOauthAccessToken(e,t){return this.requireId(e),this.request({method:"GET",path:iw(iZ,e,"oauth_access_tokens",t)})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:iw(iZ,e,"mfa")})}async getOrganizationMembershipList(e){let{userId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:iw(iZ,t,"organization_memberships"),queryParams:{limit:r,offset:n}})}async verifyPassword(e){let{userId:t,password:r}=e;return this.requireId(t),this.request({method:"POST",path:iw(iZ,t,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(e){let{userId:t,code:r}=e;return this.requireId(t),this.request({method:"POST",path:iw(iZ,t,"verify_totp"),bodyParams:{code:r}})}},i1="https://api.clerk.dev",i2="@clerk/backend@0.38.10",i6={AuthToken:"x-clerk-auth-token",AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",CloudFrontForwardedProto:"cloudfront-forwarded-proto",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},i3=(i6.AuthStatus,i6.AuthToken,{Attributes:{AuthToken:"__clerkAuthToken",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},Cookies:{Session:"__session",ClientUat:"__client_uat"},Headers:i6,ContentTypes:{Json:"application/json"}});function i4(e){if(!e||"string"!=typeof e)throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var i5=class e{constructor(e,t,r,n,i){this.id=e,this.identifier=t,this.createdAt=r,this.updatedAt=n,this.invitationId=i}static fromJSON(t){return new e(t.id,t.identifier,t.created_at,t.updated_at,t.invitation_id)}},i8=class e{constructor(e,t,r,n,i,s,a,o,l){this.id=e,this.clientId=t,this.userId=r,this.status=n,this.lastActiveAt=i,this.expireAt=s,this.abandonAt=a,this.createdAt=o,this.updatedAt=l}static fromJSON(t){return new e(t.id,t.client_id,t.user_id,t.status,t.last_active_at,t.expire_at,t.abandon_at,t.created_at,t.updated_at)}},i7=class e{constructor(e,t,r,n,i,s,a,o){this.id=e,this.sessionIds=t,this.sessions=r,this.signInId=n,this.signUpId=i,this.lastActiveSessionId=s,this.createdAt=a,this.updatedAt=o}static fromJSON(t){return new e(t.id,t.session_ids,t.sessions.map(e=>i8.fromJSON(e)),t.sign_in_id,t.sign_up_id,t.last_active_session_id,t.created_at,t.updated_at)}},i9=class e{constructor(e,t,r,n){this.object=e,this.id=t,this.slug=r,this.deleted=n}static fromJSON(t){return new e(t.object,t.id||null,t.slug||null,t.deleted)}},se=class e{constructor(e,t,r,n,i,s,a,o,l,u,c){this.id=e,this.fromEmailName=t,this.emailAddressId=r,this.toEmailAddress=n,this.subject=i,this.body=s,this.bodyPlain=a,this.status=o,this.slug=l,this.data=u,this.deliveredByClerk=c}static fromJSON(t){return new e(t.id,t.from_email_name,t.email_address_id,t.to_email_address,t.subject,t.body,t.body_plain,t.status,t.slug,t.data,t.delivered_by_clerk)}},st=class e{constructor(e,t){this.id=e,this.type=t}static fromJSON(t){return new e(t.id,t.type)}},sr=class e{constructor(e,t,r=null,n=null,i=null,s=null){this.status=e,this.strategy=t,this.externalVerificationRedirectURL=r,this.attempts=n,this.expireAt=i,this.nonce=s}static fromJSON(t){return new e(t.status,t.strategy,t.external_verification_redirect_url?new URL(t.external_verification_redirect_url):null,t.attempts,t.expire_at,t.nonce)}},sn=class e{constructor(e,t,r,n){this.id=e,this.emailAddress=t,this.verification=r,this.linkedTo=n}static fromJSON(t){return new e(t.id,t.email_address,t.verification&&sr.fromJSON(t.verification),t.linked_to.map(e=>st.fromJSON(e)))}},si=class e{constructor(e,t,r,n,i,s,a,o,l,u,c,h={},d,f){this.id=e,this.provider=t,this.identificationId=r,this.externalId=n,this.approvedScopes=i,this.emailAddress=s,this.firstName=a,this.lastName=o,this.picture=l,this.imageUrl=u,this.username=c,this.publicMetadata=h,this.label=d,this.verification=f}static fromJSON(t){return new e(t.id,t.provider,t.identification_id,t.provider_user_id,t.approved_scopes,t.email_address,t.first_name,t.last_name,t.avatar_url,t.image_url,t.username,t.public_metadata,t.label,t.verification&&sr.fromJSON(t.verification))}};n1(si,"picture","Use `imageUrl` instead.");var ss=class e{constructor(e,t,r,n,i,s,a){this.id=e,this.emailAddress=t,this.publicMetadata=r,this.createdAt=n,this.updatedAt=i,this.status=s,this.revoked=a}static fromJSON(t){return new e(t.id,t.email_address,t.public_metadata,t.created_at,t.updated_at,t.status,t.revoked)}},sa=((l=sa||{}).AllowlistIdentifier="allowlist_identifier",l.Client="client",l.Email="email",l.EmailAddress="email_address",l.ExternalAccount="external_account",l.FacebookAccount="facebook_account",l.GoogleAccount="google_account",l.Invitation="invitation",l.OauthAccessToken="oauth_access_token",l.Organization="organization",l.OrganizationInvitation="organization_invitation",l.OrganizationMembership="organization_membership",l.PhoneNumber="phone_number",l.RedirectUrl="redirect_url",l.Session="session",l.SignInAttempt="sign_in_attempt",l.SignInToken="sign_in_token",l.SignUpAttempt="sign_up_attempt",l.SmsMessage="sms_message",l.User="user",l.Web3Wallet="web3_wallet",l.Token="token",l.TotalCount="total_count",l),so=class e{constructor(e,t,r={},n,i,s){this.provider=e,this.token=t,this.publicMetadata=r,this.label=n,this.scopes=i,this.tokenSecret=s}static fromJSON(t){return new e(t.provider,t.token,t.public_metadata,t.label,t.scopes,t.token_secret)}},sl=class e{constructor(e,t,r,n,i,s,a,o,l,u={},c={},h,d,f,p){this.id=e,this.name=t,this.slug=r,this.logoUrl=n,this.imageUrl=i,this.hasImage=s,this.createdBy=a,this.createdAt=o,this.updatedAt=l,this.publicMetadata=u,this.privateMetadata=c,this.maxAllowedMemberships=h,this.adminDeleteEnabled=d,this.members_count=f,this.membersCount=p}static fromJSON(t){return new e(t.id,t.name,t.slug,t.logo_url,t.image_url,t.has_image,t.created_by,t.created_at,t.updated_at,t.public_metadata,t.private_metadata,t.max_allowed_memberships,t.admin_delete_enabled,t.members_count,t.members_count)}};n1(sl,"logoUrl","Use `imageUrl` instead."),n1(sl,"members_count","Use `membersCount` instead.");var su=class e{constructor(e,t,r,n,i,s,a,o={},l={}){this.id=e,this.emailAddress=t,this.role=r,this.organizationId=n,this.createdAt=i,this.updatedAt=s,this.status=a,this.publicMetadata=o,this.privateMetadata=l}static fromJSON(t){return new e(t.id,t.email_address,t.role,t.organization_id,t.created_at,t.updated_at,t.status,t.public_metadata,t.private_metadata)}},sc=class e{constructor(e,t,r={},n={},i,s,a,o){this.id=e,this.role=t,this.publicMetadata=r,this.privateMetadata=n,this.createdAt=i,this.updatedAt=s,this.organization=a,this.publicUserData=o}static fromJSON(t){return new e(t.id,t.role,t.public_metadata,t.private_metadata,t.created_at,t.updated_at,sl.fromJSON(t.organization),sh.fromJSON(t.public_user_data))}},sh=class e{constructor(e,t,r,n,i,s,a){this.identifier=e,this.firstName=t,this.lastName=r,this.profileImageUrl=n,this.imageUrl=i,this.hasImage=s,this.userId=a}static fromJSON(t){return new e(t.identifier,t.first_name,t.last_name,t.profile_image_url,t.image_url,t.has_image,t.user_id)}};n1(sh,"profileImageUrl","Use `imageUrl` instead.");var sd=class e{constructor(e,t,r,n,i,s){this.id=e,this.phoneNumber=t,this.reservedForSecondFactor=r,this.defaultSecondFactor=n,this.verification=i,this.linkedTo=s}static fromJSON(t){return new e(t.id,t.phone_number,t.reserved_for_second_factor,t.default_second_factor,t.verification&&sr.fromJSON(t.verification),t.linked_to.map(e=>st.fromJSON(e)))}},sf=class e{constructor(e,t,r,n){this.id=e,this.url=t,this.createdAt=r,this.updatedAt=n}static fromJSON(t){return new e(t.id,t.url,t.created_at,t.updated_at)}},sp=class e{constructor(e,t,r,n,i,s,a){this.id=e,this.userId=t,this.token=r,this.status=n,this.url=i,this.createdAt=s,this.updatedAt=a}static fromJSON(t){return new e(t.id,t.user_id,t.token,t.status,t.url,t.created_at,t.updated_at)}},sg=class e{constructor(e,t,r,n,i,s,a){this.id=e,this.fromPhoneNumber=t,this.toPhoneNumber=r,this.message=n,this.status=i,this.phoneNumberId=s,this.data=a}static fromJSON(t){return new e(t.id,t.from_phone_number,t.to_phone_number,t.message,t.status,t.phone_number_id,t.data)}},sm=class e{constructor(e){this.jwt=e}static fromJSON(t){return new e(t.jwt)}},sy=class e{constructor(e,t,r){this.id=e,this.web3Wallet=t,this.verification=r}static fromJSON(t){return new e(t.id,t.web3_wallet,t.verification&&sr.fromJSON(t.verification))}},sv=class e{constructor(e,t,r,n,i,s,a,o,l,u,c,h,d,f,p,g,m,y,v,b,w,S={},_={},E={},P=[],C=[],T=[],A=[],x){this.id=e,this.passwordEnabled=t,this.totpEnabled=r,this.backupCodeEnabled=n,this.twoFactorEnabled=i,this.banned=s,this.createdAt=a,this.updatedAt=o,this.profileImageUrl=l,this.imageUrl=u,this.hasImage=c,this.gender=h,this.birthday=d,this.primaryEmailAddressId=f,this.primaryPhoneNumberId=p,this.primaryWeb3WalletId=g,this.lastSignInAt=m,this.externalId=y,this.username=v,this.firstName=b,this.lastName=w,this.publicMetadata=S,this.privateMetadata=_,this.unsafeMetadata=E,this.emailAddresses=P,this.phoneNumbers=C,this.web3Wallets=T,this.externalAccounts=A,this.createOrganizationEnabled=x}static fromJSON(t){return new e(t.id,t.password_enabled,t.totp_enabled,t.backup_code_enabled,t.two_factor_enabled,t.banned,t.created_at,t.updated_at,t.profile_image_url,t.image_url,t.has_image,t.gender,t.birthday,t.primary_email_address_id,t.primary_phone_number_id,t.primary_web3_wallet_id,t.last_sign_in_at,t.external_id,t.username,t.first_name,t.last_name,t.public_metadata,t.private_metadata,t.unsafe_metadata,(t.email_addresses||[]).map(e=>sn.fromJSON(e)),(t.phone_numbers||[]).map(e=>sd.fromJSON(e)),(t.web3_wallets||[]).map(e=>sy.fromJSON(e)),(t.external_accounts||[]).map(e=>si.fromJSON(e)),t.create_organization_enabled)}};function sb(e){if("string"!=typeof e&&"object"in e&&"deleted"in e)return i9.fromJSON(e);switch(e.object){case"allowlist_identifier":return i5.fromJSON(e);case"client":return i7.fromJSON(e);case"email_address":return sn.fromJSON(e);case"email":return se.fromJSON(e);case"invitation":return ss.fromJSON(e);case"oauth_access_token":return so.fromJSON(e);case"organization":return sl.fromJSON(e);case"organization_invitation":return su.fromJSON(e);case"organization_membership":return sc.fromJSON(e);case"phone_number":return sd.fromJSON(e);case"redirect_url":return sf.fromJSON(e);case"sign_in_token":return sp.fromJSON(e);case"session":return i8.fromJSON(e);case"sms_message":return sg.fromJSON(e);case"token":return sm.fromJSON(e);case"total_count":return e.total_count;case"user":return sv.fromJSON(e);default:return e}}n1(sv,"profileImageUrl","Use `imageUrl` instead.");var sw=e=>async(...t)=>{let r=await e(...t);if(null===r.errors)return r.data;{let{errors:e,clerkTraceId:t}=r,{status:n,statusText:i}=r,s=new it(i||"",{data:[],status:n||"",clerkTraceId:t});throw s.errors=e,s}};function sS(e,t){if(e&&"object"==typeof e&&"clerk_trace_id"in e&&"string"==typeof e.clerk_trace_id)return e.clerk_trace_id;let r=t?.get("cf-ray");return r||""}function s_(e){return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:e?.meta?.param_name,sessionId:e?.meta?.session_id}}}function sE(e){let t=function(e){let t=async t=>{let r;let{apiKey:n,secretKey:i,httpOptions:s,apiUrl:a=i1,apiVersion:o="v1",userAgent:l=i2}=e;n&&n0("apiKey","Use `secretKey` instead."),s&&n0("httpOptions","This option has been deprecated and will be removed with the next major release.\nA RequestInit init object used by the `request` method.");let{path:u,method:c,queryParams:h,headerParams:d,bodyParams:f,formData:p}=t,g=i||n;i4(g);let m=iw(a,o,u),y=new URL(m);if(h){let e=im()({...h});for(let[t,r]of Object.entries(e))r&&[r].flat().forEach(e=>y.searchParams.append(t,e))}let v={Authorization:`Bearer ${g}`,"User-Agent":l,...d};try{if(p)r=await iq.fetch(y.href,{...s,method:c,headers:v,body:p});else{v["Content-Type"]="application/json";let e="GET"!==c&&f&&Object.keys(f).length>0,t=e?{body:JSON.stringify(im()(f,{deep:!1}))}:null;r=await iq.fetch(y.href,ip()(s||{},{method:c,headers:v,...t}))}let e=r?.headers&&r.headers?.get(i3.Headers.ContentType)===i3.ContentTypes.Json,t=await (e?r.json():r.text());if(!r.ok)throw t;return{data:Array.isArray(t)?t.map(e=>sb(e)):Array.isArray(t.data)&&void 0!==t.data?t.data.map(e=>sb(e)):sb(t),errors:null}}catch(e){if(e instanceof Error)return{data:null,errors:[{code:"unexpected_error",message:e.message||"Unexpected error"}],clerkTraceId:sS(e,r?.headers)};return{data:null,errors:function(e){if(e&&"object"==typeof e&&"errors"in e){let t=e.errors;return t.length>0?t.map(s_):[]}return[]}(e),status:r?.status,statusText:r?.statusText,clerkTraceId:sS(e,r?.headers)}}};return sw(t)}(e);return{allowlistIdentifiers:new i_(t),clients:new iP(t),emailAddresses:new iA(t),emails:new ix(t),interstitial:new iR(t),invitations:new ik(t),organizations:new iQ(t),phoneNumbers:new iH(t),redirectUrls:new iK(t),sessions:new iW(t),signInTokens:new iY(t),smsMessages:new iX(t),users:new i0(t),domains:new iC(t)}}var sP=e=>()=>{let t={...e};return t.apiKey=(t.apiKey||"").substring(0,7),t.secretKey=(t.secretKey||"").substring(0,7),t.jwtKey=(t.jwtKey||"").substring(0,7),{...t}};function sC(e,t,r){let{act:n,sid:i,org_id:s,org_role:a,org_slug:o,org_permissions:l,sub:u}=e,{apiKey:c,secretKey:h,apiUrl:d,apiVersion:f,token:p,session:g,user:m,organization:y}=t;c&&n0("apiKey","Use `secretKey` instead.");let{sessions:v}=sE({apiKey:c,secretKey:h,apiUrl:d,apiVersion:f}),b=sO({sessionId:i,sessionToken:p,fetcher:(...e)=>v.getToken(...e)});return{actor:n,sessionClaims:e,sessionId:i,session:g,userId:u,user:m,orgId:s,orgRole:a,orgSlug:o,orgPermissions:l,organization:y,getToken:b,has:sI({orgId:s,orgRole:a,orgPermissions:l,userId:u}),debug:sP({...t,...r})}}function sT(e){return e?.apiKey&&n0("apiKey","Use `secretKey` instead."),{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,organization:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:sP(e)}}function sA(e){return e&&(delete e.privateMetadata,delete e.private_metadata),e}var sx=e=>{let{debug:t,getToken:r,has:n,...i}=e;return i},sO=e=>{let{fetcher:t,sessionToken:r,sessionId:n}=e||{};return async(e={})=>n?e.template?t(n,e.template):r:null},sI=({orgId:e,orgRole:t,userId:r,orgPermissions:n})=>i=>{if(!i?.permission&&!i?.role)throw Error('Missing parameters. `has` from `auth` or `getAuth` requires a permission or role key to be passed. Example usage: `has({permission: "org:posts:edit"`');return!!e&&!!r&&!!t&&!!n&&(i.permission?n.includes(i.permission):!!i.role&&t===i.role)},sR=class e extends Error{constructor({action:t,message:r,reason:n}){super(r),Object.setPrototypeOf(this,e.prototype),this.reason=n,this.message=r,this.action=t}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};async function sN(e){e.frontendApi&&n0("frontendApi","Use `publishableKey` instead."),e.pkgVersion&&n0("pkgVersion","Use `clerkJSVersion` instead."),e.frontendApi=n7(e.publishableKey)?.frontendApi||e.frontendApi||"";let t=sk(e),r=await n4(()=>iq.fetch(sk(e),{method:"GET",headers:{"Clerk-Backend-SDK":e.userAgent||i2}}));if(!r.ok)throw new sR({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${t} with code=${r.status}`,reason:"interstitial-remote-failed-to-load"});return r.text()}function sk(e){e.frontendApi&&n0("frontendApi","Use `publishableKey` instead."),e.frontendApi=n7(e.publishableKey)?.frontendApi||e.frontendApi||"";let{apiUrl:t,frontendApi:r,pkgVersion:n,clerkJSVersion:i,publishableKey:s,proxyUrl:a,isSatellite:o,domain:l,signInUrl:u}=e,c=new URL(t);return c.pathname=iw(c.pathname,"v1","/public/interstitial"),c.searchParams.append("clerk_js_version",i||n6(r,n)),s?c.searchParams.append("publishable_key",s):c.searchParams.append("frontend_api",r),a&&c.searchParams.append("proxy_url",a),o&&c.searchParams.append("is_satellite","true"),c.searchParams.append("sign_in_url",u||""),iI(e.frontendApi)||c.searchParams.append("use_domain_for_script","true"),l&&c.searchParams.append("domain",l),c.href}var sM=e=>e?.split(",")[0],sL=({protocol:e,forwardedProto:t,forwardedHost:r,host:n})=>{let i=sM(r)??n,s=sM(t)??e?.replace(/[:/]/,"");return i&&s?`${s}://${i}`:""},sD=e=>{if(!e)return{};let t=sB(e),r=s$(e),n=sj(e);return{cookies:t,headers:r,searchParams:n}},sU=e=>e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e,sB=e=>{let t=e.headers&&e.headers?.get("cookie")?(0,iy.Q)(e.headers.get("cookie")):{};return e=>{let r=t?.[e];if(void 0!==r)return sU(r)}},s$=e=>t=>e?.headers?.get(t)||void 0,sj=e=>e?.url?new URL(e.url)?.searchParams:void 0,sq=e=>e?.replace("Bearer ",""),sF=((u=sF||{}).SignedIn="signed-in",u.SignedOut="signed-out",u.Interstitial="interstitial",u.Unknown="unknown",u);async function sQ(e,t){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,cookieToken:a,frontendApi:o,proxyUrl:l,publishableKey:u,domain:c,isSatellite:h,headerToken:d,loadSession:f,loadUser:p,loadOrganization:g,signInUrl:m,signUpUrl:y,afterSignInUrl:v,afterSignUpUrl:b,token:w}=e,{sid:S,org_id:_,sub:E}=t,{sessions:P,users:C,organizations:T}=sE({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s}),[A,x,O]=await Promise.all([f?P.getSession(S):Promise.resolve(void 0),p?C.getUser(E):Promise.resolve(void 0),g&&_?T.getOrganization({organizationId:_}):Promise.resolve(void 0)]),I=sC(t,{secretKey:n,apiKey:r,apiUrl:i,apiVersion:s,token:a||d||"",session:A,user:x,organization:O},{...e,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:o,proxyUrl:l,publishableKey:u,domain:c,isSatellite:h,signInUrl:m,signUpUrl:y,afterSignInUrl:v,afterSignUpUrl:b,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>I,token:w}}function sz(e,t,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:o,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h}=e;return{status:"signed-out",reason:t,message:r,frontendApi:n,proxyUrl:s,publishableKey:i,isSatellite:a,domain:o,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>sT({...e,status:"signed-out",reason:t,message:r}),token:null}}function sH(e,t,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:o,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h}=e;return{status:"interstitial",reason:t,message:r,frontendApi:n,publishableKey:i,isSatellite:a,domain:o,proxyUrl:s,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null,token:null}}function sV({originURL:e,host:t,forwardedHost:r,forwardedProto:n}){let i=sL({forwardedProto:n,forwardedHost:r,protocol:e.protocol,host:t});return i&&new URL(i).origin!==e.origin}var sK=(e,t)=>e?e.find(e=>e.code===t):null,sG={parse:(e,t)=>(function(e,t,r={}){if(!t.codes){t.codes={};for(let e=0;e<t.chars.length;++e)t.codes[t.chars[e]]=e}if(!r.loose&&e.length*t.bits&7)throw SyntaxError("Invalid padding");let n=e.length;for(;"="===e[n-1];)if(--n,!r.loose&&!((e.length-n)*t.bits&7))throw SyntaxError("Invalid padding");let i=new(r.out??Uint8Array)(n*t.bits/8|0),s=0,a=0,o=0;for(let r=0;r<n;++r){let n=t.codes[e[r]];if(void 0===n)throw SyntaxError("Invalid character "+e[r]);a=a<<t.bits|n,(s+=t.bits)>=8&&(s-=8,i[o++]=255&a>>s)}if(s>=t.bits||255&a<<8-s)throw SyntaxError("Unexpected end of data");return i})(e,sW,t),stringify:(e,t)=>(function(e,t,r={}){let{pad:n=!0}=r,i=(1<<t.bits)-1,s="",a=0,o=0;for(let r=0;r<e.length;++r)for(o=o<<8|255&e[r],a+=8;a>t.bits;)a-=t.bits,s+=t.chars[i&o>>a];if(a&&(s+=t.chars[i&o<<t.bits-a]),n)for(;s.length*t.bits&7;)s+="=";return s})(e,sW,t)},sW={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},sJ={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},sY="RSASSA-PKCS1-v1_5",sX={RS256:sY,RS384:sY,RS512:sY},sZ=Object.keys(sJ),s0=e=>Array.isArray(e)&&e.length>0&&e.every(e=>"string"==typeof e),s1=(e,t)=>{let r=[t].flat().filter(e=>!!e),n=[e].flat().filter(e=>!!e),i=r.length>0&&n.length>0;if(i){if("string"==typeof e){if(!r.includes(e))throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}else if(s0(e)&&!e.some(e=>r.includes(e)))throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}},s2=e=>{if(void 0!==e&&"JWT"!==e)throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(e)}. Expected "JWT".`})},s6=e=>{if(!sZ.includes(e))throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(e)}. Supported: ${sZ}.`})},s3=e=>{if("string"!=typeof e)throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(e)}.`})},s4=(e,t)=>{if(e&&t&&0!==t.length&&!t.includes(e))throw new sR({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(e)}. Expected "${t}".`})},s5=(e,t)=>{if("function"!=typeof t||t(e)){if("string"==typeof t&&e&&e!==t)throw new sR({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(e)}. Expected "${t}".`})}else throw new sR({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."})},s8=(e,t)=>{if("number"!=typeof e)throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);n.setUTCSeconds(e);let i=n.getTime()<=r.getTime()-t;if(i)throw new sR({reason:"token-expired",message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},s7=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);n.setUTCSeconds(e);let i=n.getTime()>r.getTime()+t;if(i)throw new sR({reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},s9=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);n.setUTCSeconds(e);let i=n.getTime()>r.getTime()+t;if(i)throw new sR({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})};async function ae(e,t){let{header:r,signature:n,raw:i}=e,s=new TextEncoder,a=s.encode([i.header,i.payload].join(".")),o=function(e){let t=sJ[e],r=sX[e];if(!t||!r)throw Error(`Unsupported algorithm ${e}, expected one of ${sZ.join(",")}.`);return{hash:{name:sJ[e]},name:sX[e]}}(r.alg),l=await function(e,t,r){if("object"==typeof e)return iq.crypto.subtle.importKey("jwk",e,t,!1,[r]);let n=function(e){let t=e.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=n5(t),n=new ArrayBuffer(r.length),i=new Uint8Array(n);for(let e=0,t=r.length;e<t;e++)i[e]=r.charCodeAt(e);return i}(e),i="sign"===r?"pkcs8":"spki";return iq.crypto.subtle.importKey(i,n,t,!1,[r])}(t,o,"verify");return iq.crypto.subtle.verify(o.name,l,n,a)}function at(e){let t=(e||"").toString().split(".");if(3!==t.length)throw new sR({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[r,n,i]=t,s=new TextDecoder,a=JSON.parse(s.decode(sG.parse(r,{loose:!0}))),o=JSON.parse(s.decode(sG.parse(n,{loose:!0}))),l=sG.parse(i,{loose:!0});return n2(o,"orgs",'Add orgs to your session token using the "user.organizations" shortcode in JWT Templates instead.',"decodeJwt:orgs"),{header:a,payload:o,signature:l,raw:{header:r,payload:n,signature:i,text:e}}}async function ar(e,{audience:t,authorizedParties:r,clockSkewInSeconds:n,clockSkewInMs:i,issuer:s,key:a}){let o;n&&n0("clockSkewInSeconds","Use `clockSkewInMs` instead.");let l=i||n||5e3,u=at(e),{header:c,payload:h}=u,{typ:d,alg:f}=c;s2(d),s6(f);let{azp:p,sub:g,aud:m,iss:y,iat:v,exp:b,nbf:w}=h;s3(g),s1([m],[t]),s4(p,r),s5(y,s),s8(b,l),s7(w,l),s9(v,l);try{o=await ae(u,a)}catch(e){throw new sR({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${e}`})}if(!o)throw new sR({reason:"token-invalid-signature",message:"JWT signature is invalid."});return h}var an={},ai=0;function as(e,t=36e5){an[e.kid]=e,ai=Date.now(),t>=0&&setTimeout(()=>{e?delete an[e.kid]:an={}},t)}var aa="local";async function ao({apiKey:e,secretKey:t,apiUrl:r=i1,apiVersion:n="v1",issuer:i,kid:s,jwksCacheTtlInMs:a=36e5,skipJwksCache:o}){let l=!an[s]&&Date.now()-ai>=3e5;if(o||l){let s;let o=t||e;if(o)s=()=>au(r,o,n);else if(i)s=()=>al(i);else throw new sR({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:l}=await n4(s);if(!l||!l.length)throw new sR({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});l.forEach(e=>as(e,a))}let u=an[s];if(!u){let e=Object.values(an),t=e.map(e=>e.kid).join(", ");throw new sR({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${s}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.${t?` The following kid are available: ${t}`:""}`,reason:"jwk-remote-missing"})}return u}async function al(e){let t=new URL(e);t.pathname=iw(t.pathname,".well-known/jwks.json");let r=await iq.fetch(t.href);if(!r.ok)throw new sR({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${t.href} with code=${r.status}`,reason:"jwk-remote-failed-to-load"});return r.json()}async function au(e,t,r){if(!t)throw new sR({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let n=new URL(e);n.pathname=iw(n.pathname,r,"/jwks");let i=await iq.fetch(n.href,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!i.ok){let e=await i.json(),t=sK(e?.errors,"clerk_key_invalid");if(t)throw new sR({action:"Contact support@clerk.com",message:t.message,reason:"secret-key-invalid"});throw new sR({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${n.href} with code=${i.status}`,reason:"jwk-remote-failed-to-load"})}return i.json()}async function ac(e,t){let r;let{apiKey:n,secretKey:i,apiUrl:s,apiVersion:a,audience:o,authorizedParties:l,clockSkewInSeconds:u,clockSkewInMs:c,issuer:h,jwksCacheTtlInMs:d,jwtKey:f,skipJwksCache:p}=t;t.apiKey&&n0("apiKey","Use `secretKey` instead.");let{header:g}=at(e),{kid:m}=g;if(f)r=function(e){if(!an[aa]){if(!e)throw new sR({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});let t=e.replace(/(\r\n|\n|\r)/gm,"").replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA","").replace("IDAQAB","").replace(/\+/g,"-").replace(/\//g,"_");as({kid:"local",kty:"RSA",alg:"RS256",n:t,e:"AQAB"},-1)}return an[aa]}(f);else if("string"==typeof h)r=await ao({issuer:h,kid:m,jwksCacheTtlInMs:d,skipJwksCache:p});else if(n||i)r=await ao({apiKey:n,secretKey:i,apiUrl:s,apiVersion:a,kid:m,jwksCacheTtlInMs:d,skipJwksCache:p});else throw new sR({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await ar(e,{audience:o,authorizedParties:l,clockSkewInSeconds:u,clockSkewInMs:c,key:r,issuer:h})}var ah=e=>!!e?.get("__clerk_satellite_url"),ad=e=>e?.get("__clerk_synced")==="true",af=/^Mozilla\/|(Amazon CloudFront)/,ap=e=>af.test(e||""),ag=e=>{let{apiKey:t,secretKey:r,userAgent:n}=e,i=r||t||"";if(n9(i)&&!ap(n))return sz(e,"header-missing-non-browser")},am=e=>{let{origin:t,host:r,forwardedHost:n,forwardedProto:i}=e,s=t&&sV({originURL:new URL(t),host:r,forwardedHost:n,forwardedProto:i});if(s)return sz(e,"header-missing-cors")},ay=e=>{let{apiKey:t,secretKey:r,isSatellite:n,searchParams:i}=e,s=n9(r||t||"");if(s&&!n&&ah(i))return sH(e,"primary-responds-to-syncing")},av=e=>{let{apiKey:t,secretKey:r,clientUat:n}=e,i=n9(r||t||"");if(i&&!n)return sH(e,"uat-missing")},ab=e=>{let{apiKey:t,secretKey:r,referrer:n,host:i,forwardedHost:s,forwardedProto:a}=e,o=n&&sV({originURL:new URL(n),host:i,forwardedHost:s,forwardedProto:a}),l=r||t||"";if(n9(l)&&o)return sH(e,"cross-origin-referrer")},aw=e=>{let{apiKey:t,secretKey:r,clientUat:n,cookieToken:i}=e,s=r||t||"";if(function(e){return e.startsWith("live_")||e.startsWith("sk_live_")}(s)&&!n&&!i)return sz(e,"cookie-and-uat-missing")},aS=e=>{let{clientUat:t}=e;if("0"===t)return sz(e,"standard-signed-out")},a_=e=>{let{clientUat:t,cookieToken:r}=e;if(t&&Number.parseInt(t)>0&&!r)return sH(e,"cookie-missing")},aE=async e=>{let{headerToken:t}=e,r=await aT(e,t);return await sQ({...e,token:t},r)},aP=async e=>{let{cookieToken:t,clientUat:r}=e,n=await aT(e,t),i=await sQ({...e,token:t},n),s=i.toAuth().sessionClaims,a=s.iat<Number.parseInt(r);return!r||a?sH(e,"cookie-outdated"):i};async function aC(e,t){for(let r of t){let t=await r(e);if(t)return t}return sz(e,"unexpected-error")}async function aT(e,t){let r;let{isSatellite:n,proxyUrl:i}=e;return r=n?null:i||(e=>e.startsWith("https://clerk.")||e.includes(".clerk.accounts")),ac(t,{...e,issuer:r})}var aA=e=>{let{clientUat:t,isSatellite:r,searchParams:n,userAgent:i}=e,s=!t||"0"===t;return r&&s&&!ap(i)?sz(e,"satellite-needs-syncing"):r&&s&&!ad(n)?sH(e,"satellite-needs-syncing"):void 0};async function ax(e){let{cookies:t,headers:r,searchParams:n}=sD(e?.request);async function i(){try{let t=await aC(e,[aE]);return t}catch(e){return a(e,"header")}}async function s(){try{let t=await aC(e,[am,ag,aA,ay,aw,av,ab,a_,aS,aP]);return t}catch(e){return a(e,"cookie")}}function a(t,r){if(t instanceof sR){t.tokenCarrier=r;let n=["token-expired","token-not-active-yet"].includes(t.reason);return n?"header"===r?function(e,t,r=""){let{frontendApi:n,publishableKey:i,isSatellite:s,domain:a,signInUrl:o,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:c}=e;return{status:"unknown",reason:t,message:r,frontendApi:n,publishableKey:i,isSatellite:s,domain:a,signInUrl:o,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:c,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null,token:null}}(e,t.reason,t.getFullMessage()):sH(e,t.reason,t.getFullMessage()):sz(e,t.reason,t.getFullMessage())}return sz(e,"unexpected-error",t.message)}return(e.frontendApi&&n0("frontendApi","Use `publishableKey` instead."),e.apiKey&&n0("apiKey","Use `secretKey` instead."),i4((e={...e,...aI(e,r),frontendApi:n7(e.publishableKey)?.frontendApi||e.frontendApi,apiUrl:e.apiUrl||i1,apiVersion:e.apiVersion||"v1",cookieToken:e.cookieToken||t?.(i3.Cookies.Session),clientUat:e.clientUat||t?.(i3.Cookies.ClientUat),searchParams:e.searchParams||n||void 0}).secretKey||e.apiKey),e.isSatellite&&(function(e,t){if(!e&&n9(t))throw Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}(e.signInUrl,e.secretKey||e.apiKey),e.signInUrl&&e.origin&&function(e,t){let r;try{r=new URL(e)}catch{throw Error("The signInUrl needs to have a absolute url format.")}if(r.origin===t)throw Error("The signInUrl needs to be on a different origin than your satellite application.")}(e.signInUrl,e.origin),function(e){if(!e)throw Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}(e.proxyUrl||e.domain)),e.headerToken)?i():s()}var aO=e=>{let{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:o,isSatellite:l,domain:u}=e;return{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:o,isSatellite:l,domain:u}},aI=(e,t)=>t?{headerToken:sq(e.headerToken||t(i3.Headers.Authorization)),origin:e.origin||t(i3.Headers.Origin),host:e.host||t(i3.Headers.Host),forwardedHost:e.forwardedHost||t(i3.Headers.ForwardedHost),forwardedPort:e.forwardedPort||t(i3.Headers.ForwardedPort),forwardedProto:e.forwardedProto||t(i3.Headers.CloudFrontForwardedProto)||t(i3.Headers.ForwardedProto),referrer:e.referrer||t(i3.Headers.Referrer),userAgent:e.userAgent||t(i3.Headers.UserAgent)}:{},aR=(e,t)=>{let r;if(e.startsWith("http"))r=new URL(e);else{if(!t||!t.startsWith("http"))throw Error("destination url or return back url should be an absolute path url!");let n=new URL(t);r=new URL(e,n.origin)}return t&&r.searchParams.set("redirect_url",t),r.toString()};let aN=process.env.CLERK_JS_VERSION||"";aN&&n0("CLERK_JS_VERSION","Use `NEXT_PUBLIC_CLERK_JS_VERSION` environment variable instead."),process.env.NEXT_PUBLIC_CLERK_JS_VERSION,process.env.NEXT_PUBLIC_CLERK_JS;let ak=process.env.CLERK_API_URL||"https://api.clerk.dev",aM=process.env.CLERK_API_VERSION||"v1",aL=process.env.CLERK_API_KEY||"";aL&&n0("CLERK_API_KEY","Use `CLERK_SECRET_KEY` environment variable instead.");let aD=process.env.CLERK_SECRET_KEY||"",aU=process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"";aU&&n0("NEXT_PUBLIC_CLERK_FRONTEND_API","Use `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` environment variable instead.");let aB=process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",a$=process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",aj="true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE,aq=(e="auth")=>`Clerk: ${e}() was called but Clerk can't detect usage of authMiddleware(). Please ensure the following:
- authMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/docs/quickstarts/nextjs
`;function aF(e,t){var r;let n=((r=i3.Attributes[t])in e?e[r]:void 0)||aQ(e,i3.Headers[t]);return n||("AuthStatus"===t||"AuthToken"===t)&&function(e,t){let r;if(az(e))return e.nextUrl.searchParams.get(t);if("query"in e&&(r=e.query[t]),!r){let n=(e.url||"").split("?")[1];r=new URLSearchParams(n).get(t)}return r}(e,t)||void 0}function aQ(e,t){var r,n;return az(e)?e.headers.get(t):e.headers[t]||e.headers[t.toLowerCase()]||(null==(n=null==(r=e.socket)?void 0:r._httpMessage)?void 0:n.getHeader(t))}function az(e){try{let{headers:t,nextUrl:r,cookies:n}=e||{};return"function"==typeof(null==t?void 0:t.get)&&"function"==typeof(null==r?void 0:r.searchParams.get)&&"function"==typeof(null==n?void 0:n.get)}catch(e){return!1}}let aH=(e,t)=>{let r={...t};return{...e,__clerk_ssr_state:r}},aV=e=>{if(!e||"string"!=typeof e)return e;try{return(e||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch(e){return""}},aK=e=>(Array.isArray(e)?e:[e]).map(e=>{if("string"==typeof e)return aV(e);let t=Object.fromEntries(Object.entries(e).map(([e,t])=>[e,aV(t)]));return JSON.stringify(t,null,2)}).join(", "),aG=(e,t)=>()=>{let r=[],n=!1;return{enable:()=>{n=!0},debug:(...e)=>{n&&r.push(e.map(e=>"function"==typeof e?e():e))},commit:()=>{if(n){for(let n of(console.log(`[clerk debug start: ${e}]`),r)){let e=t(n);e=e.split("\n").map(e=>`  ${e}`).join("\n"),process.env.VERCEL&&(e=function(e,t){let r=new TextEncoder,n=new TextDecoder("utf-8"),i=r.encode(e),s=i.slice(0,4096);return n.decode(s).replace(/\uFFFD/g,"")}(e,0)),console.log(e)}console.log(`[clerk debug end: ${e}] (@clerk/nextjs=4.31.1,next=13.5.2)`)}}}},aW=(e,t)=>(...r)=>{let n="string"==typeof e?aG(e,aK):e,i=n(),s=t(i);try{let e=s(...r);if("object"==typeof e&&"then"in e&&"function"==typeof e.then)return e.then(e=>(i.commit(),e)).catch(e=>{throw i.commit(),e});return i.commit(),e}catch(e){throw i.commit(),e}},aJ=({debugLoggerName:e,noAuthStatusMessage:t})=>aW(e,e=>(r,n)=>{"true"===aQ(r,i3.Headers.EnableDebug)&&e.enable();let i=aF(r,"AuthToken"),s=aF(r,"AuthStatus"),a=aF(r,"AuthMessage"),o=aF(r,"AuthReason");if(e.debug("Debug",{authReason:o,authMessage:a,authStatus:s,authToken:i}),!s)throw Error(t);let l={apiKey:(null==n?void 0:n.apiKey)||aL,authStatus:s,authMessage:a,secretKey:(null==n?void 0:n.secretKey)||aD,authReason:o,authToken:i,apiUrl:ak,apiVersion:aM};if(e.debug("Options debug",l),s!==sF.SignedIn)return sT(l);let u=at(i);e.debug("JWT debug",u.raw.text);let c=sC(u.payload,{...l,token:u.raw.text});return c&&(c.user&&n2(c,"user","Use `clerkClient.users.getUser` instead."),c.organization&&n2(c,"organization","Use `clerkClient.organizations.getOrganization` instead."),c.session&&n2(c,"session","Use `clerkClient.sessions.getSession` instead.")),c});aJ({debugLoggerName:"getAuth()",noAuthStatusMessage:aq("getAuth")});let aY=()=>{try{let{headers:e}=r(9756);return new I("https://placeholder.com",{headers:e()})}catch(e){if(e&&"message"in e&&"string"==typeof e.message&&e.message.toLowerCase().includes("dynamic server usage"))throw e;throw Error(`Clerk: auth() and currentUser() are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${e}`)}},aX=()=>{let e=aJ({debugLoggerName:"auth()",noAuthStatusMessage:aq()})(aY()),{notFound:t,redirect:n}=r(3206);return e.protect=(r,i)=>{let s=(null==r?void 0:r.redirectUrl)?void 0:r,a=(null==r?void 0:r.redirectUrl)||(null==i?void 0:i.redirectUrl),o=()=>{a&&n(a),t()};return e.userId?s?"function"==typeof s?s(e.has)?{...e}:o():e.has(s)?{...e}:o():{...e}:o()},e};!function(e){let t={...e},r=sE(t),n=function(e){let{apiClient:t}=e,{apiKey:r="",secretKey:n="",jwtKey:i="",apiUrl:s=i1,apiVersion:a="v1",frontendApi:o="",proxyUrl:l="",publishableKey:u="",isSatellite:c=!1,domain:h="",audience:d="",userAgent:f}=e.options;return{authenticateRequest:({apiKey:e,secretKey:t,audience:f,frontendApi:p,proxyUrl:g,publishableKey:m,jwtKey:y,isSatellite:v,domain:b,searchParams:w,...S})=>ax({...S,apiKey:e||r,secretKey:t||n,audience:f||d,apiUrl:s,apiVersion:a,frontendApi:p||o,proxyUrl:g||l,publishableKey:m||u,isSatellite:v||c,domain:b||h,jwtKey:y||i,searchParams:w}),localInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:n,domain:i,...s})=>(function(e){e.frontendApi&&n0("frontendApi","Use `publishableKey` instead."),e.pkgVersion&&n0("pkgVersion","Use `clerkJSVersion` instead."),e.frontendApi=n7(e.publishableKey)?.frontendApi||e.frontendApi||"";let t=iI(e.frontendApi)?"":function(e){let t;if(!e)return"";if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}let r=e.replace(t,"");return`clerk.${r}`}(e.domain),{debugData:r,frontendApi:n,pkgVersion:i,clerkJSUrl:s,clerkJSVersion:a,publishableKey:o,proxyUrl:l,isSatellite:u=!1,domain:c,signInUrl:h}=e;return`
    <head>
        <meta charset="UTF-8" />
        <style>
          @media (prefers-color-scheme: dark) {
            body {
              background-color: black;
            }
          }
        </style>
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${n}';
            window.__clerk_debug = ${JSON.stringify(r||{})};
            ${l?`window.__clerk_proxy_url = '${l}'`:""}
            ${c?`window.__clerk_domain = '${c}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${u},
                        isInterstitial: true,
                        signInUrl: ${h?`'${h}'`:void 0}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${o?`script.setAttribute('data-clerk-publishable-key', '${o}');`:`script.setAttribute('data-clerk-frontend-api', '${n}');`}

                ${c?`script.setAttribute('data-clerk-domain', '${c}');`:""}
                ${l?`script.setAttribute('data-clerk-proxy-url', '${l}')`:""};
                script.async = true;
                script.src = '${s||n3(l||t||n,{pkgVersion:i,clerkJSVersion:a})}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        </script>
    </body>
`})({...s,frontendApi:e||o,proxyUrl:r||l,publishableKey:t||u,isSatellite:n||c,domain:i||h}),remotePublicInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:n,domain:i,userAgent:a,...d})=>sN({...d,apiUrl:s,frontendApi:e||o,publishableKey:t||u,proxyUrl:r||l,isSatellite:n||c,domain:i||h,userAgent:a||f}),remotePrivateInterstitial:()=>t.interstitial.getInterstitial(),remotePublicInterstitialUrl:sk,debugRequestState:aO}}({options:t,apiClient:r}),i={...r,...n,__unstable_options:t};n2(i,"__unstable_options","Use `createClerkClient({...})` to create a new clerk instance instead.")}({apiKey:aL,secretKey:aD,apiUrl:ak,apiVersion:aM,userAgent:"@clerk/nextjs@4.31.1",proxyUrl:a$,domain:aB,isSatellite:aj});let aZ=(e,t,r)=>(e.headers.set(t,r),e),{redirectToSignIn:a0,redirectToSignUp:a1}=function({redirectAdapter:e,signUpUrl:t,signInUrl:r,frontendApi:n,publishableKey:i}){n?n0("frontendApi","Use `publishableKey` instead."):n=n7(i)?.frontendApi;let s=function(e){if(!e)return"";let t=e.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.");return`https://${t}`}(n);return{redirectToSignUp:({returnBackUrl:r}={})=>{t||s||iO.throwMissingPublishableKeyError();let n=`${s}/sign-up`;return e(aR(t||n,r))},redirectToSignIn:({returnBackUrl:t}={})=>{r||s||iO.throwMissingPublishableKeyError();let n=`${s}/sign-in`;return e(aR(r||n,t))}}}({redirectAdapter:e=>{let t=M.redirect(e);return aZ(t,i3.Headers.ClerkRedirectTo,"true")},signInUrl:"/sign-in",signUpUrl:"/sign-up",publishableKey:"pk_test_c3VpdGFibGUtcGlnZW9uLTQ5LmNsZXJrLmFjY291bnRzLmRldiQ",frontendApi:aU}),a2="edge";async function a6(e){let{userId:t}=aX();if(!t)return new M("unauthorised",{status:401});let r=await e.json(),{name:n}=r,i=await nH(n);if(!i)return new M("failed to generate image description",{status:500});let s=await nV(i);if(!s)return new M("failed to generate image ",{status:500});let a=await rW.insert(nO).values({name:n,userId:t,imageUrl:s}).returning({insertedId:nO.id});return M.json({note_id:a[0].insertedId})}let a3=eb.AppRouteRouteModule,a4=new a3({definition:{kind:ew.x.APP_ROUTE,page:"/api/createNoteBook/route",pathname:"/api/createNoteBook",filename:"route",bundlePath:"app/api/createNoteBook/route"},resolvedPagePath:"/Users/tiennguyen/Documents/Coding/AI-NOTE/src/app/api/createNoteBook/route.ts",nextConfigOutput:"",userland:h}),{requestAsyncStorage:a5,staticGenerationAsyncStorage:a8,serverHooks:a7,headerHooks:a9,staticGenerationBailout:oe}=a4,ot="/api/createNoteBook/route",or=d,on=ev.wrap(a4)},7652:e=>{"use strict";var t,r,n,i,s,a=Object.create,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,c=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,d=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>o(e,"name",{value:t,configurable:!0}),p=(e,t)=>()=>(e&&(t=e(e=0)),t),g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),m=(e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of u(t))h.call(e,i)||i===r||o(e,i,{get:()=>t[i],enumerable:!(n=l(t,i))||n.enumerable});return e},v=(e,t,r)=>(r=null!=e?a(c(e)):{},y(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),b=e=>y(o({},"__esModule",{value:!0}),e),w=(e,t,r)=>(d(e,"symbol"!=typeof t?t+"":t,r),r),S=g(e=>{P(),e.byteLength=l,e.toByteArray=c,e.fromByteArray=p;var t,r,n=[],i=[],s="u">typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,r=a.length;t<r;++t)n[t]=a[t],i[a.charCodeAt(t)]=t;function o(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function l(e){var t=o(e),r=t[0],n=t[1];return(r+n)*3/4-n}function u(e,t,r){return(t+r)*3/4-r}function c(e){var t,r,n=o(e),a=n[0],l=n[1],c=new s(u(e,a,l)),h=0,d=l>0?a-4:a;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;return 2===l&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[h++]=255&t),1===l&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t),c}function h(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function d(e,t,r){for(var n=[],i=t;i<r;i+=3)n.push(h((e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2])));return n.join("")}function p(e){for(var t,r=e.length,i=r%3,s=[],a=0,o=r-i;a<o;a+=16383)s.push(d(e,a,a+16383>o?o:a+16383));return 1===i?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")}i[45]=62,i[95]=63,f(o,"getLens"),f(l,"byteLength"),f(u,"_byteLength"),f(c,"toByteArray"),f(h,"tripletToBase64"),f(d,"encodeChunk"),f(p,"fromByteArray")}),_=g(e=>{P(),e.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,l=(1<<o)-1,u=l>>1,c=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-c)-1,f>>=-c,c+=o;c>0;s=256*s+e[t+h],h+=d,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:(f?-1:1)*(1/0);a+=Math.pow(2,n),s-=u}return(f?-1:1)*a*Math.pow(2,s-n)},e.write=function(e,t,r,n,i,s){var a,o,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,d=23===i?5960464477539062e-23:0,f=n?0:s-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(t*l-1)*Math.pow(2,i),a+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[r+f]=255&a,f+=p,a/=256,u-=8);e[r+f-p]|=128*g}}),E=g(e=>{P();var t=S(),r=_(),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function i(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}function s(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return o(e,t,r)}function o(e,t,r){if("string"==typeof e)return h(e,t);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ea(e,ArrayBuffer)||e&&ea(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(ea(e,SharedArrayBuffer)||e&&ea(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);let i=m(e);if(i)return i;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}function c(e){return l(e),s(e<0?0:0|y(e))}function h(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|b(e,t),n=s(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function d(e){let t=e.length<0?0:0|y(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e){if(ea(e,Uint8Array)){let t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return d(e)}function g(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}function m(e){if(a.isBuffer(e)){let t=0|y(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||eo(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}function y(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function v(e){return+e!=e&&(e=0),a.alloc(+e)}function b(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ea(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return et(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ei(e).length;default:if(i)return n?-1:et(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return N(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function C(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),eo(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:T(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):T(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function T(e,t,r,n,i){let s,a=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(f(u,"read"),i){let n=-1;for(s=r;s<o;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===l)return n*a}else -1!==n&&(s-=s-n),n=-1}else for(r+l>o&&(r=o-l),s=r;s>=0;s--){let r=!0;for(let n=0;n<l;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return -1}function A(e,t,r,n){let i;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(eo(n))break;e[r+i]=n}return i}function x(e,t,r,n){return es(et(t,e.length-r),e,r,n)}function O(e,t,r,n){return es(er(t),e,r,n)}function I(e,t,r,n){return es(ei(t),e,r,n)}function R(e,t,r,n){return es(en(t,e.length-r),e,r,n)}function N(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function k(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],s=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(s=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[i+1],n=e[i+2],o=e[i+3],(192&r)==128&&(192&n)==128&&(192&o)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return M(n)}function M(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}function L(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function D(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function U(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=el[e[n]];return i}function B(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function $(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function q(e,t,r,n,i){J(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function F(e,t,r,n,i){J(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function Q(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function z(e,t,n,i,s){return t=+t,n>>>=0,s||Q(e,t,n,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,s){return t=+t,n>>>=0,s||Q(e,t,n,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,n,i,52,8),n+8}e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),f(i,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),f(s,"createBuffer"),f(a,"Buffer"),a.poolSize=8192,f(o,"from"),a.from=function(e,t,r){return o(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),f(l,"assertSize"),f(u,"alloc"),a.alloc=function(e,t,r){return u(e,t,r)},f(c,"allocUnsafe"),a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},f(h,"fromString"),f(d,"fromArrayLike"),f(p,"fromArrayView"),f(g,"fromArrayBuffer"),f(m,"fromObject"),f(y,"checked"),f(v,"SlowBuffer"),a.isBuffer=f(function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},"isBuffer"),a.compare=f(function(e,t){if(ea(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),ea(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},"compare"),a.isEncoding=f(function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=f(function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(ea(t,Uint8Array))i+t.length>n.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(a.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},"concat"),f(b,"byteLength"),a.byteLength=b,f(w,"slowToString"),a.prototype._isBuffer=!0,f(E,"swap"),a.prototype.swap16=f(function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)E(this,t,t+1);return this},"swap16"),a.prototype.swap32=f(function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},"swap32"),a.prototype.swap64=f(function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},"swap64"),a.prototype.toString=f(function(){let e=this.length;return 0===e?"":0==arguments.length?k(this,0,e):w.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=f(function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},"equals"),a.prototype.inspect=f(function(){let t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},"inspect"),n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=f(function(e,t,r,n,i){if(ea(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t,l=Math.min(s,o),u=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<l;++e)if(u[e]!==c[e]){s=u[e],o=c[e];break}return s<o?-1:o<s?1:0},"compare"),f(C,"bidirectionalIndexOf"),f(T,"arrayIndexOf"),a.prototype.includes=f(function(e,t,r){return -1!==this.indexOf(e,t,r)},"includes"),a.prototype.indexOf=f(function(e,t,r){return C(this,e,t,r,!0)},"indexOf"),a.prototype.lastIndexOf=f(function(e,t,r){return C(this,e,t,r,!1)},"lastIndexOf"),f(A,"hexWrite"),f(x,"utf8Write"),f(O,"asciiWrite"),f(I,"base64Write"),f(R,"ucs2Write"),a.prototype.write=f(function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return A(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":case"latin1":case"binary":return O(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,r);default:if(s)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},"write"),a.prototype.toJSON=f(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),f(N,"base64Slice"),f(k,"utf8Slice"),f(M,"decodeCodePointsArray"),f(L,"asciiSlice"),f(D,"latin1Slice"),f(U,"hexSlice"),f(B,"utf16leSlice"),a.prototype.slice=f(function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},"slice"),f($,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=f(function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=f(function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=f(function(e,t){return e>>>=0,t||$(e,1,this.length),this[e]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=f(function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]|this[e+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=f(function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]<<8|this[e+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=f(function(e,t){return e>>>=0,t||$(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=f(function(e,t){return e>>>=0,t||$(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=eu(f(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&X(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=eu(f(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&X(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)},"readBigUInt64BE")),a.prototype.readIntLE=f(function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},"readIntLE"),a.prototype.readIntBE=f(function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},"readIntBE"),a.prototype.readInt8=f(function(e,t){return e>>>=0,t||$(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},"readInt8"),a.prototype.readInt16LE=f(function(e,t){e>>>=0,t||$(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},"readInt16LE"),a.prototype.readInt16BE=f(function(e,t){e>>>=0,t||$(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},"readInt16BE"),a.prototype.readInt32LE=f(function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},"readInt32LE"),a.prototype.readInt32BE=f(function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},"readInt32BE"),a.prototype.readBigInt64LE=eu(f(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&X(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])},"readBigInt64LE")),a.prototype.readBigInt64BE=eu(f(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&X(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)},"readBigInt64BE")),a.prototype.readFloatLE=f(function(e,t){return e>>>=0,t||$(e,4,this.length),r.read(this,e,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=f(function(e,t){return e>>>=0,t||$(e,4,this.length),r.read(this,e,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=f(function(e,t){return e>>>=0,t||$(e,8,this.length),r.read(this,e,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=f(function(e,t){return e>>>=0,t||$(e,8,this.length),r.read(this,e,!1,52,8)},"readDoubleBE"),f(j,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=f(function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=f(function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},"writeUInt32BE"),f(q,"wrtBigUInt64LE"),f(F,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=eu(f(function(e,t=0){return q(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=eu(f(function(e,t=0){return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=f(function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},"writeIntLE"),a.prototype.writeIntBE=f(function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},"writeIntBE"),a.prototype.writeInt8=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},"writeInt8"),a.prototype.writeInt16LE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},"writeInt16LE"),a.prototype.writeInt16BE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},"writeInt16BE"),a.prototype.writeInt32LE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},"writeInt32LE"),a.prototype.writeInt32BE=f(function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},"writeInt32BE"),a.prototype.writeBigInt64LE=eu(f(function(e,t=0){return q(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=eu(f(function(e,t=0){return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),f(Q,"checkIEEE754"),f(z,"writeFloat"),a.prototype.writeFloatLE=f(function(e,t,r){return z(this,e,t,!0,r)},"writeFloatLE"),a.prototype.writeFloatBE=f(function(e,t,r){return z(this,e,t,!1,r)},"writeFloatBE"),f(H,"writeDouble"),a.prototype.writeDoubleLE=f(function(e,t,r){return H(this,e,t,!0,r)},"writeDoubleLE"),a.prototype.writeDoubleBE=f(function(e,t,r){return H(this,e,t,!1,r)},"writeDoubleBE"),a.prototype.copy=f(function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},"copy"),a.prototype.fill=f(function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let s=a.isBuffer(e)?e:a.from(e,n),o=s.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this},"fill");var V={};function K(e,t,r){var n;V[e]=(f(n=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}},"NodeError"),n)}function G(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function W(e,t,r){Y(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&X(t,e.length-(r+1))}function J(e,t,r,n,i,s){if(e>r||e<t){let n="bigint"==typeof t?"n":"",i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`:`>= -(2${n} ** ${(s+1)*8-1}${n}) and \
< 2 ** ${(s+1)*8-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new V.ERR_OUT_OF_RANGE("value",i,e)}W(n,i,s)}function Y(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){throw Math.floor(e)!==e?(Y(e,r),new V.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}f(K,"E"),K("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argum\
ent must be of type number. Received type ${typeof t}`},TypeError),K("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=G(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=G(i)),i+="n"),n+=` It\
 must be ${t}. Received ${i}`},RangeError),f(G,"addNumericalSeparator"),f(W,"checkBounds"),f(J,"checkIntBI"),f(Y,"validateNumber"),f(X,"boundsError");var Z=/[^+/0-9A-Za-z-_]/g;function ee(e){if((e=(e=e.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function et(e,t){t=t||1/0;let r,n=e.length,i=null,s=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function er(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function en(e,t){let r,n,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}function ei(e){return t.toByteArray(ee(e))}function es(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function ea(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function eo(e){return e!=e}f(ee,"base64clean"),f(et,"utf8ToBytes"),f(er,"asciiToBytes"),f(en,"utf16leToBytes"),f(ei,"base64ToBytes"),f(es,"blitBuffer"),f(ea,"isInstance"),f(eo,"numberIsNaN");var el=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function eu(e){return typeof BigInt>"u"?ec:e}function ec(){throw Error("BigInt not supported")}f(eu,"defineBigIntMethod"),f(ec,"BufferBigIntNotDefined")}),P=p(()=>{t=globalThis,r=globalThis.setImmediate??(e=>setTimeout(e,0)),globalThis.clearImmediate??(e=>clearTimeout(e)),(n=globalThis.crypto??{}).subtle??(n.subtle={}),i="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:E().Buffer,(s=globalThis.process??{}).env??(s.env={});try{s.nextTick(()=>{})}catch{let e=Promise.resolve();s.nextTick=e.then.bind(e)}}),C=g((e,t)=>{P();var r,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:f(function(e,t,r){return Function.prototype.apply.call(e,t,r)},"ReflectApply");function s(e){console&&console.warn&&console.warn(e)}r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?f(function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))},"ReflectOwnKeys"):f(function(e){return Object.getOwnPropertyNames(e)},"ReflectOwnKeys"),f(s,"ProcessEmitWarning");var a=Number.isNaN||f(function(e){return e!=e},"NumberIsNaN");function o(){o.init.call(this)}f(o,"EventEmitter"),t.exports=o,t.exports.once=w,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,a,o;if(u(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),void 0===o)o=a[t]=r,++e._eventsCount;else if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function g(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?b(i):y(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function w(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}f(i,"errorListener"),f(s,"resolver"),_(e,t,s,{once:!0}),"error"!==t&&S(e,i,{once:!0})})}function S(e,t,r){"function"==typeof e.on&&_(e,"error",t,r)}function _(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,f(function i(s){n.once&&e.removeEventListener(t,i),r(s)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}f(u,"checkListener"),Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=f(function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},"setMaxListeners"),f(c,"_getMaxListeners"),o.prototype.getMaxListeners=f(function(){return c(this)},"getMaxListeners"),o.prototype.emit=f(function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,o=Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else for(var u=l.length,c=y(l,u),r=0;r<u;++r)i(c[r],this,t);return!0},"emit"),f(h,"_addListener"),o.prototype.addListener=f(function(e,t){return h(this,e,t,!1)},"addListener"),o.prototype.on=o.prototype.addListener,o.prototype.prependListener=f(function(e,t){return h(this,e,t,!0)},"prependListener"),f(d,"onceWrapper"),f(p,"_onceWrap"),o.prototype.once=f(function(e,t){return u(t),this.on(e,p(this,e,t)),this},"once"),o.prototype.prependOnceListener=f(function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},"prependOnceListener"),o.prototype.removeListener=f(function(e,t){var r,n,i,s,a;if(u(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():v(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},"removeListener"),o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=f(function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},"removeAllListeners"),f(g,"_listeners"),o.prototype.listeners=f(function(e){return g(this,e,!0)},"listeners"),o.prototype.rawListeners=f(function(e){return g(this,e,!1)},"rawListeners"),o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,f(m,"listenerCount"),o.prototype.eventNames=f(function(){return this._eventsCount>0?r(this._events):[]},"eventNames"),f(y,"arrayClone"),f(v,"spliceOne"),f(b,"unwrapListeners"),f(w,"once"),f(S,"addErrorHandlerIfEventEmitter"),f(_,"eventTargetAgnosticAddListener")}),T={};m(T,{default:()=>A});var A,x=p(()=>{P(),A={}});function O(e){let t=1779033703,r=3144134277,n=1013904242,i=2773480762,s=1359893119,a=2600822924,o=528734635,l=1541459225,u=0,c=0,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=f((e,t)=>e>>>t|e<<32-t,"rrot"),p=new Uint32Array(64),g=new Uint8Array(64),m=f(()=>{for(let e=0,t=0;e<16;e++,t+=4)p[e]=g[t]<<24|g[t+1]<<16|g[t+2]<<8|g[t+3];for(let e=16;e<64;e++){let t=d(p[e-15],7)^d(p[e-15],18)^p[e-15]>>>3,r=d(p[e-2],17)^d(p[e-2],19)^p[e-2]>>>10;p[e]=p[e-16]+t+p[e-7]+r|0}let e=t,u=r,f=n,m=i,y=s,v=a,b=o,w=l;for(let t=0;t<64;t++){let r=w+(d(y,6)^d(y,11)^d(y,25))+(y&v^~y&b)+h[t]+p[t]|0,n=(d(e,2)^d(e,13)^d(e,22))+(e&u^e&f^u&f)|0;w=b,b=v,v=y,y=m+r|0,m=f,f=u,u=e,e=r+n|0}t=t+e|0,r=r+u|0,n=n+f|0,i=i+m|0,s=s+y|0,a=a+v|0,o=o+b|0,l=l+w|0,c=0},"process"),y=f(e=>{"string"==typeof e&&(e=new TextEncoder().encode(e));for(let t=0;t<e.length;t++)g[c++]=e[t],64===c&&m();u+=e.length},"add"),v=f(()=>{if(g[c++]=128,64==c&&m(),c+8>64){for(;c<64;)g[c++]=0;m()}for(;c<58;)g[c++]=0;let e=8*u;g[c++]=e/1099511627776&255,g[c++]=e/4294967296&255,g[c++]=e>>>24,g[c++]=e>>>16&255,g[c++]=e>>>8&255,g[c++]=255&e,m();let h=new Uint8Array(32);return h[0]=t>>>24,h[1]=t>>>16&255,h[2]=t>>>8&255,h[3]=255&t,h[4]=r>>>24,h[5]=r>>>16&255,h[6]=r>>>8&255,h[7]=255&r,h[8]=n>>>24,h[9]=n>>>16&255,h[10]=n>>>8&255,h[11]=255&n,h[12]=i>>>24,h[13]=i>>>16&255,h[14]=i>>>8&255,h[15]=255&i,h[16]=s>>>24,h[17]=s>>>16&255,h[18]=s>>>8&255,h[19]=255&s,h[20]=a>>>24,h[21]=a>>>16&255,h[22]=a>>>8&255,h[23]=255&a,h[24]=o>>>24,h[25]=o>>>16&255,h[26]=o>>>8&255,h[27]=255&o,h[28]=l>>>24,h[29]=l>>>16&255,h[30]=l>>>8&255,h[31]=255&l,h},"digest");return void 0===e?{add:y,digest:v}:(y(e),v())}var I,R,N=p(()=>{P(),f(O,"sha256")}),k=p(()=>{P(),f(I=class e{constructor(){w(this,"_dataLength",0),w(this,"_bufferLength",0),w(this,"_state",new Int32Array(4)),w(this,"_buffer",new ArrayBuffer(68)),w(this,"_buffer8"),w(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(t){let r=e.hexChars,n=e.hexOut,i,s,a,o;for(o=0;o<4;o+=1)for(s=8*o,i=t[o],a=0;a<8;a+=2)n[s+1+a]=r.charAt(15&i),i>>>=4,n[s+0+a]=r.charAt(15&i),i>>>=4;return n.join("")}static _md5cycle(e,t){let r=e[0],n=e[1],i=e[2],s=e[3];r+=(n&i|~n&s)+t[0]-680876936|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[2]+606105819|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[3]-1044525330|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&s)+t[4]-176418897|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[6]-1473231341|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[7]-45705983|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&s)+t[8]+1770035416|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[10]-42063|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[11]-1990404162|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&s)+t[12]+1804603682|0,s+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0,i+=((s=(s<<12|s>>>20)+r|0)&r|~s&n)+t[14]-1502002290|0,n+=((i=(i<<17|i>>>15)+s|0)&s|~i&r)+t[15]+1236535329|0,r+=((n=(n<<22|n>>>10)+i|0)&s|i&~s)+t[1]-165796510|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[11]+643717713|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[0]-373897302|0,r+=((n=(n<<20|n>>>12)+i|0)&s|i&~s)+t[5]-701558691|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[15]-660478335|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[4]-405537848|0,r+=((n=(n<<20|n>>>12)+i|0)&s|i&~s)+t[9]+568446438|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[3]-187363961|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[8]+1163531501|0,r+=((n=(n<<20|n>>>12)+i|0)&s|i&~s)+t[13]-1444681467|0,s+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0,i+=((s=(s<<9|s>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0,n+=((i=(i<<14|i>>>18)+s|0)&r|s&~r)+t[12]-1926607734|0,r+=((n=(n<<20|n>>>12)+i|0)^i^s)+t[5]-378558|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[11]+1839030562|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[14]-35309556|0,r+=((n=(n<<23|n>>>9)+i|0)^i^s)+t[1]-1530992060|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[7]-155497632|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[10]-1094730640|0,r+=((n=(n<<23|n>>>9)+i|0)^i^s)+t[13]+681279174|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[3]-722521979|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[6]+76029189|0,r+=((n=(n<<23|n>>>9)+i|0)^i^s)+t[9]-640364487|0,s+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0,i+=((s=(s<<11|s>>>21)+r|0)^r^n)+t[15]+530742520|0,n+=((i=(i<<16|i>>>16)+s|0)^s^r)+t[2]-995338651|0,n=(n<<23|n>>>9)+i|0,r+=(i^(n|~s))+t[0]-198630844|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+t[7]+1126891415|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+t[14]-1416354905|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+t[5]-57434055|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+t[12]+1700485571|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+t[3]-1894986606|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+t[10]-1051523|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+t[1]-2054922799|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+t[8]+1873313359|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+t[15]-30611744|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+t[6]-1560198380|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+t[13]+1309151649|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+t[4]-145523070|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+t[11]-1120210379|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+t[2]+718787259|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+t[9]-343485551|0,n=(n<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=s+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this}appendStr(t){let r=this._buffer8,n=this._buffer32,i=this._bufferLength,s,a;for(a=0;a<t.length;a+=1){if((s=t.charCodeAt(a))<128)r[i++]=s;else if(s<2048)r[i++]=(s>>>6)+192,r[i++]=63&s|128;else if(s<55296||s>56319)r[i++]=(s>>>12)+224,r[i++]=s>>>6&63|128,r[i++]=63&s|128;else{if((s=(s-55296)*1024+(t.charCodeAt(++a)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");r[i++]=(s>>>18)+240,r[i++]=s>>>12&63|128,r[i++]=s>>>6&63|128,r[i++]=63&s|128}i>=64&&(this._dataLength+=64,e._md5cycle(this._state,n),i-=64,n[0]=n[16])}return this._bufferLength=i,this}appendAsciiStr(t){let r=this._buffer8,n=this._buffer32,i=this._bufferLength,s,a=0;for(;;){for(s=Math.min(t.length-a,64-i);s--;)r[i++]=t.charCodeAt(a++);if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}appendByteArray(t){let r=this._buffer8,n=this._buffer32,i=this._bufferLength,s,a=0;for(;;){for(s=Math.min(t.length-a,64-i);s--;)r[i++]=t[a++];if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,r=e.state,n=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],i=0;i<t.length;i+=1)this._buffer8[i]=t.charCodeAt(i)}end(t=!1){let r=this._bufferLength,n=this._buffer8,i=this._buffer32,s=(r>>2)+1;this._dataLength+=r;let a=8*this._dataLength;if(n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,i.set(e.buffer32Identity.subarray(s),s),r>55&&(e._md5cycle(this._state,i),i.set(e.buffer32Identity)),a<=4294967295)i[14]=a;else{let e=a.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;let t=parseInt(e[2],16),r=parseInt(e[1],16)||0;i[14]=t,i[15]=r}return e._md5cycle(this._state,i),t?this._state:e._hex(this._state)}},"Md5"),w(I,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),w(I,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),w(I,"hexChars","0123456789abcdef"),w(I,"hexOut",[]),w(I,"onePassHasher",new I),R=I}),M={};function L(e){return n.getRandomValues(i.alloc(e))}function D(e){if("sha256"===e)return{update:function(e){return{digest:function(){return i.from(O(e))}}}};if("md5"===e)return{update:function(e){return{digest:function(){return"string"==typeof e?R.hashStr(e):R.hashByteArray(e)}}}};throw Error(`Hash type '${e}' not supported`)}function U(e,t){if("sha256"!==e)throw Error(`Only sha256 is supported (requested: '${e}')`);return{update:function(e){return{digest:function(){"string"==typeof t&&(t=new TextEncoder().encode(t)),"string"==typeof e&&(e=new TextEncoder().encode(e));let r=t.length;if(r>64)t=O(t);else if(r<64){let e=new Uint8Array(64);e.set(t),t=e}let n=new Uint8Array(64),s=new Uint8Array(64);for(let e=0;e<64;e++)n[e]=54^t[e],s[e]=92^t[e];let a=new Uint8Array(e.length+64);a.set(n,0),a.set(e,64);let o=new Uint8Array(96);return o.set(s,0),o.set(O(a),64),i.from(O(o))}}}}}m(M,{createHash:()=>D,createHmac:()=>U,randomBytes:()=>L});var B=p(()=>{P(),N(),k(),f(L,"randomBytes"),f(D,"createHash"),f(U,"createHmac")}),$=g(e=>{P(),e.parse=function(e,t){return new r(e,t).parse()};var t=class e{constructor(e,t){this.source=e,this.transform=t||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof()&&"="!==this.nextCharacter().value;);}parse(t){var r,n,i;for(this.consumeDimensions();!this.isEof();)if("{"!==(r=this.nextCharacter()).value||i){if("}"!==r.value||i)'"'!==r.value||r.escaped?","!==r.value||i?this.record(r.value):this.newEntry():(i&&this.newEntry(!0),i=!i);else if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else this.dimension++,this.dimension>1&&(n=new e(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);if(0!==this.dimension)throw Error("array dimension not balanced");return this.entries}};f(t,"ArrayParser");var r=t;function n(e){return e}f(n,"identity")}),j=g((e,t)=>{P();var r=$();t.exports={create:function(e,t){return{parse:function(){return r.parse(e,t)}}}}}),q=g((e,t)=>{P();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,i=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,s=/^-?infinity$/;function a(e){var t=n.exec(e);if(t){var r=parseInt(t[1],10);t[4]&&(r=l(r));var i=parseInt(t[2],10)-1,s=t[3],a=new Date(r,i,s);return u(r)&&a.setFullYear(r),a}}function o(e){if(e.endsWith("+00"))return 0;var t=i.exec(e.split(" ")[1]);if(t){var r=t[1];return"Z"===r?0:(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*("-"===r?-1:1)*1e3}}function l(e){return-(e-1)}function u(e){return e>=0&&e<100}t.exports=f(function(e){if(s.test(e))return Number(e.replace("i","I"));var t=r.exec(e);if(!t)return a(e)||null;var n=!!t[8],i=parseInt(t[1],10);n&&(i=l(i));var c=parseInt(t[2],10)-1,h=t[3],d=parseInt(t[4],10),f=parseInt(t[5],10),p=parseInt(t[6],10),g=t[7];g=g?1e3*parseFloat(g):0;var m,y=o(e);return null!=y?(m=new Date(Date.UTC(i,c,h,d,f,p,g)),u(i)&&m.setUTCFullYear(i),0!==y&&m.setTime(m.getTime()-y)):(m=new Date(i,c,h,d,f,p,g),u(i)&&m.setFullYear(i)),m},"parseDate"),f(a,"getDate"),f(o,"timeZoneOffset"),f(l,"bcYearToNegativeYear"),f(u,"is0To99")}),F=g((e,t)=>{P(),t.exports=n;var r=Object.prototype.hasOwnProperty;function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}f(n,"extend")}),Q=g((e,t)=>{P();var r=F();function n(e){if(!(this instanceof n))return new n(e);r(this,p(e))}t.exports=n,f(n,"PostgresInterval");var i=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var e=i.filter(this.hasOwnProperty,this);return this.milliseconds&&0>e.indexOf("seconds")&&e.push("seconds"),0===e.length?"0":e.map(function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e},this).join(" ")};var s={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},a=["years","months","days"],o=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){return"P"+a.map(e,this).join("")+"T"+o.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+s[e]}};var l="([+-]?\\d+)",u=new RegExp([l+"\\s+years?",l+"\\s+mons?",l+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(e){return"("+e+")?"}).join("\\s*")),c={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},h=["hours","minutes","seconds","milliseconds"];function d(e){return parseInt(e+"000000".slice(e.length),10)/1e3}function p(e){if(!e)return{};var t=u.exec(e),r="-"===t[8];return Object.keys(c).reduce(function(e,n){var i=t[c[n]];return i&&(i="milliseconds"===n?d(i):parseInt(i,10))&&(r&&~h.indexOf(n)&&(i*=-1),e[n]=i),e},{})}f(d,"parseMilliseconds"),f(p,"parse")}),z=g((e,t)=>{P(),t.exports=f(function(e){if(/^\\x/.test(e))return new i(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<e.length&&"\\"===e[r+n];)n++;for(var s=0;s<Math.floor(n/2);++s)t+="\\";r+=2*Math.floor(n/2)}return new i(t,"binary")},"parseBytea")}),H=g((e,t)=>{P();var r=$(),n=j(),i=q(),s=Q(),a=z();function o(e){return f(function(t){return null===t?t:e(t)},"nullAllowed")}function l(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function u(e){return e?r.parse(e,l):null}function c(e){return parseInt(e,10)}function h(e){return e?r.parse(e,o(c)):null}function d(e){return e?r.parse(e,o(function(e){return S(e).trim()})):null}f(o,"allowNull"),f(l,"parseBool"),f(u,"parseBoolArray"),f(c,"parseBaseTenInt"),f(h,"parseIntegerArray"),f(d,"parseBigIntegerArray");var p=f(function(e){return e?n.create(e,function(e){return null!==e&&(e=E(e)),e}).parse():null},"parsePointArray"),g=f(function(e){return e?n.create(e,function(e){return null!==e&&(e=parseFloat(e)),e}).parse():null},"parseFloatArray"),m=f(function(e){return e?n.create(e).parse():null},"parseStringArray"),y=f(function(e){return e?n.create(e,function(e){return null!==e&&(e=i(e)),e}).parse():null},"parseDateArray"),v=f(function(e){return e?n.create(e,function(e){return null!==e&&(e=s(e)),e}).parse():null},"parseIntervalArray"),b=f(function(e){return e?r.parse(e,o(a)):null},"parseByteAArray"),w=f(function(e){return parseInt(e,10)},"parseInteger"),S=f(function(e){var t=String(e);return/^\d+$/.test(t)?t:e},"parseBigInteger"),_=f(function(e){return e?r.parse(e,o(JSON.parse)):null},"parseJsonArray"),E=f(function(e){return"("!==e[0]?null:{x:parseFloat((e=e.substring(1,e.length-1).split(","))[0]),y:parseFloat(e[1])}},"parsePoint"),C=f(function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++){if(n||(t+=e[i]),")"===e[i]){n=!0;continue}n&&","!==e[i]&&(r+=e[i])}var s=E(t);return s.radius=parseFloat(r),s},"parseCircle"),T=f(function(e){e(20,S),e(21,w),e(23,w),e(26,w),e(700,parseFloat),e(701,parseFloat),e(16,l),e(1082,i),e(1114,i),e(1184,i),e(600,E),e(651,m),e(718,C),e(1e3,u),e(1001,b),e(1005,h),e(1007,h),e(1028,h),e(1016,d),e(1017,p),e(1021,g),e(1022,g),e(1231,g),e(1014,m),e(1015,m),e(1008,m),e(1009,m),e(1040,m),e(1041,m),e(1115,y),e(1182,y),e(1185,y),e(1186,s),e(1187,v),e(17,a),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,_),e(3807,_),e(3907,m),e(2951,m),e(791,m),e(1183,m),e(1270,m)},"init");t.exports={init:T}}),V=g((e,t)=>{function r(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(0===r),r=~r+1>>>0,n="-");var i,s,a,o,l,u,c="";if(i=t%1e6,t=t/1e6>>>0,r=(s=4294967296*i+r)/1e6>>>0,a=""+(s-1e6*r),0===r&&0===t)return n+a+c;for(o="",l=6-a.length,u=0;u<l;u++)o+="0";if(c=o+a+c,i=t%1e6,t=t/1e6>>>0,r=(s=4294967296*i+r)/1e6>>>0,a=""+(s-1e6*r),0===r&&0===t)return n+a+c;for(o="",l=6-a.length,u=0;u<l;u++)o+="0";if(c=o+a+c,i=t%1e6,t=t/1e6>>>0,r=(s=4294967296*i+r)/1e6>>>0,a=""+(s-1e6*r),0===r&&0===t)return n+a+c;for(o="",l=6-a.length,u=0;u<l;u++)o+="0";return c=o+a+c,n+(a=""+(s=4294967296*(i=t%1e6)+r)%1e6)+c}P(),f(r,"readInt8"),t.exports=r}),K=g((e,t)=>{P();var r=V(),n=f(function(e,t,r,n,i){r=r||0,n=n||!1,i=i||function(e,t,r){return e*Math.pow(2,r)+t};var s=r>>3,a=f(function(e){return n?255&~e:e},"inv"),o=255,l=8-r%8;t<l&&(o=255<<8-t&255,l=t),r&&(o>>=r%8);var u=0;r%8+t>=8&&(u=i(0,a(e[s])&o,l));for(var c=t+r>>3,h=s+1;h<c;h++)u=i(u,a(e[h]),8);var d=(t+r)%8;return d>0&&(u=i(u,a(e[c])>>8-d,d)),u},"parseBits"),i=f(function(e,t,r){var i=Math.pow(2,r-1)-1,s=n(e,1),a=n(e,r,1);if(0===a)return 0;var o=1,l=n(e,t,r+1,!1,f(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)o/=2,(t&1<<r-n)>0&&(e+=o);return e},"parsePrecisionBits"));return a==Math.pow(2,r+1)-1?0===l?0===s?1/0:-1/0:NaN:(0===s?1:-1)*Math.pow(2,a-i)*l},"parseFloatFromBits"),s=f(function(e){return 1==n(e,1)?-1*(n(e,15,1,!0)+1):n(e,15,1)},"parseInt16"),a=f(function(e){return 1==n(e,1)?-1*(n(e,31,1,!0)+1):n(e,31,1)},"parseInt32"),o=f(function(e){return i(e,23,8)},"parseFloat32"),l=f(function(e){return i(e,52,11)},"parseFloat64"),u=f(function(e){var t=n(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,n(e,16,16)),i=0,s=n(e,16),a=0;a<s;a++)i+=n(e,16,64+16*a)*r,r/=1e4;var o=Math.pow(10,n(e,16,48));return(0===t?1:-1)*Math.round(i*o)/o},"parseNumeric"),c=f(function(e,t){var r=n(t,1),i=n(t,63,1),s=new Date((0===r?1:-1)*i/1e3+9466848e5);return e||s.setTime(s.getTime()+6e4*s.getTimezoneOffset()),s.usec=i%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(e){this.usec=e},s.getUTCMicroSeconds=function(){return this.usec},s},"parseDate"),h=f(function(e){for(var t=n(e,32),r=(n(e,32,32),n(e,32,64)),i=96,s=[],a=0;a<t;a++)s[a]=n(e,32,i),i+=64;var o=f(function(t){var r,s=n(e,32,i);return(i+=32,4294967295==s)?null:23==t||20==t?(r=n(e,8*s,i),i+=8*s,r):25==t?e.toString(this.encoding,i>>3,(i+=s<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},"parseElement"),l=f(function(e,t){var r,n=[];if(e.length>1){var i=e.shift();for(r=0;r<i;r++)n[r]=l(e,t);e.unshift(i)}else for(r=0;r<e[0];r++)n[r]=o(t);return n},"parse");return l(s,r)},"parseArray"),d=f(function(e){return e.toString("utf8")},"parseText"),p=f(function(e){return null===e?null:n(e,8)>0},"parseBool"),g=f(function(e){e(20,r),e(21,s),e(23,a),e(26,a),e(1700,u),e(700,o),e(701,l),e(16,p),e(1114,c.bind(null,!1)),e(1184,c.bind(null,!0)),e(1e3,h),e(1007,h),e(1016,h),e(1008,h),e(1009,h),e(25,d)},"init");t.exports={init:g}}),G=g((e,t)=>{P(),t.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),W=g(e=>{P();var t=H(),r=K(),n=j(),i=G();e.getTypeParser=o,e.setTypeParser=l,e.arrayParser=n,e.builtins=i;var s={text:{},binary:{}};function a(e){return String(e)}function o(e,t){return s[t=t||"text"]&&s[t][e]||a}function l(e,t,r){"function"==typeof t&&(r=t,t="text"),s[t][e]=r}f(a,"noParse"),f(o,"getTypeParser"),f(l,"setTypeParser"),t.init(function(e,t){s.text[e]=t}),r.init(function(e,t){s.binary[e]=t})}),J=g((e,t)=>{P(),t.exports={host:"localhost",user:"win32"===s.platform?s.env.USERNAME:s.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=W(),n=r.getTypeParser(20,"text"),i=r.getTypeParser(1016,"text");t.exports.__defineSetter__("parseInt8",function(e){r.setTypeParser(20,"text",e?r.getTypeParser(23,"text"):n),r.setTypeParser(1016,"text",e?r.getTypeParser(1007,"text"):i)})}),Y=g((e,t)=>{P();var r=(B(),b(M)),n=J();function s(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function a(e){for(var t="{",r=0;r<e.length;r++)r>0&&(t+=","),null===e[r]||typeof e[r]>"u"?t+="NULL":Array.isArray(e[r])?t+=a(e[r]):e[r]instanceof i?t+="\\\\x"+e[r].toString("hex"):t+=s(o(e[r]));return t+"}"}f(s,"escapeElement"),f(a,"arrayString");var o=f(function(e,t){if(null==e)return null;if(e instanceof i)return e;if(ArrayBuffer.isView(e)){var r=i.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?n.parseInputDatesAsUTC?h(e):c(e):Array.isArray(e)?a(e):"object"==typeof e?l(e,t):e.toString()},"prepareValue");function l(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),o(e.toPostgres(o),t)}return JSON.stringify(e)}function u(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function c(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var i=u(r,4)+"-"+u(e.getMonth()+1,2)+"-"+u(e.getDate(),2)+"T"+u(e.getHours(),2)+":"+u(e.getMinutes(),2)+":"+u(e.getSeconds(),2)+"."+u(e.getMilliseconds(),3);return t<0?(i+="-",t*=-1):i+="+",i+=u(Math.floor(t/60),2)+":"+u(t%60,2),n&&(i+=" BC"),i}function h(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var n=u(t,4)+"-"+u(e.getUTCMonth()+1,2)+"-"+u(e.getUTCDate(),2)+"T"+u(e.getUTCHours(),2)+":"+u(e.getUTCMinutes(),2)+":"+u(e.getUTCSeconds(),2)+"."+u(e.getUTCMilliseconds(),3);return n+="+00:00",r&&(n+=" BC"),n}function d(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e}f(l,"prepareObject"),f(u,"pad"),f(c,"dateToString"),f(h,"dateToStringUTC"),f(d,"normalizeQueryConfig");var p=f(function(e){return r.createHash("md5").update(e,"utf-8").digest("hex")},"md5"),g=f(function(e,t,r){var n=p(t+e);return"md5"+p(i.concat([i.from(n),r]))},"postgresMd5PasswordHash");t.exports={prepareValue:f(function(e){return o(e)},"prepareValueWrapper"),normalizeQueryConfig:d,postgresMd5PasswordHash:g,md5:p}}),X=g((e,t)=>{P();var r=(B(),b(M));function n(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let t=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}}function s(e,t,r){if("SASLInitialResponse"!==e.message)throw Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof t)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof r)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=c(r);if(n.nonce.startsWith(e.clientNonce)){if(n.nonce.length===e.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var s=m(t,i.from(n.salt,"base64"),n.iteration),a=g(s,"Client Key"),o=p(a),l="n=*,r="+e.clientNonce,u="r="+n.nonce+",s="+n.salt+",i="+n.iteration,h="c=biws,r="+n.nonce,f=l+","+u+","+h,y=d(a,g(o,f)).toString("base64"),v=g(s,"Server Key"),b=g(v,f);e.message="SASLResponse",e.serverSignature=b.toString("base64"),e.response=h+",p="+y}function a(e,t){if("SASLResponse"!==e.message)throw Error("SASL: Last message was not SASLResponse");if("string"!=typeof t)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=h(t);if(r!==e.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function o(e){if("string"!=typeof e)throw TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function l(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function u(e){if("string"!=typeof e)throw TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]}))}function c(e){let t=u(e),r=t.get("r");if(r){if(!o(r))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=t.get("s");if(n){if(!l(n))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=t.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:r,salt:n,iteration:parseInt(i,10)}}function h(e){let t=u(e).get("v");if(t){if(!l(t))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:t}}function d(e,t){if(!i.isBuffer(e))throw TypeError("first argument must be a Buffer");if(!i.isBuffer(t))throw TypeError("second argument must be a Buffer");if(e.length!==t.length)throw Error("Buffer lengths must match");if(0===e.length)throw Error("Buffers cannot be empty");return i.from(e.map((r,n)=>e[n]^t[n]))}function p(e){return r.createHash("sha256").update(e).digest()}function g(e,t){return r.createHmac("sha256",e).update(t).digest()}function m(e,t,r){for(var n=g(e,i.concat([t,i.from([0,0,0,1])])),s=n,a=0;a<r-1;a++)s=d(s,n=g(e,n));return s}f(n,"startSession"),f(s,"continueSession"),f(a,"finalizeSession"),f(o,"isPrintableChars"),f(l,"isBase64"),f(u,"parseAttributePairs"),f(c,"parseServerFirstMessage"),f(h,"parseServerFinalMessage"),f(d,"xorBuffers"),f(p,"sha256"),f(g,"hmacSha256"),f(m,"Hi"),t.exports={startSession:n,continueSession:s,finalizeSession:a}}),Z={};function ee(...e){return e.join("/")}m(Z,{join:()=>ee});var et=p(()=>{P(),f(ee,"join")}),er={};function en(e,t){t(Error("No filesystem"))}m(er,{stat:()=>en});var ei=p(()=>{P(),f(en,"stat")}),es={};m(es,{default:()=>ea});var ea,eo=p(()=>{P(),ea={}}),el={};m(el,{StringDecoder:()=>ec});var eu,ec,eh=p(()=>{P(),f(eu=class{constructor(e){w(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},"StringDecoder"),ec=eu}),ed=g((e,t)=>{P();var{Transform:r}=(eo(),b(es)),{StringDecoder:n}=(eh(),b(el)),i=Symbol("last"),s=Symbol("decoder");function a(e,t,r){let n;if(this.overflow){if(1===(n=this[s].write(e).split(this.matcher)).length)return r();n.shift(),this.overflow=!1}else this[i]+=this[s].write(e),n=this[i].split(this.matcher);this[i]=n.pop();for(let e=0;e<n.length;e++)try{l(this,this.mapper(n[e]))}catch(e){return r(e)}if(this.overflow=this[i].length>this.maxLength,this.overflow&&!this.skipOverflow){r(Error("maximum buffer reached"));return}r()}function o(e){if(this[i]+=this[s].end(),this[i])try{l(this,this.mapper(this[i]))}catch(t){return e(t)}e()}function l(e,t){void 0!==t&&e.push(t)}function u(e){return e}function c(e,t,l){switch(e=e||/\r?\n/,t=t||u,l=l||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||e[Symbol.split]||(l=e,e=/\r?\n/);break;case 2:"function"==typeof e?(l=t,t=e,e=/\r?\n/):"object"==typeof t&&(l=t,t=u)}(l=Object.assign({},l)).autoDestroy=!0,l.transform=a,l.flush=o,l.readableObjectMode=!0;let c=new r(l);return c[i]="",c[s]=new n("utf8"),c.matcher=e,c.mapper=t,c.maxLength=l.maxLength,c.skipOverflow=l.skipOverflow||!1,c.overflow=!1,c._destroy=function(e,t){this._writableState.errorEmitted=!1,t(e)},c}f(a,"transform"),f(o,"flush"),f(l,"push"),f(u,"noop"),f(c,"split"),t.exports=c}),ef=g((e,t)=>{P();var r=(et(),b(Z)),n=(eo(),b(es)).Stream,i=ed(),a=(x(),b(T)),o="win32"===s.platform,l=s.stderr;function u(e){return(61440&e)==32768}f(u,"isRegFile");var c=["host","port","database","user","password"],h=c.length,d=c[h-1];function p(){if(l instanceof n&&!0===l.writable){var e=Array.prototype.slice.call(arguments).concat(`
`);l.write(a.format.apply(a,e))}}f(p,"warn"),Object.defineProperty(t.exports,"isWin",{get:function(){return o},set:function(e){o=e}}),t.exports.warnTo=function(e){var t=l;return l=e,t},t.exports.getFileName=function(e){var t=e||s.env;return t.PGPASSFILE||(o?r.join(t.APPDATA||"./","postgresql","pgpass.conf"):r.join(t.HOME||"./",".pgpass"))},t.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(s.env,"PGPASSWORD")&&(!!o||(t=t||"<unkn>",u(e.mode)?!(63&e.mode)||(p('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):(p('WARNING: password file "%s" is not a plain file',t),!1)))};var g=t.exports.match=function(e,t){return c.slice(0,-1).reduce(function(r,n,i){return 1==i&&Number(e[n]||5432)===Number(t[n])?r&&!0:r&&("*"===t[n]||t[n]===e[n])},!0)};t.exports.getPassword=function(e,t,r){var n,s=t.pipe(i());function a(t){var r=m(t);r&&y(r)&&g(e,r)&&(n=r[d],s.end())}f(a,"onLine");var o=f(function(){t.destroy(),r(n)},"onEnd"),l=f(function(e){t.destroy(),p("WARNING: error on reading file: %s",e),r(void 0)},"onErr");t.on("error",l),s.on("data",a).on("end",o).on("error",l)};var m=t.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,a={},o=f(function(t,r,n){var i=e.substring(r,n);Object.hasOwnProperty.call(s.env,"PGPASS_NO_DEESCAPE")||(i=i.replace(/\\([:\\])/g,"$1")),a[c[t]]=i},"addToObj"),l=0;l<e.length-1;l+=1){if(t=e.charAt(l+1),r=e.charAt(l),n==h-1){o(n,i);break}l>=0&&":"==t&&"\\"!==r&&(o(n,i,l+1),i=l+2,n+=1)}return a=Object.keys(a).length===h?a:null},y=t.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||isFinite(e=Number(e))&&e>0&&e<9007199254740992&&Math.floor(e)===e},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<c.length;r+=1)if(!(0,t[r])(e[c[r]]||""))return!1;return!0}}),ep=g((e,t)=>{P(),et(),b(Z);var r=(ei(),b(er)),n=ef();t.exports=function(e,t){var i=n.getFileName();r.stat(i,function(s,a){if(s||!n.usePgPass(a,i))return t(void 0);var o=r.createReadStream(i);n.getPassword(e,o,t)})},t.exports.warnTo=n.warnTo}),eg=g((e,t)=>{P();var r=W();function n(e){this._types=e||r,this.text={},this.binary={}}f(n,"TypeOverrides"),n.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},n.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},t.exports=n}),em={};m(em,{default:()=>ey});var ey,ev=p(()=>{P(),ey={}}),eb={};function ew(e,t=!1){let{protocol:r}=new URL(e),n="http:"+e.substring(r.length),{username:i,password:s,host:a,hostname:o,port:l,pathname:u,search:c,searchParams:h,hash:d}=new URL(n),f=i+":"+(s=decodeURIComponent(s)),p=t?Object.fromEntries(h.entries()):c;return{href:e,protocol:r,auth:f,username:i,password:s,host:a,hostname:o,port:l,pathname:u,search:c,query:p,hash:d}}m(eb,{parse:()=>ew});var eS=p(()=>{P(),f(ew,"parse")}),e_=g((e,t)=>{P();var r=(eS(),b(eb)),n=(ei(),b(er));function i(e){if("/"===e.charAt(0)){var t=e.split(" ");return{host:t[0],database:t[1]}}var i=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),t=i.query;for(var s in t)Array.isArray(t[s])&&(t[s]=t[s][t[s].length-1]);var a=(i.auth||":").split(":");if(t.user=a[0],t.password=a.splice(1).join(":"),t.port=i.port,"socket:"==i.protocol)return t.host=decodeURI(i.pathname),t.database=i.query.db,t.client_encoding=i.query.encoding,t;t.host||(t.host=i.hostname);var o=i.pathname;if(!t.host&&o&&/^%2f/i.test(o)){var l=o.split("/");t.host=decodeURIComponent(l[0]),o=l.splice(1).join("/")}switch(o&&"/"===o.charAt(0)&&(o=o.slice(1)||null),t.database=o&&decodeURI(o),("true"===t.ssl||"1"===t.ssl)&&(t.ssl=!0),"0"===t.ssl&&(t.ssl=!1),(t.sslcert||t.sslkey||t.sslrootcert||t.sslmode)&&(t.ssl={}),t.sslcert&&(t.ssl.cert=n.readFileSync(t.sslcert).toString()),t.sslkey&&(t.ssl.key=n.readFileSync(t.sslkey).toString()),t.sslrootcert&&(t.ssl.ca=n.readFileSync(t.sslrootcert).toString()),t.sslmode){case"disable":t.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":t.ssl.rejectUnauthorized=!1}return t}f(i,"parse"),t.exports=i,i.parse=i}),eE=g((e,t)=>{P();var r=(ev(),b(em)),n=J(),i=e_().parse,a=f(function(e,t,r){return void 0===r?r=s.env["PG"+e.toUpperCase()]:!1===r||(r=s.env[r]),t[e]||r||n[e]},"val"),o=f(function(){switch(s.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),l=f(function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),u=f(function(e,t,r){var n=t[r];null!=n&&e.push(r+"="+l(n))},"add"),c=class{constructor(e){(e="string"==typeof e?i(e):e||{}).connectionString&&(e=Object.assign({},e,i(e.connectionString))),this.user=a("user",e),this.database=a("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(a("port",e),10),this.host=a("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:a("password",e)}),this.binary=a("binary",e),this.options=a("options",e),this.ssl=typeof e.ssl>"u"?o():e.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=a("client_encoding",e),this.replication=a("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=a("application_name",e,"PGAPPNAME"),this.fallback_application_name=a("fallback_application_name",e,!1),this.statement_timeout=a("statement_timeout",e,!1),this.lock_timeout=a("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=a("idle_in_transaction_session_timeout",e,!1),this.query_timeout=a("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=s.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var t=[];u(t,this,"user"),u(t,this,"password"),u(t,this,"port"),u(t,this,"application_name"),u(t,this,"fallback_application_name"),u(t,this,"connect_timeout"),u(t,this,"options");var n="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(u(t,n,"sslmode"),u(t,n,"sslca"),u(t,n,"sslkey"),u(t,n,"sslcert"),u(t,n,"sslrootcert"),this.database&&t.push("dbname="+l(this.database)),this.replication&&t.push("replication="+l(this.replication)),this.host&&t.push("host="+l(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+l(this.client_encoding)),r.lookup(this.host,function(r,n){return r?e(r,null):(t.push("hostaddr="+l(n)),e(null,t.join(" ")))})}};f(c,"ConnectionParameters"),t.exports=c}),eP=g((e,t)=>{P();var r=W(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,i=class{constructor(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var t;(t=e.text?n.exec(e.text):n.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))}_parseRowAsArray(e){for(var t=Array(e.length),r=0,n=e.length;r<n;r++){var i=e[r];null!==i?t[r]=this._parsers[r](i):t[r]=null}return t}parseRow(e){for(var t={},r=0,n=e.length;r<n;r++){var i=e[r],s=this.fields[r].name;null!==i?t[s]=this._parsers[r](i):t[s]=null}return t}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=Array(e.length));for(var t=0;t<e.length;t++){var n=e[t];this._types?this._parsers[t]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[t]=r.getTypeParser(n.dataTypeID,n.format||"text")}}};f(i,"Result"),t.exports=i}),eC=g((e,t)=>{P();var{EventEmitter:r}=C(),n=eP(),i=Y(),a=class extends r{constructor(e,t,r){super(),e=i.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,s.domain&&e.callback&&(this.callback=s.domain.bind(e.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){this._canceledDueToError=e;return}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&t.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,t){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(e){s.nextTick(()=>{throw e})}this.emit("end",this._results)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return Error("A query must have either text or a name. Supplying neither is unsupported.");let t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?Error(`Prepared statements must be \
unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t}),t?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:i.prepareValue})}catch(t){this.handleError(t,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}};f(a,"Query"),t.exports=a}),eT={};function eA(e){return 0}m(eT,{Socket:()=>eI,isIP:()=>eA});var ex,eO,eI,eR=p(()=>{P(),ex=v(C(),1),f(eA,"isIP"),eO=class e extends ex.EventEmitter{constructor(){super(...arguments),w(this,"opts",{}),w(this,"connecting",!1),w(this,"pending",!0),w(this,"writable",!0),w(this,"encrypted",!1),w(this,"authorized",!1),w(this,"destroyed",!1),w(this,"ws",null),w(this,"writeBuffer"),w(this,"tlsState",0),w(this,"tlsRead"),w(this,"tlsWrite")}static get poolQueryViaFetch(){return e.opts.poolQueryViaFetch??e.defaults.poolQueryViaFetch}static set poolQueryViaFetch(t){e.opts.poolQueryViaFetch=t}static get fetchEndpoint(){return e.opts.fetchEndpoint??e.defaults.fetchEndpoint}static set fetchEndpoint(t){e.opts.fetchEndpoint=t}static get fetchConnectionCache(){return e.opts.fetchConnectionCache??e.defaults.fetchConnectionCache}static set fetchConnectionCache(t){e.opts.fetchConnectionCache=t}static get fetchFunction(){return e.opts.fetchFunction??e.defaults.fetchFunction}static set fetchFunction(t){e.opts.fetchFunction=t}static get webSocketConstructor(){return e.opts.webSocketConstructor??e.defaults.webSocketConstructor}static set webSocketConstructor(t){e.opts.webSocketConstructor=t}get webSocketConstructor(){return this.opts.webSocketConstructor??e.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return e.opts.wsProxy??e.defaults.wsProxy}static set wsProxy(t){e.opts.wsProxy=t}get wsProxy(){return this.opts.wsProxy??e.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return e.opts.coalesceWrites??e.defaults.coalesceWrites}static set coalesceWrites(t){e.opts.coalesceWrites=t}get coalesceWrites(){return this.opts.coalesceWrites??e.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return e.opts.useSecureWebSocket??e.defaults.useSecureWebSocket}static set useSecureWebSocket(t){e.opts.useSecureWebSocket=t}get useSecureWebSocket(){return this.opts.useSecureWebSocket??e.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return e.opts.forceDisablePgSSL??e.defaults.forceDisablePgSSL}static set forceDisablePgSSL(t){e.opts.forceDisablePgSSL=t}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??e.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return e.opts.disableSNI??e.defaults.disableSNI}static set disableSNI(t){e.opts.disableSNI=t}get disableSNI(){return this.opts.disableSNI??e.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return e.opts.pipelineConnect??e.defaults.pipelineConnect}static set pipelineConnect(t){e.opts.pipelineConnect=t}get pipelineConnect(){return this.opts.pipelineConnect??e.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return e.opts.subtls??e.defaults.subtls}static set subtls(t){e.opts.subtls=t}get subtls(){return this.opts.subtls??e.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return e.opts.pipelineTLS??e.defaults.pipelineTLS}static set pipelineTLS(t){e.opts.pipelineTLS=t}get pipelineTLS(){return this.opts.pipelineTLS??e.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return e.opts.rootCerts??e.defaults.rootCerts}static set rootCerts(t){e.opts.rootCerts=t}get rootCerts(){return this.opts.rootCerts??e.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let r=this.wsProxy;if(void 0===r)throw Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return"function"==typeof r?r(e,t):`${r}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,r){this.connecting=!0,r&&this.once("connect",r);let n=f(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),s=f((e,t=!1)=>{e.binaryType="arraybuffer",e.addEventListener("error",e=>{this.emit("error",e),this.emit("close")}),e.addEventListener("message",e=>{if(0===this.tlsState){let t=i.from(e.data);this.emit("data",t)}}),e.addEventListener("close",()=>{this.emit("close")}),t?n():e.addEventListener("open",n)},"configureWebSocket"),a;try{a=this.wsProxyAddrForHost(t,"string"==typeof e?parseInt(e,10):e)}catch(e){this.emit("error",e),this.emit("close");return}try{let e=(this.useSecureWebSocket?"wss:":"ws:")+"//"+a;if(void 0!==this.webSocketConstructor)this.ws=new this.webSocketConstructor(e),s(this.ws);else try{this.ws=new WebSocket(e),s(this.ws)}catch{this.ws=new __unstable_WebSocket(e),s(this.ws)}}catch(t){let e=(this.useSecureWebSocket?"https:":"http:")+"//"+a;fetch(e,{headers:{Upgrade:"websocket"}}).then(e=>{if(this.ws=e.webSocket,null==this.ws)throw t;this.ws.accept(),s(this.ws,!0)}).catch(e=>{this.emit("error",Error(`All attempts to open a WebSocket to\
 connect to the database failed. Please refer to https://github.com/neondatabase\
/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined\
. Details: ${e.message}`)),this.emit("close")})}}async startTls(e){if(void 0===this.subtls)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=this.subtls.TrustedCert.fromPEM(this.rootCerts),r=new this.subtls.WebSocketReadQueue(this.ws),n=r.read.bind(r),i=this.rawWrite.bind(this),[s,a]=await this.subtls.startTls(e,t,n,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=s,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(void 0===e)break;{let t=i.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(void 0===this.writeBuffer)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",r=e=>{}){return 0===e.length?r():("string"==typeof e&&(e=i.from(e,t)),0===this.tlsState?(this.rawWrite(e),r()):1===this.tlsState?this.once("secureConnection",()=>{this.write(e,t,r)}):(this.tlsWrite(e),r())),!0}end(e=i.alloc(0),t="utf8",r=()=>{}){return this.write(e,t,()=>{this.ws.close(),r()}),this}destroy(){return this.destroyed=!0,this.end()}},f(eO,"Socket"),w(eO,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:e=>"https://"+e+"/sql",fetchConnectionCache:!1,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:e=>e+"/v2",useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),w(eO,"opts",{}),eI=eO}),eN=g(e=>{P(),Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeMessage=e.DataRowMessage=e.CommandCompleteMessage=e.ReadyForQueryMessage=e.NotificationResponseMessage=e.BackendKeyDataMessage=e.AuthenticationMD5Password=e.ParameterStatusMessage=e.ParameterDescriptionMessage=e.RowDescriptionMessage=e.Field=e.CopyResponse=e.CopyDataMessage=e.DatabaseError=e.copyDone=e.emptyQuery=e.replicationStart=e.portalSuspended=e.noData=e.closeComplete=e.bindComplete=e.parseComplete=void 0,e.parseComplete={name:"parseComplete",length:5},e.bindComplete={name:"bindComplete",length:5},e.closeComplete={name:"closeComplete",length:5},e.noData={name:"noData",length:5},e.portalSuspended={name:"portalSuspended",length:5},e.replicationStart={name:"replicationStart",length:4},e.emptyQuery={name:"emptyQuery",length:4},e.copyDone={name:"copyDone",length:4};var t=class extends Error{constructor(e,t,r){super(e),this.length=t,this.name=r}};f(t,"DatabaseError"),e.DatabaseError=t;var r=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};f(r,"CopyDataMessage"),e.CopyDataMessage=r;var n=class{constructor(e,t,r,n){this.length=e,this.name=t,this.binary=r,this.columnTypes=Array(n)}};f(n,"CopyResponse"),e.CopyResponse=n;var i=class{constructor(e,t,r,n,i,s,a){this.name=e,this.tableID=t,this.columnID=r,this.dataTypeID=n,this.dataTypeSize=i,this.dataTypeModifier=s,this.format=a}};f(i,"Field"),e.Field=i;var s=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=Array(this.fieldCount)}};f(s,"RowDescriptionMessage"),e.RowDescriptionMessage=s;var a=class{constructor(e,t){this.length=e,this.parameterCount=t,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};f(a,"ParameterDescriptionMessage"),e.ParameterDescriptionMessage=a;var o=class{constructor(e,t,r){this.length=e,this.parameterName=t,this.parameterValue=r,this.name="parameterStatus"}};f(o,"ParameterStatusMessage"),e.ParameterStatusMessage=o;var l=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};f(l,"AuthenticationMD5Password"),e.AuthenticationMD5Password=l;var u=class{constructor(e,t,r){this.length=e,this.processID=t,this.secretKey=r,this.name="backendKeyData"}};f(u,"BackendKeyDataMessage"),e.BackendKeyDataMessage=u;var c=class{constructor(e,t,r,n){this.length=e,this.processId=t,this.channel=r,this.payload=n,this.name="notification"}};f(c,"NotificationResponseMessage"),e.NotificationResponseMessage=c;var h=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};f(h,"ReadyForQueryMessage"),e.ReadyForQueryMessage=h;var d=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};f(d,"CommandCompleteMessage"),e.CommandCompleteMessage=d;var p=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};f(p,"DataRowMessage"),e.DataRowMessage=p;var g=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}};f(g,"NoticeMessage"),e.NoticeMessage=g}),ek=g(e=>{P(),Object.defineProperty(e,"__esModule",{value:!0}),e.Writer=void 0;var t=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=i.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=i.allocUnsafe(r),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=i.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var t=i.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=i.allocUnsafe(this.size),t}};f(t,"Writer"),e.Writer=t}),eM=g(e=>{P(),Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;var t=ek(),r=new t.Writer,n=f(e=>{for(let t of(r.addInt16(3).addInt16(0),Object.keys(e)))r.addCString(t).addCString(e[t]);r.addCString("client_encoding").addCString("UTF8");var n=r.addCString("").flush(),i=n.length+4;return new t.Writer().addInt32(i).add(n).flush()},"startup"),s=f(()=>{let e=i.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},"requestSsl"),a=f(e=>r.addCString(e).flush(112),"password"),o=f(function(e,t){return r.addCString(e).addInt32(i.byteLength(t)).addString(t),r.flush(112)},"sendSASLInitialResponseMessage"),l=f(function(e){return r.addString(e).flush(112)},"sendSCRAMClientFinalMessage"),u=f(e=>r.addCString(e).flush(81),"query"),c=[],h=f(e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let n=e.types||c;for(var i=n.length,s=r.addCString(t).addCString(e.text).addInt16(i),a=0;a<i;a++)s.addInt32(n[a]);return r.flush(80)},"parse"),d=new t.Writer,p=f(function(e,t){for(let n=0;n<e.length;n++){let s=t?t(e[n],n):e[n];null==s?(r.addInt16(0),d.addInt32(-1)):s instanceof i?(r.addInt16(1),d.addInt32(s.length),d.add(s)):(r.addInt16(0),d.addInt32(i.byteLength(s)),d.addString(s))}},"writeValues"),g=f((e={})=>{let t=e.portal||"",n=e.statement||"",i=e.binary||!1,s=e.values||c,a=s.length;return r.addCString(t).addCString(n),r.addInt16(a),p(s,e.valueMapper),r.addInt16(a),r.add(d.flush()),r.addInt16(i?1:0),r.flush(66)},"bind"),m=i.from([69,0,0,0,9,0,0,0,0,0]),y=f(e=>{if(!e||!e.portal&&!e.rows)return m;let t=e.portal||"",r=e.rows||0,n=i.byteLength(t),s=4+n+1+4,a=i.allocUnsafe(1+s);return a[0]=69,a.writeInt32BE(s,1),a.write(t,5,"utf-8"),a[n+5]=0,a.writeUInt32BE(r,a.length-4),a},"execute"),v=f((e,t)=>{let r=i.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},"cancel"),b=f((e,t)=>{let r=4+i.byteLength(t)+1,n=i.allocUnsafe(1+r);return n[0]=e,n.writeInt32BE(r,1),n.write(t,5,"utf-8"),n[r]=0,n},"cstringMessage"),w=r.addCString("P").flush(68),S=r.addCString("S").flush(68),_=f(e=>e.name?b(68,`${e.type}${e.name||""}`):"P"===e.type?w:S,"describe"),E=f(e=>b(67,`${e.type}${e.name||""}`),"close"),C=f(e=>r.add(e).flush(100),"copyData"),T=f(e=>b(102,e),"copyFail"),A=f(e=>i.from([e,0,0,0,4]),"codeOnlyBuffer"),x=A(72),O=A(83),I=A(88),R=A(99);e.serialize={startup:n,password:a,requestSsl:s,sendSASLInitialResponseMessage:o,sendSCRAMClientFinalMessage:l,query:u,parse:h,bind:g,execute:y,describe:_,close:E,flush:()=>x,sync:()=>O,end:()=>I,copyData:C,copyDone:()=>R,copyFail:T,cancel:v}}),eL=g(e=>{P(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferReader=void 0;var t=i.allocUnsafe(0),r=class{constructor(e=0){this.offset=e,this.buffer=t,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){let e=this.offset,t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}};f(r,"BufferReader"),e.BufferReader=r}),eD={};m(eD,{default:()=>eU});var eU,eB=p(()=>{P(),eU={}}),e$=g(e=>{P();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var r=eN(),n=eL(),s=t((eB(),b(eD))),a=i.allocUnsafe(0),o=class{constructor(e){if(this.buffer=a,this.bufferLength=0,this.bufferOffset=0,this.reader=new n.BufferReader,e?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,t){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,n=this.bufferOffset;for(;n+5<=r;){let e=this.buffer[n],i=this.buffer.readUInt32BE(n+1),s=1+i;if(s+n<=r)t(this.handlePacket(n+5,e,i,this.buffer)),n+=s;else break}n===r?(this.buffer=a,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-n,this.bufferOffset=n)}mergeBuffer(e){if(this.bufferLength>0){let t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let e;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let r=2*this.buffer.byteLength;for(;t>=r;)r*=2;e=i.allocUnsafe(r)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,t,n,i){switch(t){case 50:return r.bindComplete;case 49:return r.parseComplete;case 51:return r.closeComplete;case 110:return r.noData;case 115:return r.portalSuspended;case 99:return r.copyDone;case 87:return r.replicationStart;case 73:return r.emptyQuery;case 68:return this.parseDataRowMessage(e,n,i);case 67:return this.parseCommandCompleteMessage(e,n,i);case 90:return this.parseReadyForQueryMessage(e,n,i);case 65:return this.parseNotificationMessage(e,n,i);case 82:return this.parseAuthenticationResponse(e,n,i);case 83:return this.parseParameterStatusMessage(e,n,i);case 75:return this.parseBackendKeyData(e,n,i);case 69:return this.parseErrorMessage(e,n,i,"error");case 78:return this.parseErrorMessage(e,n,i,"notice");case 84:return this.parseRowDescriptionMessage(e,n,i);case 116:return this.parseParameterDescriptionMessage(e,n,i);case 71:return this.parseCopyInMessage(e,n,i);case 72:return this.parseCopyOutMessage(e,n,i);case 100:return this.parseCopyData(e,n,i);default:s.default.fail(`unknown message code: ${t.toString(16)}`)}}parseReadyForQueryMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.string(1);return new r.ReadyForQueryMessage(t,i)}parseCommandCompleteMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.cstring();return new r.CommandCompleteMessage(t,i)}parseCopyData(e,t,n){let i=n.slice(e,e+(t-4));return new r.CopyDataMessage(t,i)}parseCopyInMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyInResponse")}parseCopyOutMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyOutResponse")}parseCopyMessage(e,t,n,i){this.reader.setBuffer(e,n);let s=0!==this.reader.byte(),a=this.reader.int16(),o=new r.CopyResponse(t,i,s,a);for(let e=0;e<a;e++)o.columnTypes[e]=this.reader.int16();return o}parseNotificationMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s=this.reader.cstring(),a=this.reader.cstring();return new r.NotificationResponseMessage(t,i,s,a)}parseRowDescriptionMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new r.RowDescriptionMessage(t,i);for(let e=0;e<i;e++)s.fields[e]=this.parseField();return s}parseField(){let e=this.reader.cstring(),t=this.reader.int32(),n=this.reader.int16(),i=this.reader.int32(),s=this.reader.int16(),a=this.reader.int32(),o=0===this.reader.int16()?"text":"binary";return new r.Field(e,t,n,i,s,a,o)}parseParameterDescriptionMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new r.ParameterDescriptionMessage(t,i);for(let e=0;e<i;e++)s.dataTypeIDs[e]=this.reader.int32();return s}parseDataRowMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=Array(i);for(let e=0;e<i;e++){let t=this.reader.int32();s[e]=-1===t?null:this.reader.string(t)}return new r.DataRowMessage(t,s)}parseParameterStatusMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.cstring(),s=this.reader.cstring();return new r.ParameterStatusMessage(t,i,s)}parseBackendKeyData(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s=this.reader.int32();return new r.BackendKeyDataMessage(t,i,s)}parseAuthenticationResponse(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s={name:"authenticationOk",length:t};switch(i){case 0:break;case 3:8===s.length&&(s.name="authenticationCleartextPassword");break;case 5:if(12===s.length){s.name="authenticationMD5Password";let e=this.reader.bytes(4);return new r.AuthenticationMD5Password(t,e)}break;case 10:let a;s.name="authenticationSASL",s.mechanisms=[];do(a=this.reader.cstring())&&s.mechanisms.push(a);while(a);break;case 11:s.name="authenticationSASLContinue",s.data=this.reader.string(t-8);break;case 12:s.name="authenticationSASLFinal",s.data=this.reader.string(t-8);break;default:throw Error("Unknown authenticationOk message type "+i)}return s}parseErrorMessage(e,t,n,i){this.reader.setBuffer(e,n);let s={},a=this.reader.string(1);for(;"\x00"!==a;)s[a]=this.reader.cstring(),a=this.reader.string(1);let o=s.M,l="notice"===i?new r.NoticeMessage(t,o):new r.DatabaseError(o,t,i);return l.severity=s.S,l.code=s.C,l.detail=s.D,l.hint=s.H,l.position=s.P,l.internalPosition=s.p,l.internalQuery=s.q,l.where=s.W,l.schema=s.s,l.table=s.t,l.column=s.c,l.dataType=s.d,l.constraint=s.n,l.file=s.F,l.line=s.L,l.routine=s.R,l}};f(o,"Parser"),e.Parser=o}),ej=g(e=>{P(),Object.defineProperty(e,"__esModule",{value:!0}),e.DatabaseError=e.serialize=e.parse=void 0;var t=eN();Object.defineProperty(e,"DatabaseError",{enumerable:!0,get:function(){return t.DatabaseError}});var r=eM();Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return r.serialize}});var n=e$();function i(e,t){let r=new n.Parser;return e.on("data",e=>r.parse(e,t)),new Promise(t=>e.on("end",()=>t()))}f(i,"parse"),e.parse=i}),eq={};function eF({socket:e,servername:t}){return e.startTls(t),e}m(eq,{connect:()=>eF});var eQ=p(()=>{P(),f(eF,"connect")}),ez=g((e,t)=>{P();var r=(eR(),b(eT)),n=C().EventEmitter,{parse:i,serialize:s}=ej(),a=s.flush(),o=s.sync(),l=s.end(),u=class extends n{constructor(e){super(),e=e||{},this.stream=e.stream||new r.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",function(e){"message"===e&&(t._emitMessage=!0)})}connect(e,t){var n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let i=f(function(e){n._ending&&("ECONNRESET"===e.code||"EPIPE"===e.code)||n.emit("error",e)},"reportStreamError");if(this.stream.on("error",i),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(e){switch(e.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",Error("There was an error establishing an SSL connection"))}var s=(eQ(),b(eq));let a={socket:n.stream};!0!==n.ssl&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key)),0===r.isIP(t)&&(a.servername=t);try{n.stream=s.connect(a)}catch(e){return n.emit("error",e)}n.attachListeners(n.stream),n.stream.on("error",i),n.emit("sslconnect")})}attachListeners(e){e.on("end",()=>{this.emit("end")}),i(e,e=>{var t="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(t,e)})}requestSsl(){this.stream.write(s.requestSsl())}startup(e){this.stream.write(s.startup(e))}cancel(e,t){this._send(s.cancel(e,t))}password(e){this._send(s.password(e))}sendSASLInitialResponseMessage(e,t){this._send(s.sendSASLInitialResponseMessage(e,t))}sendSCRAMClientFinalMessage(e){this._send(s.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(s.query(e))}parse(e){this._send(s.parse(e))}bind(e){this._send(s.bind(e))}execute(e){this._send(s.execute(e))}flush(){this.stream.writable&&this.stream.write(a)}sync(){this._ending=!0,this._send(a),this._send(o)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(l,()=>{this.stream.end()})}close(e){this._send(s.close(e))}describe(e){this._send(s.describe(e))}sendCopyFromChunk(e){this._send(s.copyData(e))}endCopyFrom(){this._send(s.copyDone())}sendCopyFail(e){this._send(s.copyFail(e))}};f(u,"Connection"),t.exports=u}),eH=g((e,r)=>{P();var n=C().EventEmitter,i=(x(),b(T),Y()),a=X(),o=ep(),l=eg(),u=eE(),c=eC(),h=J(),d=ez(),p=class extends n{constructor(e){super(),this.connectionParameters=new u(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var r=e||{};this._Promise=r.Promise||t.Promise,this._types=new l(r.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=r.connection||new d({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||h.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let t=f(t=>{s.nextTick(()=>{t.handleError(e,this.connection)})},"enqueueError");this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,r=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let t=Error("Client has already been connected. You cannot reuse a client.");s.nextTick(()=>{e(t)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{r._ending=!0,r.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){t.ssl?r.requestSsl():r.startup(t.getStartupConf())}),r.on("sslconnect",function(){r.startup(t.getStartupConf())}),this._attachListeners(r),r.once("end",()=>{let e=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),s.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let t=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(r=>{if(void 0!==r){if("string"!=typeof r){t.emit("error",TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=r}else this.connectionParameters.password=this.password=null;e()}).catch(e=>{t.emit("error",e)}):null!==this.password?e():o(this.connectionParameters,t=>{void 0!==t&&(this.connectionParameters.password=this.password=t),e()})}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(()=>{let t=i.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)})}_handleAuthSASL(e){this._checkPgPass(()=>{this.saslSession=a.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(e){a.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){a.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let t=this.activeQuery;if(!t){this._handleErrorEvent(e);return}this.activeQuery=null,t.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(t.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){r.cancel(e.processID,e.secretKey)})}else -1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,r){return this._types.setTypeParser(e,t,r)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var t=!1,r="'",n=0;n<e.length;n++){var i=e[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,t=!0):r+=i}return r+="'",!0===t&&(r=" E"+r),r}_pulseQueryQueue(){if(!0===this.readyForQuery){if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&s.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}}query(e,t,r){var n,i,a,o,l;if(null==e)throw TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(a=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(n.callback=n.callback||t)):(a=this.connectionParameters.query_timeout,(n=new c(e,t,r)).callback||(i=new this._Promise((e,t)=>{n.callback=(r,n)=>r?t(r):e(n)}))),a&&(l=n.callback,o=setTimeout(()=>{var e=Error("Query read timeout");s.nextTick(()=>{n.handleError(e,this.connection)}),l(e),n.callback=()=>{};var t=this.queryQueue.indexOf(n);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},a),n.callback=(e,t)=>{clearTimeout(o),l(e,t)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?s.nextTick(()=>{n.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(n),this._pulseQueryQueue()):s.nextTick(()=>{n.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),i}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)}};f(p,"Client"),p.Query=c,r.exports=p}),eV=g((e,n)=>{P();var i=C().EventEmitter,a=f(function(){},"NOOP"),o=f((e,t)=>{let r=e.findIndex(t);return -1===r?void 0:e.splice(r,1)[0]},"removeWhere"),l=class{constructor(e,t,r){this.client=e,this.idleListener=t,this.timeoutId=r}};f(l,"IdleItem");var u=class{constructor(e){this.callback=e}};function c(){throw Error("Release called on client which has already been released to the pool.")}function h(e,t){let r,n;return t?{callback:t,result:void 0}:{callback:f(function(e,t){e?r(e):n(t)},"cb"),result:new e(function(e,t){n=e,r=t}).catch(e=>{throw Error.captureStackTrace(e),e})}}function d(e,t){return f(function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)},"idleListener")}f(u,"PendingItem"),f(c,"throwOnDoubleRelease"),f(h,"promisify"),f(d,"makeIdleListener");var p=class extends i{constructor(e,r){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),null!=e&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||e0().Client,this.Promise=this.options.Promise||t.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let t=this._idle.pop();clearTimeout(t.timeoutId);let r=t.client;r.ref&&r.ref();let n=t.idleListener;return this._acquireClient(r,e,n,!1)}if(!this._isFull())return this.newClient(e);throw Error("unexpected condition")}_remove(e){let t=o(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let t=Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}let t=h(this.Promise,e),r=t.result;if(this._isFull()||this._idle.length){if(this._idle.length&&s.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new u(t.callback)),r;let e=f((e,r,n)=>{clearTimeout(i),t.callback(e,r,n)},"queueCallback"),n=new u(e),i=setTimeout(()=>{o(this._pendingQueue,t=>t.callback===e),n.timedOut=!0,t.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(n),r}return this.newClient(new u(t.callback)),r}newClient(e){let t=new this.Client(this.options);this._clients.push(t);let r=d(this,t);this.log("checking client timeout");let n,i=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(s=>{if(n&&clearTimeout(n),t.on("error",r),s)this.log("client failed to connect",s),this._clients=this._clients.filter(e=>e!==t),i&&(s.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(s,void 0,a);else{if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let e=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(t),-1!==this._idle.findIndex(e=>e.client===t)&&this._acquireClient(t,new u((e,t,r)=>r()),r,!1)},1e3*this.options.maxLifetimeSeconds);e.unref(),t.once("end",()=>clearTimeout(e))}return this._acquireClient(t,e,r,!0)}})}_acquireClient(e,t,r,n){n&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),t.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,r=>{if(r)return e.release(r),t.callback(r,void 0,a);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let r=!1;return n=>{r&&c(),r=!0,this._release(e,t,n)}}_release(e,t,r){let n;if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",r,e),r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses){e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),this._pulseQueue();return}if(this._expired.has(e)){this.log("remove expired client"),this._expired.delete(e),this._remove(e),this._pulseQueue();return}this.options.idleTimeoutMillis&&(n=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&n.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new l(e,t,n)),this._pulseQueue()}query(e,t,n){if("function"==typeof e){let t=h(this.Promise,e);return r(function(){return t.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),t.result}"function"==typeof t&&(n=t,t=void 0);let i=h(this.Promise,n);return n=i.callback,this.connect((r,i)=>{if(r)return n(r);let s=!1,a=f(e=>{s||(s=!0,i.release(e),n(e))},"onError");i.once("error",a),this.log("dispatching query");try{i.query(e,t,(e,t)=>{if(this.log("query dispatched"),i.removeListener("error",a),!s)return s=!0,i.release(e),e?n(e):n(void 0,t)})}catch(e){return i.release(e),n(e)}}),i.result}end(e){if(this.log("ending"),this.ending){let t=Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;let t=h(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,t)=>e+(this._expired.has(t)?1:0),0)}get totalCount(){return this._clients.length}};f(p,"Pool"),n.exports=p}),eK={};m(eK,{default:()=>eG});var eG,eW=p(()=>{P(),eG={}}),eJ=g((e,t)=>{t.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),eY=g((e,t)=>{P();var n=C().EventEmitter,i=(x(),b(T)),a=Y(),o=t.exports=function(e,t,r){n.call(this),e=a.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",(function(e){"row"===e&&(this._emitRowEvents=!0)}).bind(this))};i.inherits(o,n);var l={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};o.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t)e[l[r]||r]=t[r];this.callback?this.callback(e):this.emit("error",e),this.state="error"},o.prototype.then=function(e,t){return this._getPromise().then(e,t)},o.prototype.catch=function(e){return this._getPromise().catch(e)},o.prototype._getPromise=function(){return this._promise||(this._promise=new Promise((function(e,t){this._once("end",e),this._once("error",t)}).bind(this))),this._promise},o.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var n=f(function(n,i,s){if(e.native.arrayMode=!1,r(function(){t.emit("_done")}),n)return t.handleError(n);t._emitRowEvents&&(s.length>1?i.forEach((e,r)=>{e.forEach(e=>{t.emit("row",e,s[r])})}):i.forEach(function(e){t.emit("row",e,s)})),t.state="end",t.emit("end",s),t.callback&&t.callback(null,s)},"after");if(s.domain&&(n=s.domain.bind(n)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var i=(this.values||[]).map(a.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let e=Error(`Pre\
pared statements must be unique - '${this.name}' was used for a different statem\
ent`);return n(e)}return e.native.execute(this.name,i,n)}return e.native.prepare(this.name,this.text,i.length,function(r){return r?n(r):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,i,n))})}if(this.values){if(!Array.isArray(this.values)){let e=Error("Query values must be an array");return n(e)}var o=this.values.map(a.prepareValue);e.native.query(this.text,o,n)}else e.native.query(this.text,n)}}),eX=g((e,r)=>{P();var n=(eW(),b(eK)),i=eg(),a=(eJ(),C().EventEmitter),o=(x(),b(T)),l=eE(),u=eY(),c=r.exports=function(e){a.call(this),e=e||{},this._Promise=e.Promise||t.Promise,this._types=new i(e.types),this.native=new n({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var r=this.connectionParameters=new l(e);this.user=r.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:r.password}),this.database=r.database,this.host=r.host,this.port=r.port,this.namedQueries={}};c.Query=u,o.inherits(c,a),c.prototype._errorAllQueries=function(e){let t=f(t=>{s.nextTick(()=>{t.native=this.native,t.handleError(e)})},"enqueueError");this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},c.prototype._connect=function(e){var t=this;if(this._connecting){s.nextTick(()=>e(Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(r)return e(r);t.native.connect(n,function(r){if(r)return t.native.end(),e(r);t._connected=!0,t.native.on("error",function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)}),t.native.on("notification",function(e){t.emit("notification",{channel:e.relname,payload:e.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})},c.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})})},c.prototype.query=function(e,t,r){var n,i,a,o,l;if(null==e)throw TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)a=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(e.callback=t);else if(a=this.connectionParameters.query_timeout,!(n=new u(e,t,r)).callback){let e,t;i=new this._Promise((r,n)=>{e=r,t=n}),n.callback=(r,n)=>r?t(r):e(n)}return a&&(l=n.callback,o=setTimeout(()=>{var e=Error("Query read timeout");s.nextTick(()=>{n.handleError(e,this.connection)}),l(e),n.callback=()=>{};var t=this._queryQueue.indexOf(n);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},a),n.callback=(e,t)=>{clearTimeout(o),l(e,t)}),this._queryable?this._ending?(n.native=this.native,s.nextTick(()=>{n.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(n),this._pulseQueryQueue()):(n.native=this.native,s.nextTick(()=>{n.handleError(Error("Client has encountered a connection error and is not queryable"))})),i},c.prototype.end=function(e){var t,r=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise(function(t,r){e=f(e=>e?r(e):t(),"cb")})),this.native.end(function(){r._errorAllQueries(Error("Connection terminated")),s.nextTick(()=>{r.emit("end"),e&&e()})}),t},c.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},c.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);var r=this;t.once("_done",function(){r._pulseQueryQueue()})}},c.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},c.prototype.ref=function(){},c.prototype.unref=function(){},c.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},c.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}}),eZ=g((e,t)=>{P(),t.exports=eX()}),e0=g((e,t)=>{P();var r=eH(),n=J(),i=ez(),a=eV(),{DatabaseError:o}=ej(),l=f(e=>{var t;return f(t=class extends a{constructor(t){super(t,e)}},"BoundPool"),t},"poolFactory"),u=f(function(e){this.defaults=n,this.Client=e,this.Query=this.Client.Query,this.Pool=l(this.Client),this._pools=[],this.Connection=i,this.types=W(),this.DatabaseError=o},"PG");"u">typeof s.env.NODE_PG_FORCE_NATIVE?t.exports=new u(eZ()):(t.exports=new u(r),Object.defineProperty(t.exports,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new u(eZ())}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e}return Object.defineProperty(t.exports,"native",{value:e}),e}}))}),e1={};m(e1,{Client:()=>tn,ClientBase:()=>tt.ClientBase,Connection:()=>tt.Connection,DatabaseError:()=>tt.DatabaseError,NeonDbError:()=>e4,Pool:()=>ta,Query:()=>tt.Query,defaults:()=>tt.defaults,neon:()=>e8,neonConfig:()=>eI,types:()=>tt.types}),e.exports=b(e1),P();var e2=v(e0());eR(),P(),eS(),eR();var e6=v(Y()),e3=class extends Error{constructor(){super(...arguments),w(this,"name","NeonDbError"),w(this,"code",null),w(this,"sourceError")}};f(e3,"NeonDbError");var e4=e3,e5="transaction() expects an array of queries, or a function returning an array of queries";function e8(e,{arrayMode:t,fullResults:r,fetchOptions:n,isolationLevel:i,readOnly:s,deferrable:a,queryCallback:o,resultCallback:l}={}){let u;if(!e)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{u=ew(e)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(e))}let{protocol:c,username:h,password:d,hostname:p,port:g,pathname:m}=u;if("postgres:"!==c&&"postgresql:"!==c||!h||!d||!p||!m)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function y(e,...t){let r,n;if("string"==typeof e)r=e,n=t[1],t=t[0]??[];else{r="";for(let n=0;n<e.length;n++)r+=e[n],n<t.length&&(r+="$"+(n+1))}let i={query:r,params:t=t.map(e=>(0,e6.prepareValue)(e))};return o&&o(i),e7(v,i,n)}async function v(o,u){let c,h=n??{},{fetchEndpoint:d,fetchConnectionCache:f,fetchFunction:m}=eI,y="function"==typeof d?d(p,g):d,v=Array.isArray(o)?{queries:o}:o,b=t??!1,w=r??!1,S=i,_=s,E=a;void 0!==u&&(void 0!==u.arrayMode&&(b=u.arrayMode),void 0!==u.fullResults&&(w=u.fullResults),void 0!==u.fetchOptions&&(h={...h,...u.fetchOptions}),void 0!==u.isolationLevel&&(S=u.isolationLevel),void 0!==u.readOnly&&(_=u.readOnly),void 0!==u.deferrable&&(E=u.deferrable));let P={"Neon-Connection-String":e,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"};!0===f&&(P["Neon-Pool-Opt-In"]="true"),Array.isArray(o)&&(void 0!==S&&(P["Neon-Batch-Isolation-Level"]=S),void 0!==_&&(P["Neon-Batch-Read-Only"]=String(_)),void 0!==E&&(P["Neon-Batch-Deferrable"]=String(E)));try{c=await (m??fetch)(y,{method:"POST",body:JSON.stringify(v),headers:P,...h})}catch(t){let e=new e4(`Error connecting to data\
base: ${t.message}`);throw e.sourceError=t,e}if(c.ok){let e=await c.json();if(!Array.isArray(o))return e9(e,{arrayMode:b,fullResults:w,parameterizedQuery:o,resultCallback:l});{let t=e.results;if(!Array.isArray(t))throw new e4("Neon internal error: unexpected result format");return t.map((e,t)=>e9(e,{arrayMode:b,fullResults:w,parameterizedQuery:o[t],resultCallback:l}))}}{let{status:e}=c;if(400===e){let{message:e,code:t}=await c.json(),r=new e4(e);throw r.code=t,r}{let t=await c.text();throw new e4(`Server error (HTTP status ${e}): ${t}`)}}}return f(y,"resolve"),y.transaction=async(e,t)=>{if("function"==typeof e&&(e=e(y)),!Array.isArray(e))throw Error(e5);return v(e.map(e=>{if("NeonQueryPromise"!==e[Symbol.toStringTag])throw Error(e5);return e.parameterizedQuery}),t)},f(v,"execute"),y}function e7(e,t,r){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:t,opts:r,then:(n,i)=>e(t,r).then(n,i),catch:n=>e(t,r).catch(n),finally:n=>e(t,r).finally(n)}}function e9(e,{arrayMode:t,fullResults:r,parameterizedQuery:n,resultCallback:i}){let s=e.fields.map(e=>e.name),a=e.fields.map(e=>tt.types.getTypeParser(e.dataTypeID)),o=!0===t?e.rows.map(e=>e.map((e,t)=>null===e?null:a[t](e))):e.rows.map(e=>Object.fromEntries(e.map((e,t)=>[s[t],null===e?null:a[t](e)])));return i&&i(n,e,o,{arrayMode:t,fullResults:r}),r?(e.viaNeonFetch=!0,e.rowAsArray=t,e.rows=o,e):o}f(e8,"neon"),f(e7,"createNeonQueryPromise"),f(e9,"processQueryResult");var te=v(eE()),tt=v(e0()),tr=class extends e2.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let r=this.config?.host!==void 0||this.config?.connectionString!==void 0||void 0!==s.env.PGHOST,n=s.env.USER??s.env.USERNAME;if(!r&&"localhost"===this.host&&this.user===n&&this.database===n&&null===this.password)throw Error(`No datab\
ase host or connection string was set, and key parameters have default values (h\
ost: localhost, user: ${n}, db: ${n}, password: null). Is an environment variabl\
e missing? Alternatively, if you intended to connect with these parameters, plea\
se set the host to 'localhost' explicitly.`);let i=super.connect(e),a=t.pipelineTLS&&this.ssl,o="password"===t.pipelineConnect;if(!a&&!t.pipelineConnect)return i;let l=this.connection;if(a&&l.on("connect",()=>l.stream.emit("data","S")),o){l.removeAllListeners("authenticationCleartextPassword"),l.removeAllListeners("readyForQuery"),l.once("readyForQuery",()=>l.on("readyForQuery",this._handleReadyForQuery.bind(this)));let e=this.ssl?"sslconnect":"connect";l.on(e,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){let t=this.saslSession,r=this.password,s=e.data;if("SASLInitialResponse"!==t.message||"string"!=typeof r||"string"!=typeof s)throw Error("SASL: protocol error");let a=Object.fromEntries(s.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]})),o=a.r,l=a.s,u=a.i;if(!o||!/^[!-+--~]+$/.test(o))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!l||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(l))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!u||!/^[1-9][0-9]*$/.test(u))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!o.startsWith(t.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(o.length===t.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let c=parseInt(u,10),h=i.from(l,"base64"),d=new TextEncoder,f=d.encode(r),p=await n.subtle.importKey("raw",f,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),g=new Uint8Array(await n.subtle.sign("HMAC",p,i.concat([h,i.from([0,0,0,1])]))),m=g;for(var y=0;y<c-1;y++)g=new Uint8Array(await n.subtle.sign("HMAC",p,g)),m=i.from(m.map((e,t)=>m[t]^g[t]));let v=m,b=await n.subtle.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),w=new Uint8Array(await n.subtle.sign("HMAC",b,d.encode("Client Key"))),S=await n.subtle.digest("SHA-256",w),_="n=*,r="+t.clientNonce,E="r="+o+",s="+l+",i="+c,P="c=biws,r="+o,C=_+","+E+","+P,T=await n.subtle.importKey("raw",S,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var A=new Uint8Array(await n.subtle.sign("HMAC",T,d.encode(C))),x=i.from(w.map((e,t)=>w[t]^A[t])).toString("base64");let O=await n.subtle.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),I=await n.subtle.sign("HMAC",O,d.encode("Server Key")),R=await n.subtle.importKey("raw",I,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var N=i.from(await n.subtle.sign("HMAC",R,d.encode(C)));t.message="SASLResponse",t.serverSignature=N.toString("base64"),t.response=P+",p="+x,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};f(tr,"NeonClient");var tn=tr;function ti(e,t){let r,n;return t?{callback:t,result:void 0}:{callback:f(function(e,t){e?r(e):n(t)},"cb"),result:new e(function(e,t){n=e,r=t})}}f(ti,"promisify");var ts=class extends e2.Pool{constructor(){super(...arguments),w(this,"Client",tn),w(this,"hasFetchUnsupportedListeners",!1)}on(e,t){return"error"!==e&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,r){if(!eI.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof e)return super.query(e,t,r);"function"==typeof t&&(r=t,t=void 0);let n=ti(this.Promise,r);r=n.callback;try{let n=new te.default(this.options),i=encodeURIComponent,s=`postgresql://${i(n.user)}:${i(n.password)}@${i(n.host)}/${encodeURI(n.database)}`,a="string"==typeof e?e:e.text,o=t??e.values??[];e8(s,{fullResults:!0,arrayMode:"array"===e.rowMode})(a,o).then(e=>r(void 0,e)).catch(e=>r(e))}catch(e){r(e)}return n.result}};f(ts,"NeonPool");var ta=ts;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/},7489:(e,t)=>{"use strict";function r(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.Q=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var n={},i=(t||{}).decode||r,s=0;s<e.length;){var a=e.indexOf("=",s);if(-1===a)break;var o=e.indexOf(";",s);if(-1===o)o=e.length;else if(o<a){s=e.lastIndexOf(";",a-1)+1;continue}var l=e.slice(s,a).trim();if(void 0===n[l]){var u=e.slice(a+1,o).trim();34===u.charCodeAt(0)&&(u=u.slice(1,-1)),n[l]=function(e,t){try{return t(e)}catch(t){return e}}(u,i)}s=o+1}return n},Object.prototype.toString},7806:e=>{"use strict";var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==r},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?o(Array.isArray(e)?[]:{},e,t):e}function i(e,t,r){return e.concat(t).map(function(e){return n(e,r)})}function s(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[])}function a(e,t){try{return t in e}catch(e){return!1}}function o(e,r,l){(l=l||{}).arrayMerge=l.arrayMerge||i,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=n;var u,c,h=Array.isArray(r);return h!==Array.isArray(e)?n(r,l):h?l.arrayMerge(e,r,l):(c={},(u=l).isMergeableObject(e)&&s(e).forEach(function(t){c[t]=n(e[t],u)}),s(r).forEach(function(t){(!a(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(a(e,t)&&u.isMergeableObject(r[t])?c[t]=(function(e,t){if(!t.customMerge)return o;var r=t.customMerge(e);return"function"==typeof r?r:o})(t,u)(e[t],r[t],u):c[t]=n(r[t],u))}),c)}o.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return o(e,r,t)},{})},e.exports=o},4732:e=>{"use strict";let t=e=>"object"==typeof e&&null!==e,r=Symbol("skip"),n=e=>t(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),i=(e,t,s,a=new WeakMap)=>{if(s={deep:!1,target:{},...s},a.has(e))return a.get(e);a.set(e,s.target);let{target:o}=s;delete s.target;let l=e=>e.map(e=>n(e)?i(e,t,s,a):e);if(Array.isArray(e))return l(e);for(let[u,c]of Object.entries(e)){let h=t(u,c,e);if(h===r)continue;let[d,f,{shouldRecurse:p=!0}={}]=h;"__proto__"!==d&&(s.deep&&p&&n(f)&&(f=Array.isArray(f)?l(f):i(f,t,s,a)),o[d]=f)}return o};e.exports=(e,r,n)=>{if(!t(e))throw TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return i(e,r,n)},e.exports.mapObjectSkip=r},1690:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s={};function a(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${r.join("; ")}`}function o(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function l(e){var t;if(!e)return;let[[r,n],...i]=o(e),{domain:s,expires:a,httponly:l,maxage:c,path:h,samesite:d,secure:f}=Object.fromEntries(i.map(([e,t])=>[e.toLowerCase(),t])),p={name:r,value:decodeURIComponent(n),domain:s,...a&&{expires:new Date(a)},...l&&{httpOnly:!0},..."string"==typeof c&&{maxAge:Number(c)},path:h,...d&&{sameSite:u.includes(t=(t=d).toLowerCase())?t:void 0},...f&&{secure:!0}};return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}(p)}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(s,{RequestCookies:()=>h,ResponseCookies:()=>d,parseCookie:()=>o,parseSetCookie:()=>l,splitCookiesString:()=>c,stringifyCookie:()=>a}),e.exports=((e,s,a,o)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let a of n(s))i.call(e,a)||void 0===a||t(e,a,{get:()=>s[a],enumerable:!(o=r(s,a))||o.enumerable});return e})(t({},"__esModule",{value:!0}),s);var u=["strict","lax","none"];function c(e){if(!e)return[];var t,r,n,i,s,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&a.push(e.substring(t,e.length))}return a}var h=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t){let e=o(t);for(let[t,r]of e)this._parsed.set(t,{name:t,value:r})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>a(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>a(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},d=class{constructor(e){var t;this._parsed=new Map,this._headers=e;let r=null==(t=e.getSetCookie)?void 0:t.call(e);e.get("set-cookie");let n=Array.isArray(r)?r:c(r);for(let e of n){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=a(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r,n]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a).join("; ")}}},6581:(e,t,r)=>{"use strict";(()=>{var t={339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(44),i=r(38),s=r(741),a="context",o=new n.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(a,e,s.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(a)||o}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(a,s.DiagAPI.instance())}}t.ContextAPI=l},741:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(144),i=r(871),s=r(133),a=r(38);class o{constructor(){function e(e){return function(...t){let r=(0,a.getGlobal)("diag");if(r)return r[e](...t)}}let t=this;t.setLogger=(e,r={logLevel:s.DiagLogLevel.INFO})=>{var n,o,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=e.stack)&&void 0!==n?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let u=(0,a.getGlobal)("diag"),c=(0,i.createLogLevelDiagLogger)(null!==(o=r.logLevel)&&void 0!==o?o:s.DiagLogLevel.INFO,e);if(u&&!r.suppressOverrideMessage){let e=null!==(l=Error().stack)&&void 0!==l?l:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`),c.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,a.registerGlobal)("diag",c,t,!0)},t.disable=()=>{(0,a.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new o),this._instance}}t.DiagAPI=o},128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(333),i=r(38),s=r(741),a="metrics";class o{constructor(){}static getInstance(){return this._instance||(this._instance=new o),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(a,e,s.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(a)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(a,s.DiagAPI.instance())}}t.MetricsAPI=o},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(38),i=r(600),s=r(625),a=r(377),o=r(701),l=r(741),u="propagation",c=new i.NoopTextMapPropagator;class h{constructor(){this.createBaggage=o.createBaggage,this.getBaggage=a.getBaggage,this.getActiveBaggage=a.getActiveBaggage,this.setBaggage=a.setBaggage,this.deleteBaggage=a.deleteBaggage}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(u,e,l.DiagAPI.instance())}inject(e,t,r=s.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=s.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(u,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(u)||c}}t.PropagationAPI=h},967:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(38),i=r(414),s=r(994),a=r(542),o=r(741),l="trace";class u{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=s.wrapSpanContext,this.isSpanContextValid=s.isSpanContextValid,this.deleteSpan=a.deleteSpan,this.getSpan=a.getSpan,this.getActiveSpan=a.getActiveSpan,this.getSpanContext=a.getSpanContext,this.setSpan=a.setSpan,this.setSpanContext=a.setSpanContext}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,o.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,o.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=u},377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(339),i=r(421),s=(0,i.createContextKey)("OpenTelemetry Baggage Key");function a(e){return e.getValue(s)||void 0}t.getBaggage=a,t.getActiveBaggage=function(){return a(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(s,t)},t.deleteBaggage=function(e){return e.deleteValue(s)}},496:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},701:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(741),i=r(496),s=r(817),a=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(a.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:s.baggageEntryMetadataSymbol,toString:()=>e}}},388:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0;let n=r(339);t.context=n.ContextAPI.getInstance()},44:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(421);t.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},421:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},920:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0;let n=r(741);t.diag=n.DiagAPI.instance()},144:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(38);function i(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return i("debug",this._namespace,e)}error(...e){return i("error",this._namespace,e)}info(...e){return i("info",this._namespace,e)}warn(...e){return i("warn",this._namespace,e)}verbose(...e){return i("verbose",this._namespace,e)}}},689:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},871:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(133);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t.DiagLogLevel||(t.DiagLogLevel={}))},38:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(966),i=r(520),s=r(565),a=i.VERSION.split(".")[0],o=Symbol.for(`opentelemetry.js.api.${a}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var s;let a=l[o]=null!==(s=l[o])&&void 0!==s?s:{version:i.VERSION};if(!n&&a[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(a.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${a.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return a[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null===(t=l[o])||void 0===t?void 0:t.version;if(n&&(0,s.isCompatible)(n))return null===(r=l[o])||void 0===r?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=l[o];r&&delete r[e]}},565:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(520),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function s(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease)return function(t){return t===e};function a(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return a(e);let o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=o.prerelease||s.major!==o.major?a(e):0===s.major?s.minor===o.minor&&s.patch<=o.patch?(t.add(e),!0):a(e):s.minor<=o.minor?(t.add(e),!0):a(e)}}t._makeCompatibilityCheck=s,t.isCompatible=s(n.VERSION)},934:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0;let n=r(128);t.metrics=n.MetricsAPI.getInstance()},28:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(t.ValueType||(t.ValueType={}))},962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class s extends n{add(e,t){}}t.NoopUpDownCounterMetric=s;class a extends n{record(e,t){}}t.NoopHistogramMetric=a;class o{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=o;class l extends o{}t.NoopObservableCounterMetric=l;class u extends o{}t.NoopObservableGaugeMetric=u;class c extends o{}t.NoopObservableUpDownCounterMetric=c,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new a,t.NOOP_UP_DOWN_COUNTER_METRIC=new s,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new u,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new c,t.createNoopMeter=function(){return t.NOOP_METER}},333:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(962);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},966:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(652),t)},385:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:r.g},652:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(385),t)},251:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0;let n=r(930);t.propagation=n.PropagationAPI.getInstance()},600:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},625:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},978:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0;let n=r(967);t.trace=n.TraceAPI.getInstance()},76:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(304);t.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},527:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(339),i=r(542),s=r(76),a=r(994),o=n.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=o.active()){let n=!!(null==t?void 0:t.root);if(n)return new s.NonRecordingSpan;let l=r&&(0,i.getSpanContext)(r);return"object"==typeof l&&"string"==typeof l.spanId&&"string"==typeof l.traceId&&"number"==typeof l.traceFlags&&(0,a.isSpanContextValid)(l)?new s.NonRecordingSpan(l):new s.NonRecordingSpan}startActiveSpan(e,t,r,n){let s,a,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(s=t,l=r):(s=t,a=r,l=n);let u=null!=a?a:o.active(),c=this.startSpan(e,s,u),h=(0,i.setSpan)(u,c);return o.with(h,l,void 0,c)}}},228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(527);t.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},387:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=r(527),i=new n.NoopTracer;t.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):i}}},414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(387),i=r(228),s=new i.NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var i;return null!==(i=this.getDelegateTracer(e,t,r))&&void 0!==i?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!==(e=this._delegate)&&void 0!==e?e:s}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)}}},505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(t.SamplingDecision||(t.SamplingDecision={}))},542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(421),i=r(76),s=r(339),a=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(a)||void 0}function l(e,t){return e.setValue(a,t)}t.getSpan=o,t.getActiveSpan=function(){return o(s.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(a)},t.setSpanContext=function(e,t){return l(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t.spanContext()}},430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(450);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let s=r.slice(0,i),a=r.slice(i+1,t.length);(0,n.validateKey)(s)&&(0,n.validateValue)(a)&&e.set(s,a)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},450:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,s=RegExp(`^(?:${n}|${i})$`),a=/^[ -~]{0,255}[!-~]$/,o=/,|=/;t.validateKey=function(e){return s.test(e)},t.validateValue=function(e){return a.test(e)&&!o.test(e)}},757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(430);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},304:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(762);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},902:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(t.SpanKind||(t.SpanKind={}))},994:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(304),i=r(76),s=/^([0-9a-f]{32})$/i,a=/^[0-9a-f]{16}$/i;function o(e){return s.test(e)&&e!==n.INVALID_TRACEID}function l(e){return a.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=o,t.isValidSpanId=l,t.isSpanContextValid=function(e){return o(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},832:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t.SpanStatusCode||(t.SpanStatusCode={}))},762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t.TraceFlags||(t.TraceFlags={}))},520:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.4.1"}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},a=!0;try{t[e].call(s.exports,s,s.exports,i),a=!1}finally{a&&delete n[e]}return s.exports}i.ab="//";var s={};(()=>{Object.defineProperty(s,"__esModule",{value:!0}),s.trace=s.propagation=s.metrics=s.diag=s.context=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.createTraceState=s.TraceFlags=s.SpanStatusCode=s.SpanKind=s.SamplingDecision=s.ProxyTracerProvider=s.ProxyTracer=s.defaultTextMapSetter=s.defaultTextMapGetter=s.ValueType=s.createNoopMeter=s.DiagLogLevel=s.DiagConsoleLogger=s.ROOT_CONTEXT=s.createContextKey=s.baggageEntryMetadataFromString=void 0;var e=i(701);Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=i(421);Object.defineProperty(s,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(s,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var r=i(689);Object.defineProperty(s,"DiagConsoleLogger",{enumerable:!0,get:function(){return r.DiagConsoleLogger}});var n=i(133);Object.defineProperty(s,"DiagLogLevel",{enumerable:!0,get:function(){return n.DiagLogLevel}});var a=i(962);Object.defineProperty(s,"createNoopMeter",{enumerable:!0,get:function(){return a.createNoopMeter}});var o=i(28);Object.defineProperty(s,"ValueType",{enumerable:!0,get:function(){return o.ValueType}});var l=i(625);Object.defineProperty(s,"defaultTextMapGetter",{enumerable:!0,get:function(){return l.defaultTextMapGetter}}),Object.defineProperty(s,"defaultTextMapSetter",{enumerable:!0,get:function(){return l.defaultTextMapSetter}});var u=i(387);Object.defineProperty(s,"ProxyTracer",{enumerable:!0,get:function(){return u.ProxyTracer}});var c=i(414);Object.defineProperty(s,"ProxyTracerProvider",{enumerable:!0,get:function(){return c.ProxyTracerProvider}});var h=i(505);Object.defineProperty(s,"SamplingDecision",{enumerable:!0,get:function(){return h.SamplingDecision}});var d=i(902);Object.defineProperty(s,"SpanKind",{enumerable:!0,get:function(){return d.SpanKind}});var f=i(832);Object.defineProperty(s,"SpanStatusCode",{enumerable:!0,get:function(){return f.SpanStatusCode}});var p=i(762);Object.defineProperty(s,"TraceFlags",{enumerable:!0,get:function(){return p.TraceFlags}});var g=i(757);Object.defineProperty(s,"createTraceState",{enumerable:!0,get:function(){return g.createTraceState}});var m=i(994);Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return m.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return m.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return m.isValidSpanId}});var y=i(304);Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return y.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return y.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return y.INVALID_SPAN_CONTEXT}});let v=i(388);Object.defineProperty(s,"context",{enumerable:!0,get:function(){return v.context}});let b=i(920);Object.defineProperty(s,"diag",{enumerable:!0,get:function(){return b.diag}});let w=i(934);Object.defineProperty(s,"metrics",{enumerable:!0,get:function(){return w.metrics}});let S=i(251);Object.defineProperty(s,"propagation",{enumerable:!0,get:function(){return S.propagation}});let _=i(978);Object.defineProperty(s,"trace",{enumerable:!0,get:function(){return _.trace}}),s.default={context:v.context,diag:b.diag,metrics:w.metrics,propagation:S.propagation,trace:_.trace}})(),e.exports=s})()},49:e=>{"use strict";(()=>{"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};(()=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},s=t.split(n),a=(r||{}).decode||e,o=0;o<s.length;o++){var l=s[o],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),h=l.substr(++u,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==i[c]&&(i[c]=function(e,t){try{return t(e)}catch(t){return e}}(h,a))}}return i},t.serialize=function(e,t,n){var s=n||{},a=s.encode||r;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var o=a(t);if(o&&!i.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=s.maxAge){var u=s.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(s.domain){if(!i.test(s.domain))throw TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!i.test(s.path))throw TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},1939:e=>{"use strict";(()=>{var t={806:(e,t,r)=>{let n=r(190),i=Symbol("max"),s=Symbol("length"),a=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1,g=(e,t,r)=>{let n=e[d].get(t);if(n){let t=n.value;if(m(e,t)){if(v(e,n),!e[o])return}else r&&(e[f]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},y=e=>{if(e[s]>e[i])for(let t=e[h].tail;e[s]>e[i]&&null!==t;){let r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){let r=t.value;e[u]&&e[u](r.key,r.value),e[s]-=r.length,e[d].delete(r.key),e[h].removeNode(t)}};class b{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}let w=(e,t,r,n)=>{let i=r.value;m(e,i)&&(v(e,r),e[o]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[i]=e.max||1/0;let t=e.length||p;if(this[a]="function"!=typeof t?p:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[i]=e||1/0,y(this)}get max(){return this[i]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,y(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[a]&&(this[a]=e,this[s]=0,this[h].forEach(e=>{e.length=this[a](e.value,e.key),this[s]+=e.length})),y(this)}get lengthCalculator(){return this[a]}get length(){return this[s]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let r=this[h].tail;null!==r;){let n=r.prev;w(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[h].head;null!==r;){let n=r.next;w(this,e,r,t),r=n}}keys(){return this[h].toArray().map(e=>e.key)}values(){return this[h].toArray().map(e=>e.value)}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach(e=>this[u](e.key,e.value)),this[d]=new Map,this[h]=new n,this[s]=0}dump(){return this[h].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let n=r?Date.now():0,o=this[a](t,e);if(this[d].has(e)){if(o>this[i])return v(this,this[d].get(e)),!1;let a=this[d].get(e),l=a.value;return this[u]&&!this[c]&&this[u](e,l.value),l.now=n,l.maxAge=r,l.value=t,this[s]+=o-l.length,l.length=o,this.get(e),y(this),!0}let f=new b(e,t,o,n,r);return f.length>this[i]?(this[u]&&this[u](e,t),!1):(this[s]+=f.length,this[h].unshift(f),this[d].set(e,this[h].head),y(this),!0)}has(e){if(!this[d].has(e))return!1;let t=this[d].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){let e=this[h].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[d].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{let e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[d].forEach((e,t)=>g(this,t,!1))}}},76:e=>{e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},190:(e,t,r)=>{function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=i,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new i(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},n.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new i(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,s=this.head;null!==s&&i<e;i++)s=s.next;for(;null!==s&&i<t;i++,s=s.next)r.push(s.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,s=this.tail;null!==s&&i>t;i--)s=s.prev;for(;null!==s&&i>e;i--,s=s.prev)r.push(s.value);return r},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;for(var s=[],r=0;n&&r<t;r++)s.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=2;r<arguments.length;r++)n=function(e,t,r){var n=t===e.head?new i(r,null,t,e):new i(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}(this,n,arguments[r]);return s},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(76)(n)}catch(e){}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab="//";var i=n(806);e.exports=i})()},5700:e=>{"use strict";!function(){var t={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",i=0,s=-1,a=0,o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else if(47===r)break;else r=47;if(47===r){if(s===o-1||1===a);else if(s!==o-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2)){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),s=o,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,s=o,a=0;continue}}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),i=o-s-1;s=o,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var e,n,i="",s=!1,a=arguments.length-1;a>=-1&&!s;a--)a>=0?n=arguments[a]:(void 0===e&&(e=""),n=e),t(n),0!==n.length&&(i=n+"/"+i,s=47===n.charCodeAt(0));return(i=r(i,!s),s)?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return(0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&i&&(e+="/"),n)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var s=e.length,a=s-i,o=1;o<r.length&&47===r.charCodeAt(o);++o);for(var l=r.length-o,u=a<l?a:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(47===r.charCodeAt(o+h))return r.slice(o+h+1);if(0===h)return r.slice(o+h)}else a>u&&(47===e.charCodeAt(i+h)?c=h:0===h&&(c=0));break}var d=e.charCodeAt(i+h);if(d!==r.charCodeAt(o+h))break;47===d&&(c=h)}var f="";for(h=i+c+1;h<=s;++h)(h===s||47===e.charCodeAt(h))&&(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(o+c):(o+=c,47===r.charCodeAt(o)&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,i=-1,s=!0,a=e.length-1;a>=1;--a)if(47===(r=e.charCodeAt(a))){if(!s){i=a;break}}else s=!1;return -1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw TypeError('"ext" argument must be a string');t(e);var n,i=0,s=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!a){i=n+1;break}}else -1===l&&(a=!1,l=n+1),o>=0&&(u===r.charCodeAt(o)?-1==--o&&(s=n):(o=-1,s=l))}return i===s?s=l:-1===s&&(s=e.length),e.slice(i,s)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){i=n+1;break}}else -1===s&&(a=!1,s=n+1);return -1===s?"":e.slice(i,s)},extname:function(e){t(e);for(var r=-1,n=0,i=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47===l){if(!s){n=o+1;break}continue}-1===i&&(s=!1,i=o+1),46===l?-1===r?r=o:1!==a&&(a=1):-1!==r&&(a=-1)}return -1===r||-1===i||0===a||1===a&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){var t,r;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+r:t+"/"+r:r},parse:function(e){t(e);var r,n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i=e.charCodeAt(0),s=47===i;s?(n.root="/",r=1):r=0;for(var a=-1,o=0,l=-1,u=!0,c=e.length-1,h=0;c>=r;--c){if(47===(i=e.charCodeAt(c))){if(!u){o=c+1;break}continue}-1===l&&(u=!1,l=c+1),46===i?-1===a?a=c:1!==h&&(h=1):-1!==a&&(h=-1)}return -1===a||-1===l||0===h||1===h&&a===l-1&&a===o+1?-1!==l&&(0===o&&s?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(o,l)):(0===o&&s?(n.name=e.slice(1,a),n.base=e.slice(1,l)):(n.name=e.slice(o,a),n.base=e.slice(o,l)),n.ext=e.slice(a,l)),o>0?n.dir=e.slice(0,o-1):s&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab="//";var i=n(114);e.exports=i}()},2739:(e,t)=>{"use strict";/**
 * @license React
 * react-dom-server-rendering-stub.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r={usingClientEntryPoint:!1,Events:null,Dispatcher:{current:null}};function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=r.Dispatcher;function s(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?"use-credentials":"":void 0}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,t.createPortal=function(){throw Error(n(448))},t.experimental_useFormState=function(){throw Error(n(248))},t.experimental_useFormStatus=function(){throw Error(n(248))},t.flushSync=function(){throw Error(n(449))},t.preconnect=function(e,t){var r=i.current;r&&"string"==typeof e&&(t=t?s("preconnect",t.crossOrigin):null,r.preconnect(e,t))},t.prefetchDNS=function(e){var t=i.current;t&&"string"==typeof e&&t.prefetchDNS(e)},t.preinit=function(e,t){var r=i.current;if(r&&"string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,a=s(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,l="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.preinitStyle(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:o,fetchPriority:l}):"script"===n&&r.preinitScript(e,{crossOrigin:a,integrity:o,fetchPriority:l,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){var r=i.current;if(r&&"string"==typeof e&&(null==t||"object"==typeof t&&(null==t.as||"script"===t.as))){var n=t?s(void 0,t.crossOrigin):void 0;r.preinitModuleScript(e,{crossOrigin:n,integrity:t&&"string"==typeof t.integrity?t.integrity:void 0})}},t.preload=function(e,t){var r=i.current;if(r&&"string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,a=s(n,t.crossOrigin);r.preload(e,n,{crossOrigin:a,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0})}},t.preloadModule=function(e,t){var r=i.current;if(r&&"string"==typeof e){if(t){var n=s(t.as,t.crossOrigin);r.preloadModule(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.preloadModule(e)}},t.unstable_batchedUpdates=function(e,t){return e(t)},t.version="18.3.0-canary-2807d781a-20230918"},1023:(e,t,r)=>{"use strict";e.exports=r(2739)},5124:(e,t,r)=>{"use strict";/**
 * @license React
 * react-server-dom-webpack-server.edge.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(6544),i=r(1023),s=null,a=0;function o(e,t){if(0!==t.byteLength){if(512<t.byteLength)0<a&&(e.enqueue(new Uint8Array(s.buffer,0,a)),s=new Uint8Array(512),a=0),e.enqueue(t);else{var r=s.length-a;r<t.byteLength&&(0===r?e.enqueue(s):(s.set(t.subarray(0,r),a),e.enqueue(s),t=t.subarray(r)),s=new Uint8Array(512),a=0),s.set(t,a),a+=t.byteLength}}return!0}var l=new TextEncoder,u=Symbol.for("react.client.reference");function c(e,t,r){return Object.defineProperties(e,{$$typeof:{value:u},$$id:{value:t},$$async:{value:r}})}Symbol.for("react.server.reference"),Function.prototype.bind,Array.prototype.slice;var h=Promise.prototype,d={get:function(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"displayName":case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case"Provider":throw Error("Cannot render a Client Context Provider on the Server. Instead, you can export a Client Component wrapper that itself renders a Client Context Provider.")}throw Error("Cannot access "+String(e.name)+"."+String(t)+" on the server. You cannot dot into a client module from a server component. You can only pass the imported name through.")},set:function(){throw Error("Cannot assign to a client module from a server module.")}};function f(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case"__esModule":var r=e.$$id;return e.default=c(function(){throw Error("Attempted to call the default export of "+r+" from the server but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#",e.$$async),!0;case"then":if(e.then)return e.then;if(e.$$async)return;var n=c({},e.$$id,!0),i=new Proxy(n,p);return e.status="fulfilled",e.value=i,e.then=c(function(e){return Promise.resolve(e(i))},e.$$id+"#then",!1)}return(n=e[t])||(Object.defineProperty(n=c(function(){throw Error("Attempted to call "+String(t)+"() from the server but "+String(t)+" is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#"+t,e.$$async),"name",{value:t}),n=e[t]=new Proxy(n,d)),n}var p={get:function(e,t){return f(e,t)},getOwnPropertyDescriptor:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return r||(r={value:f(e,t),writable:!1,configurable:!1,enumerable:!1},Object.defineProperty(e,t,r)),r},getPrototypeOf:function(){return h},set:function(){throw Error("Cannot assign to a client module from a server module.")}};i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher;var g="function"==typeof AsyncLocalStorage,m=g?new AsyncLocalStorage:null,y=Symbol.for("react.element"),v=Symbol.for("react.fragment"),b=Symbol.for("react.provider"),w=Symbol.for("react.server_context"),S=Symbol.for("react.forward_ref"),_=(Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo")),E=Symbol.for("react.lazy"),P=(Symbol.for("react.default_value"),Symbol.for("react.memo_cache_sentinel")),C=(Symbol.iterator,null),T=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`");function A(){}var x=null,O=0,I=null;function R(e){return e._currentValue}function N(){throw Error("This Hook is not supported in Server Components.")}function k(){throw Error("Refreshing the cache is not supported in Server Components.")}var M=Array.isArray,L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=(L.ContextRegistry,JSON.stringify);L.ReactCurrentDispatcher,L.ReactCurrentCache;var U={};function B(e){if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e}var $=new Map;function j(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function q(){}function F(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function Q(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}F.prototype=Object.create(Promise.prototype),F.prototype.then=function(e,t){switch("resolved_model"===this.status&&V(this),this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var z=null,H=null;function V(e){var t=z,r=H;z=e,H=null;try{var n=JSON.parse(e.value,e._response._fromJSON);null!==H&&0<H.deps?(H.value=n,e.status="blocked",e.value=null,e.reason=null):(e.status="fulfilled",e.value=n)}catch(t){e.status="rejected",e.reason=t}finally{z=t,H=r}}t.createClientModuleProxy=function(e){return e=c({},e,!1),new Proxy(e,p)}},9278:(e,t,r)=>{"use strict";e.exports=r(5124)},5417:(e,t)=>{"use strict";/**
 * @license React
 * react.shared-subset.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=Object.assign,n={current:null};function i(){return new Map}if("function"==typeof fetch){var s=fetch,a=function(e,t){var r=n.current;if(!r||t&&t.signal&&t.signal!==r.getCacheSignal())return s(e,t);if("string"!=typeof e||t){var a="string"==typeof e||e instanceof URL?new Request(e,t):e;if("GET"!==a.method&&"HEAD"!==a.method||a.keepalive)return s(e,t);var o=JSON.stringify([a.method,Array.from(a.headers.entries()),a.mode,a.redirect,a.credentials,a.referrer,a.referrerPolicy,a.integrity]);a=a.url}else o='["GET",[],null,"follow",null,null,null,null]',a=e;var l=r.getCacheForType(i);if(void 0===(r=l.get(a)))e=s(e,t),l.set(a,[o,e]);else{for(a=0,l=r.length;a<l;a+=2){var u=r[a+1];if(r[a]===o)return(e=u).then(function(e){return e.clone()})}e=s(e,t),r.push(o,e)}return e.then(function(e){return e.clone()})};r(a,s);try{fetch=a}catch(e){try{globalThis.fetch=a}catch(e){console.warn("React was unable to patch the fetch() function in this environment. Suspensey APIs might not work correctly as a result.")}}}var o=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.default_value"),b=Symbol.iterator;function w(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function E(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||S}function P(){}function C(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||S}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(w(85));this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},P.prototype=E.prototype;var T=C.prototype=new P;T.constructor=C,r(T,E.prototype),T.isPureReactComponent=!0;var A=Array.isArray,x=Object.prototype.hasOwnProperty,O={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var N=/\/+/g;function k(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function M(e,t,r){if(null==e)return e;var n=[],i=0;return!function e(t,r,n,i,s){var a,u,c,h=typeof t;("undefined"===h||"boolean"===h)&&(t=null);var d=!1;if(null===t)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case o:case l:d=!0}}if(d)return s=s(d=t),t=""===i?"."+k(d,0):i,A(s)?(n="",null!=t&&(n=t.replace(N,"$&/")+"/"),e(s,r,n,"",function(e){return e})):null!=s&&(R(s)&&(a=s,u=n+(!s.key||d&&d.key===s.key?"":(""+s.key).replace(N,"$&/")+"/")+t,s={$$typeof:o,type:a.type,key:u,ref:a.ref,props:a.props,_owner:a._owner}),r.push(s)),1;if(d=0,i=""===i?".":i+":",A(t))for(var f=0;f<t.length;f++){var p=i+k(h=t[f],f);d+=e(h,r,n,p,s)}else if("function"==typeof(p=null===(c=t)||"object"!=typeof c?null:"function"==typeof(c=b&&c[b]||c["@@iterator"])?c:null))for(t=p.call(t),f=0;!(h=t.next()).done;)p=i+k(h=h.value,f++),d+=e(h,r,n,p,s);else if("object"===h)throw Error(w(31,"[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r));return d}(e,n,"","",function(e){return t.call(r,e,i++)}),n}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}function D(){return new WeakMap}function U(){return{s:0,v:void 0,o:null,p:null}}var B={current:null},$={transition:null},j={ReactCurrentDispatcher:B,ReactCurrentCache:n,ReactCurrentBatchConfig:$,ReactCurrentOwner:O,ContextRegistry:{}},q=j.ContextRegistry;t.Children={map:M,forEach:function(e,t,r){M(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return M(e,function(){t++}),t},toArray:function(e){return M(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error(w(143));return e}},t.Fragment=u,t.Profiler=h,t.StrictMode=c,t.Suspense=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cache=function(e){return function(){var t=n.current;if(!t)return e.apply(null,arguments);var r=t.getCacheForType(D);void 0===(t=r.get(e))&&(t=U(),r.set(e,t)),r=0;for(var i=arguments.length;r<i;r++){var s=arguments[r];if("function"==typeof s||"object"==typeof s&&null!==s){var a=t.o;null===a&&(t.o=a=new WeakMap),void 0===(t=a.get(s))&&(t=U(),a.set(s,t))}else null===(a=t.p)&&(t.p=a=new Map),void 0===(t=a.get(s))&&(t=U(),a.set(s,t))}if(1===t.s)return t.v;if(2===t.s)throw t.v;try{var o=e.apply(null,arguments);return(r=t).s=1,r.v=o}catch(e){throw(o=t).s=2,o.v=e,e}}},t.cloneElement=function(e,t,n){if(null==e)throw Error(w(267,e));var i=r({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=O.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:l}},t.createElement=function(e,t,r){var n,i={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,n)&&!I.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===i[n]&&(i[n]=l[n]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:O.current}},t.createRef=function(){return{current:null}},t.createServerContext=function(e,t){var r=!0;if(!q[e]){r=!1;var n={$$typeof:f,_currentValue:t,_currentValue2:t,_defaultValue:t,_threadCount:0,Provider:null,Consumer:null,_globalName:e};n.Provider={$$typeof:d,_context:n},q[e]=n}if((n=q[e])._defaultValue===v)n._defaultValue=t,n._currentValue===v&&(n._currentValue=t),n._currentValue2===v&&(n._currentValue2=t);else if(r)throw Error(w(429,e));return n},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=$.transition;$.transition={};try{e()}finally{$.transition=t}},t.use=function(e){return B.current.use(e)},t.useCallback=function(e,t){return B.current.useCallback(e,t)},t.useContext=function(e){return B.current.useContext(e)},t.useDebugValue=function(){},t.useId=function(){return B.current.useId()},t.useMemo=function(e,t){return B.current.useMemo(e,t)},t.version="18.3.0-canary-2807d781a-20230918"},6544:(e,t,r)=>{"use strict";e.exports=r(5417)},718:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=r(9278);let i=n.createClientModuleProxy},1034:(e,t,r)=>{"use strict";r.d(t,{H4:()=>o,i4:()=>n,ph:()=>i,pz:()=>s,vu:()=>a});let n="RSC",i="Next-Router-State-Tree",s="Next-Router-Prefetch",a=[[n],[i],[s]],o="_rsc"},2227:(e,t,r)=>{"use strict";r.r(t),r.d(t,{bailoutToClientRendering:()=>u});var n=r(718);let i=(0,n.D)(String.raw`/Users/tiennguyen/Documents/Coding/AI-NOTE/node_modules/next/dist/esm/shared/lib/lazy-dynamic/dynamic-no-ssr.js`),{__esModule:s,$$typeof:a}=i;i.default;let o=i.suspense;i.NoSSR;var l=r(4083);function u(){let e=l.A.getStore();return null!=e&&!!e.forceStatic||((null==e?void 0:e.isStaticGeneration)&&o(),!1)}},7842:(e,t,r)=>{"use strict";r.r(t),r.d(t,{cookies:()=>h,draftMode:()=>d,headers:()=>c});var n=r(3576),i=r(7664),s=r(3764),a=r(1276),o=r(4927),l=r(474);class u{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,l.o)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,l.o)("draftMode().disable()"))return this._provider.disable()}constructor(e){this._provider=e}}function c(){if((0,l.o)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return i.h.seal(new Headers({}));let e=a.F.getStore();if(!e)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return e.headers}function h(){if((0,l.o)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return n.Qb.seal(new s.q(new Headers({})));let e=a.F.getStore();if(!e)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let t=o.W.getStore();return t&&(t.isAction||t.isAppRoute)?e.mutableCookies:e.cookies}function d(){let e=a.F.getStore();if(!e)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new u(e.draftMode)}},3779:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DYNAMIC_ERROR_CODE:()=>n,DynamicServerError:()=>i});let n="DYNAMIC_SERVER_USAGE";class i extends Error{constructor(e){super("Dynamic server usage: "+e),this.digest=n}}},501:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ReadonlyURLSearchParams:()=>S,RedirectType:()=>y.ko,ServerInsertedHTMLContext:()=>g,notFound:()=>v.v,permanentRedirect:()=>y.hU,redirect:()=>y.uX,useParams:()=>C,usePathname:()=>E,useRouter:()=>P,useSearchParams:()=>_,useSelectedLayoutSegment:()=>A,useSelectedLayoutSegments:()=>T,useServerInsertedHTML:()=>m});var n=r(6544),i=r(9674),s=r(718);let a=(0,s.D)(String.raw`/Users/tiennguyen/Documents/Coding/AI-NOTE/node_modules/next/dist/esm/shared/lib/hooks-client-context.shared-runtime.js`),{__esModule:o,$$typeof:l}=a;a.default;let u=a.SearchParamsContext,c=a.PathnameContext,h=a.PathParamsContext,d=(0,s.D)(String.raw`/Users/tiennguyen/Documents/Coding/AI-NOTE/node_modules/next/dist/esm/shared/lib/server-inserted-html.shared-runtime.js`),{__esModule:f,$$typeof:p}=d;d.default;let g=d.ServerInsertedHTMLContext,m=d.useServerInsertedHTML;var y=r(6468),v=r(267);let b=Symbol("internal for urlsearchparams readonly");function w(){return Error("ReadonlyURLSearchParams cannot be modified")}class S{[Symbol.iterator](){return this[b][Symbol.iterator]()}append(){throw w()}delete(){throw w()}set(){throw w()}sort(){throw w()}constructor(e){this[b]=e,this.entries=e.entries.bind(e),this.forEach=e.forEach.bind(e),this.get=e.get.bind(e),this.getAll=e.getAll.bind(e),this.has=e.has.bind(e),this.keys=e.keys.bind(e),this.values=e.values.bind(e),this.toString=e.toString.bind(e),this.size=e.size}}function _(){let e=(0,n.useContext)(u),t=(0,n.useMemo)(()=>e?new S(e):null,[e]);{let{bailoutToClientRendering:e}=r(2227);e()}return t}function E(){return(0,n.useContext)(c)}function P(){let e=(0,n.useContext)(i.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function C(){let e=(0,n.useContext)(i.GlobalLayoutRouterContext),t=(0,n.useContext)(h);return e?function e(t,r){void 0===r&&(r={});let n=t[1];for(let t of Object.values(n)){let n=t[0],i=Array.isArray(n),s=i?n[1]:n;if(!s||s.startsWith("__PAGE__"))continue;let a=i&&("c"===n[2]||"oc"===n[2]);a?r[n[0]]=n[1].split("/"):i&&(r[n[0]]=n[1]),r=e(t,r)}return r}(e.tree):t}function T(e){void 0===e&&(e="children");let{tree:t}=(0,n.useContext)(i.LayoutRouterContext);return function e(t,r,n,i){var s;let a;if(void 0===n&&(n=!0),void 0===i&&(i=[]),n)a=t[1][r];else{let e=t[1];a=null!=(s=e.children)?s:Object.values(e)[0]}if(!a)return i;let o=a[0],l=Array.isArray(o)?o[1]:o;return!l||l.startsWith("__PAGE__")?i:(i.push(l),e(a,r,!1,i))}(t,e)}function A(e){void 0===e&&(e="children");let t=T(e);return 0===t.length?null:t[0]}},267:(e,t,r)=>{"use strict";r.d(t,{X:()=>s,v:()=>i});let n="NEXT_NOT_FOUND";function i(){let e=Error(n);throw e.digest=n,e}function s(e){return(null==e?void 0:e.digest)===n}},6468:(e,t,r)=>{"use strict";r.d(t,{M6:()=>c,eo:()=>u,hU:()=>l,ko:()=>n,uX:()=>o});var n,i=r(1276);let s="NEXT_REDIRECT";function a(e,t,r){void 0===r&&(r=!1);let n=Error(s);n.digest=s+";"+t+";"+e+";"+r;let a=i.F.getStore();return a&&(n.mutableCookies=a.mutableCookies),n}function o(e,t){throw void 0===t&&(t="replace"),a(e,t,!1)}function l(e,t){throw void 0===t&&(t="replace"),a(e,t,!0)}function u(e){if("string"!=typeof(null==e?void 0:e.digest))return!1;let[t,r,n,i]=e.digest.split(";",4);return t===s&&("replace"===r||"push"===r)&&"string"==typeof n&&("true"===i||"false"===i)}function c(e){return u(e)?e.digest.split(";",3)[2]:null}!function(e){e.push="push",e.replace="replace"}(n||(n={}))},474:(e,t,r)=>{"use strict";r.d(t,{o:()=>o});var n=r(3779),i=r(4083);class s extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function a(e,t){let{dynamic:r,link:n}=t||{};return"Page"+(r?' with `dynamic = "'+r+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(n?" See more info here: "+n:"")}let o=(e,t)=>{let r=i.A.getStore();if(null==r?void 0:r.forceStatic)return!0;if(null==r?void 0:r.dynamicShouldError){var o;throw new s(a(e,{...t,dynamic:null!=(o=null==t?void 0:t.dynamic)?o:"error"}))}if(r&&(r.revalidate=0),null==r?void 0:r.isStaticGeneration){let i=new n.DynamicServerError(a(e,{...t,link:"https://nextjs.org/docs/messages/dynamic-server-error"}));throw r.dynamicUsageDescription=e,r.dynamicUsageStack=i.stack,i}return!1}},6824:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>o,BR:()=>d,Et:()=>a,Ho:()=>c,Qq:()=>s,X_:()=>u,dN:()=>n,of:()=>l,y3:()=>i,zt:()=>h});let n="nxtP",i="x-prerender-revalidate",s="x-prerender-revalidate-if-generated",a="x-next-cache-tags",o="x-next-cache-soft-tags",l="x-next-revalidated-tags",u="x-next-revalidate-tag-token",c=256,h="_N_T_",d=31536e3,f={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};({...f,GROUP:{server:[f.reactServerComponents,f.actionBrowser,f.appMetadataRoute,f.appRouteHandler],nonClientServerTarget:[f.middleware,f.api],app:[f.reactServerComponents,f.actionBrowser,f.appMetadataRoute,f.appRouteHandler,f.serverSideRendering,f.appPagesBrowser]}})},7506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let n=new Proxy(e=>e,{get:(e,t)=>["hex","rgb","ansi256","bgHex","bgRgb","bgAnsi256"].includes(t)?()=>n:n}),i=n},2533:(e,t,r)=>{"use strict";r.d(t,{B:()=>c});var n=r(1034),i=r(7664),s=r(3576),a=r(3764),o=r(6824);let l="__prerender_bypass";Symbol("__next_preview_data"),Symbol(l);class u{constructor(e,t,r,n){var s;let a=e&&function(e,t){let r=i.h.from(e.headers),n=r.get(o.y3),s=n===t.previewModeId,a=r.has(o.Qq);return{isOnDemandRevalidate:s,revalidateOnlyGenerated:a}}(t,e).isOnDemandRevalidate,u=null==(s=r.get(l))?void 0:s.value;this.isEnabled=!!(!a&&u&&e&&u===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:l,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:l,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}let c={wrap(e,{req:t,res:r,renderOpts:o},l){let c;function h(e){r&&r.setHeader("Set-Cookie",e)}o&&"previewProps"in o&&(c=o.previewProps);let d={},f={get headers(){return d.headers||(d.headers=function(e){let t=i.h.from(e);for(let e of n.vu)t.delete(e.toString().toLowerCase());return i.h.seal(t)}(t.headers)),d.headers},get cookies(){return d.cookies||(d.cookies=function(e){let t=new a.q(i.h.from(e));return s.Qb.seal(t)}(t.headers)),d.cookies},get mutableCookies(){return d.mutableCookies||(d.mutableCookies=function(e,t){let r=new a.q(i.h.from(e));return s.vr.wrap(r,t)}(t.headers,(null==o?void 0:o.onUpdateCookies)||(r?h:void 0))),d.mutableCookies},get draftMode(){return d.draftMode||(d.draftMode=new u(c,t,this.cookies,this.mutableCookies)),d.draftMode}};return e.run(f,l,f)}}},6085:(e,t,r)=>{"use strict";var n;r.d(t,{x:()=>n}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},8333:(e,t,r)=>{"use strict";e.exports=r(903)},903:(e,t,r)=>{"use strict";let n,i;r.d(t,{AppRouteRouteModule:()=>es});var s,a,o,l,u,c,h,d,f,p,g,m={};r.r(m),r.d(m,{appRouterContext:()=>ei});class y{constructor({userland:e,definition:t}){this.userland=e,this.definition=t}}var v=r(2533);let b={wrap(e,{urlPathname:t,renderOpts:r},n){let i=!r.supportsDynamicHTML&&!r.isDraftMode&&!r.isServerAction,s={isStaticGeneration:i,urlPathname:t,pagePath:r.originalPathname,incrementalCache:r.incrementalCache||globalThis.__incrementalCache,isRevalidate:r.isRevalidate,isPrerendering:r.nextExport,fetchCache:r.fetchCache,isOnDemandRevalidate:r.isOnDemandRevalidate,isDraftMode:r.isDraftMode};return r.store=s,e.run(s,n,s)}};var w=r(3576);function S(){return new Response(null,{status:400})}function _(){return new Response(null,{status:405})}let E=["GET","HEAD","OPTIONS","POST","PUT","DELETE","PATCH"];!function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(s||(s={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(a||(a={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(o||(o={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(l||(l={})),(u||(u={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(c||(c={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(h||(h={})),(d||(d={})).executeRoute="Router.executeRoute",(f||(f={})).runHandler="Node.runHandler",(p||(p={})).runHandler="AppRouteRouteHandlers.runHandler",(g||(g={})).generateMetadata="ResolveMetadata.generateMetadata";let P=["BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata"];n=r(6581);let{context:C,trace:T,SpanStatusCode:A,SpanKind:x}=n,O=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then,I=(e,t)=>{t&&e.recordException(t),e.setStatus({code:A.ERROR,message:null==t?void 0:t.message}),e.end()},R=new Map,N=n.createContextKey("next.rootSpanId"),k=0,M=()=>k++;class L{getTracerInstance(){return T.getTracer("next.js","0.0.1")}getContext(){return C}getActiveScopeSpan(){return T.getSpan(null==C?void 0:C.active())}trace(...e){let[t,r,i]=e,{fn:s,options:a}="function"==typeof r?{fn:r,options:{}}:{fn:i,options:{...r}};if(!P.includes(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||a.hideSpan)return s();let o=a.spanName??t,l=this.getSpanContext((null==a?void 0:a.parentSpan)??this.getActiveScopeSpan()),u=!1;l||(l=n.ROOT_CONTEXT,u=!0);let c=M();return a.attributes={"next.span_name":o,"next.span_type":t,...a.attributes},n.context.with(l.setValue(N,c),()=>this.getTracerInstance().startActiveSpan(o,a,e=>{let t=()=>{R.delete(c)};u&&R.set(c,new Map(Object.entries(a.attributes??{})));try{if(s.length>1)return s(e,t=>I(e,t));let r=s(e);return O(r)?r.then(()=>e.end(),t=>I(e,t)).finally(t):(e.end(),t()),r}catch(r){throw I(e,r),t(),r}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return P.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let s=arguments.length-1,a=arguments[s];if("function"!=typeof a)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(C.active(),a);return t.trace(r,e,(e,t)=>(arguments[s]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){let t=e?T.setSpan(C.active(),e):void 0;return t}getRootSpanAttributes(){let e=C.active().getValue(N);return R.get(e)}}let D=(()=>{let e=new L;return()=>e})();var U=r(6824);i=r(7506).Z;let B={wait:i.white(i.bold("")),error:i.red(i.bold("")),warn:i.yellow(i.bold("")),ready:i.bold(""),info:i.white(i.bold(" ")),event:i.green(i.bold("")),trace:i.magenta(i.bold("\xbb"))},$={log:"log",warn:"warn",error:"error"};var j=r(6195).Buffer;let q=e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${n.endsWith("/")?"":"/"}layout`),t.push(n))}}return t};function F(e){var t,r;let n=[];if(!e)return n;let{pagePath:i,urlPathname:s}=e;if(Array.isArray(e.tags)||(e.tags=[]),i){let r=q(i);for(let i of r)i=`${U.zt}${i}`,(null==(t=e.tags)?void 0:t.includes(i))||e.tags.push(i),n.push(i)}if(s){let t=`${U.zt}${s}`;(null==(r=e.tags)?void 0:r.includes(t))||e.tags.push(t),n.push(t)}return n}function Q(e,t){if(!e)return;e.fetchMetrics||(e.fetchMetrics=[]);let r=["url","status","method"];e.fetchMetrics.some(e=>r.every(r=>e[r]===t[r]))||e.fetchMetrics.push({url:t.url,cacheStatus:t.cacheStatus,cacheReason:t.cacheReason,status:t.status,method:t.method,start:t.start,end:Date.now(),idx:e.nextFetchId||0})}var z=r(1690),H=r(6256);function V(e){let t=new URL(e);return t.host="localhost:3000",t.search="",t.protocol="http",t.toString()}var K=r(267),G=r(6468);let W=["HEAD","OPTIONS"],J=["OPTIONS","POST","PUT","DELETE","PATCH"];var Y=r(6085),X=r(3779),Z=r(7842),ee=r(474),et=r(1276),er=r(4083),en=r(4927),ei=r(9674);class es extends y{static #e=this.sharedModules=m;static is(e){return e.definition.kind===Y.x.APP_ROUTE}constructor({userland:e,definition:t,resolvedPagePath:r,nextConfigOutput:n}){if(super({userland:e,definition:t}),this.requestAsyncStorage=et.F,this.staticGenerationAsyncStorage=er.A,this.serverHooks=X,this.headerHooks=Z,this.staticGenerationBailout=ee.o,this.actionAsyncStorage=en.W,this.resolvedPagePath=r,this.nextConfigOutput=n,this.methods=function(e){let t=E.reduce((t,r)=>({...t,[r]:e[r]??_}),{}),r=new Set(E.filter(t=>e[t])),n=W.filter(e=>!r.has(e));for(let i of n){if("HEAD"===i){if(!e.GET)break;t.HEAD=e.GET,r.add("HEAD");continue}if("OPTIONS"===i){let e=["OPTIONS",...r];!r.has("HEAD")&&r.has("GET")&&e.push("HEAD");let n={Allow:e.sort().join(", ")};t.OPTIONS=()=>new Response(null,{status:204,headers:n}),r.add("OPTIONS");continue}throw Error(`Invariant: should handle all automatic implementable methods, got method: ${i}`)}return t}(e),this.nonStaticMethods=function(e){let t=J.filter(t=>e[t]);return 0!==t.length&&t}(e),this.dynamic=this.userland.dynamic,"export"===this.nextConfigOutput){if(this.dynamic&&"auto"!==this.dynamic){if("force-dynamic"===this.dynamic)throw Error(`export const dynamic = "force-dynamic" on page "${t.pathname}" cannot be used with "output: export". See more info here: https://nextjs.org/docs/advanced-features/static-html-export`)}else this.dynamic="error"}}resolve(e){return E.includes(e)?this.methods[e]:S}async execute(e,t){let n=this.resolve(e.method),i={req:e};i.renderOpts={previewProps:t.prerenderManifest.preview};let s={urlPathname:e.nextUrl.pathname,renderOpts:t.staticGenerationContext??{supportsDynamicHTML:!1,originalPathname:this.definition.pathname}};s.renderOpts.fetchCache=this.userland.fetchCache;let a=await this.actionAsyncStorage.run({isAppRoute:!0},()=>v.B.wrap(this.requestAsyncStorage,i,()=>b.wrap(this.staticGenerationAsyncStorage,s,i=>{var s;switch(this.nonStaticMethods&&this.staticGenerationBailout(`non-static methods used ${this.nonStaticMethods.join(", ")}`),this.dynamic){case"force-dynamic":i.forceDynamic=!0,this.staticGenerationBailout("force-dynamic",{dynamic:this.dynamic});break;case"force-static":i.forceStatic=!0;break;case"error":i.dynamicShouldError=!0}i.revalidate??=this.userland.revalidate??!1;let a=function(e,{dynamic:t},r){function n(e){switch(e){case"search":case"searchParams":case"toString":case"href":case"origin":r.staticGenerationBailout(`nextUrl.${e}`);return;default:return}}let i={},s=(e,t)=>{switch(t){case"search":return"";case"searchParams":return i.searchParams||(i.searchParams=new URLSearchParams),i.searchParams;case"url":case"href":return i.url||(i.url=V(e)),i.url;case"toJSON":case"toString":return i.url||(i.url=V(e)),i.toString||(i.toString=()=>i.url),i.toString;case"headers":return i.headers||(i.headers=new Headers),i.headers;case"cookies":return i.headers||(i.headers=new Headers),i.cookies||(i.cookies=new z.RequestCookies(i.headers)),i.cookies;case"clone":return i.url||(i.url=V(e)),()=>new H.c(i.url)}},a=new Proxy(e.nextUrl,{get(e,r){if(n(r),"force-static"===t&&"string"==typeof r){let t=s(e.href,r);if(void 0!==t)return t}let i=e[r];return"function"==typeof i?i.bind(e):i},set:(e,t,r)=>(n(t),e[t]=r,!0)}),o=e=>{switch(e){case"headers":r.headerHooks.headers();return;case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":r.staticGenerationBailout(`request.${e}`);return;default:return}};return new Proxy(e,{get(e,r){if(o(r),"nextUrl"===r)return a;if("force-static"===t&&"string"==typeof r){let t=s(e.url,r);if(void 0!==t)return t}let n=e[r];return"function"==typeof n?n.bind(e):n},set:(e,t,r)=>(o(t),e[t]=r,!0)})}(e,{dynamic:this.dynamic},{headerHooks:this.headerHooks,serverHooks:this.serverHooks,staticGenerationBailout:this.staticGenerationBailout}),o=function(e){let t="/app/";e.includes(t)||(t="\\app\\");let[,...r]=e.split(t),n=t[0]+r.join(t),i=n.split(".").slice(0,-1).join(".");return i}(this.resolvedPagePath);return null==(s=D().getRootSpanAttributes())||s.set("next.route",o),D().trace(p.runHandler,{spanName:`executing api route (app) ${o}`,attributes:{"next.route":o}},async()=>{var e;!function({serverHooks:e,staticGenerationAsyncStorage:t}){if(globalThis._nextOriginalFetch||(globalThis._nextOriginalFetch=globalThis.fetch),globalThis.fetch.__nextPatched)return;let{DynamicServerError:n}=e,i=globalThis._nextOriginalFetch;globalThis.fetch=async(e,s)=>{var a,o;let u;try{(u=new URL(e instanceof Request?e.url:e)).username="",u.password=""}catch{u=void 0}let c=(null==u?void 0:u.href)??"",d=Date.now(),f=(null==s?void 0:null==(a=s.method)?void 0:a.toUpperCase())||"GET",p=(null==(o=null==s?void 0:s.next)?void 0:o.internal)===!0;return await D().trace(p?l.internalFetch:h.fetch,{kind:x.CLIENT,spanName:["fetch",f,c].filter(Boolean).join(" "),attributes:{"http.url":c,"http.method":f,"net.peer.name":null==u?void 0:u.hostname,"net.peer.port":(null==u?void 0:u.port)||void 0}},async()=>{var a;let o,l,u;let h=t.getStore()||(null==fetch.__nextGetStaticStore?void 0:fetch.__nextGetStaticStore.call(fetch)),f=e&&"object"==typeof e&&"string"==typeof e.method,g=t=>(f?e[t]:null)||(null==s?void 0:s[t]);if(!h||p||h.isDraftMode)return i(e,s);let m=t=>{var r,n,i;return void 0!==(null==s?void 0:null==(r=s.next)?void 0:r[t])?null==s?void 0:null==(n=s.next)?void 0:n[t]:f?null==(i=e.next)?void 0:i[t]:void 0},y=m("revalidate"),v=function(e,t){let r=[],n=[];for(let t of e)"string"!=typeof t?n.push({tag:t,reason:"invalid type, must be a string"}):t.length>U.Ho?n.push({tag:t,reason:`exceeded max length of ${U.Ho}`}):r.push(t);if(n.length>0)for(let{tag:e,reason:r}of(console.warn(`Warning: invalid tags passed to ${t}: `),n))console.log(`tag: "${e}" ${r}`);return r}(m("tags")||[],`fetch ${e.toString()}`);if(Array.isArray(v))for(let e of(h.tags||(h.tags=[]),v))h.tags.includes(e)||h.tags.push(e);let b=F(h),w="only-cache"===h.fetchCache,S="force-cache"===h.fetchCache,_="default-cache"===h.fetchCache,E="default-no-store"===h.fetchCache,P="only-no-store"===h.fetchCache,C="force-no-store"===h.fetchCache,T=g("cache"),A="";"string"==typeof T&&void 0!==y&&(function(...e){!function(e,...t){(""===t[0]||void 0===t[0])&&1===t.length&&t.shift();let r=e in $?$[e]:"log",n=B[e];0===t.length?console[r](""):console[r](" "+n,...t)}("warn",...e)}(`fetch for ${c} on ${h.urlPathname} specified "cache: ${T}" and "revalidate: ${y}", only one should be specified.`),T=void 0),"force-cache"===T&&(y=!1),["no-cache","no-store"].includes(T||"")&&(y=0,A=`cache: ${T}`),("number"==typeof y||!1===y)&&(u=y);let x=g("headers"),O="function"==typeof(null==x?void 0:x.get)?x:new Headers(x||{}),I=O.get("authorization")||O.get("cookie"),R=!["get","head"].includes((null==(a=g("method"))?void 0:a.toLowerCase())||"get"),N=(I||R)&&0===h.revalidate;if(C&&(u=0,A="fetchCache = force-no-store"),P){if("force-cache"===T||0===u)throw Error(`cache: 'force-cache' used on fetch for ${c} with 'export const fetchCache = 'only-no-store'`);u=0,A="fetchCache = only-no-store"}if(w&&"no-store"===T)throw Error(`cache: 'no-store' used on fetch for ${c} with 'export const fetchCache = 'only-cache'`);S&&(void 0===y||0===y)&&(A="fetchCache = force-cache",u=!1),void 0===u?_?(u=!1,A="fetchCache = default-cache"):N?(u=0,A="auto no cache"):E?(u=0,A="fetchCache = default-no-store"):(A="auto cache",u="boolean"!=typeof h.revalidate&&void 0!==h.revalidate&&h.revalidate):A||(A=`revalidate: ${u}`),!N&&(void 0===h.revalidate||"number"==typeof u&&(!1===h.revalidate||"number"==typeof h.revalidate&&u<h.revalidate))&&(h.revalidate=u);let k="number"==typeof u&&u>0||!1===u;if(h.incrementalCache&&k)try{o=await h.incrementalCache.fetchCacheKey(c,f?e:s)}catch(t){console.error("Failed to generate cache key for",e)}let M=h.nextFetchId??1;h.nextFetchId=M+1;let L="number"!=typeof u?U.BR:u,D=async(t,r)=>{let n=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...t?[]:["signal"]];if(f){let t=e,r={body:t._ogBody||t.body};for(let e of n)r[e]=t[e];e=new Request(t.url,r)}else if(s){let e=s;for(let t of(s={body:s._ogBody||s.body},n))s[t]=e[t]}let a={...s,next:{...null==s?void 0:s.next,fetchType:"origin",fetchIdx:M}};return i(e,a).then(async n=>{if(t||Q(h,{start:d,url:c,cacheReason:r||A,cacheStatus:0===u||r?"skip":"miss",status:n.status,method:a.method||"GET"}),200===n.status&&h.incrementalCache&&o&&k){let t=j.from(await n.arrayBuffer());try{await h.incrementalCache.set(o,{kind:"FETCH",data:{headers:Object.fromEntries(n.headers.entries()),body:t.toString("base64"),status:n.status,url:n.url},revalidate:L},{fetchCache:!0,revalidate:u,fetchUrl:c,fetchIdx:M,tags:v})}catch(t){console.warn("Failed to set fetch cache",e,t)}let r=new Response(t,{headers:new Headers(n.headers),status:n.status});return Object.defineProperty(r,"url",{value:n.url}),r}return n})},q=()=>Promise.resolve();if(o&&h.incrementalCache){q=await h.incrementalCache.lock(o);let e=h.isOnDemandRevalidate?null:await h.incrementalCache.get(o,{fetchCache:!0,revalidate:u,fetchUrl:c,fetchIdx:M,tags:v,softTags:b});if(e?await q():l="cache-control: no-cache (hard refresh)",(null==e?void 0:e.value)&&"FETCH"===e.value.kind&&!(h.isRevalidate&&e.isStale)){let t;e.isStale&&(h.pendingRevalidates||(h.pendingRevalidates=[]),h.pendingRevalidates.push(D(!0).catch(console.error)));let n=e.value.data;{let{decode:e}=r(9209);t=e(n.body)}Q(h,{start:d,url:c,cacheReason:A,cacheStatus:"hit",status:n.status||200,method:(null==s?void 0:s.method)||"GET"});let i=new Response(t,{headers:n.headers,status:n.status});return Object.defineProperty(i,"url",{value:e.value.data.url}),i}}if(h.isStaticGeneration&&s&&"object"==typeof s){let t=s.cache;if(delete s.cache,"no-store"===t){h.revalidate=0;let t=`no-store fetch ${e}${h.urlPathname?` ${h.urlPathname}`:""}`,r=new n(t);h.dynamicUsageErr=r,h.dynamicUsageStack=r.stack,h.dynamicUsageDescription=t}let r="next"in s,i=s.next||{};if("number"==typeof i.revalidate&&(void 0===h.revalidate||"number"==typeof h.revalidate&&i.revalidate<h.revalidate)){let t=h.forceDynamic;if(t&&0===i.revalidate||(h.revalidate=i.revalidate),!t&&0===i.revalidate){let t=`revalidate: ${i.revalidate} fetch ${e}${h.urlPathname?` ${h.urlPathname}`:""}`,r=new n(t);h.dynamicUsageErr=r,h.dynamicUsageStack=r.stack,h.dynamicUsageDescription=t}}r&&delete s.next}return D(!1,l).finally(q)})},globalThis.fetch.__nextGetStaticStore=()=>t,globalThis.fetch.__nextPatched=!0}({serverHooks:this.serverHooks,staticGenerationAsyncStorage:this.staticGenerationAsyncStorage});let s=await n(a,{params:t.params?function(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}(t.params):void 0});if(!(s instanceof Response))throw Error(`No response is returned from route handler '${this.resolvedPagePath}'. Ensure you return a \`Response\` or a \`NextResponse\` in all branches of your handler.`);t.staticGenerationContext.fetchMetrics=i.fetchMetrics,await Promise.all(i.pendingRevalidates||[]),F(i),t.staticGenerationContext.fetchTags=null==(e=i.tags)?void 0:e.join(",");let o=this.requestAsyncStorage.getStore();if(o&&o.mutableCookies){let e=new Headers(s.headers);if((0,w._5)(e,o.mutableCookies))return new Response(s.body,{status:s.status,statusText:s.statusText,headers:e})}return s})})));if(!(a instanceof Response))return new Response(null,{status:500});if(a.headers.has("x-middleware-rewrite"))throw Error("NextResponse.rewrite() was used in a app route handler, this is not currently supported. Please remove the invocation to continue.");if("1"===a.headers.get("x-middleware-next"))throw Error("NextResponse.next() was used in a app route handler, this is not supported. See here for more info: https://nextjs.org/docs/messages/next-response-next-in-app-route-handler");return a}async handle(e,t){try{let r=await this.execute(e,t);return r}catch(t){let e=function(e){if((0,G.eo)(e)){let t=(0,G.M6)(e);if(!t)throw Error("Invariant: Unexpected redirect url format");return function(e,t){let r=new Headers({location:e});return(0,w._5)(r,t),new Response(null,{status:307,headers:r})}(t,e.mutableCookies)}return!!(0,K.X)(e)&&new Response(null,{status:404})}(t);if(!e)throw t;return e}}}},3747:()=>{"getAll"in Headers.prototype||(Headers.prototype.getAll=function(e){if("set-cookie"!==(e=e.toLowerCase()))throw Error("Headers.getAll is only supported for Set-Cookie header");let t=[...this.entries()].filter(([t])=>t===e);return t.map(([,e])=>e)})},6256:(e,t,r)=>{"use strict";r.d(t,{c:()=>f});var n=r(542),i=r(5288);function s(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:s}=(0,i.c)(e);return""+t+r+n+s}function a(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:s}=(0,i.c)(e);return""+r+t+n+s}var o=r(3329);function l(e,t){let r;let n=e.split("/");return(t||[]).some(t=>!!n[1]&&n[1].toLowerCase()===t.toLowerCase()&&(r=t,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}var u=r(8752);let c=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function h(e,t){return new URL(String(e).replace(c,"localhost"),t&&String(t).replace(c,"localhost"))}let d=Symbol("NextURLInternal");class f{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[d]={url:h(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let s=function(e,t){var r,n;let{basePath:i,i18n:s,trailingSlash:a}=null!=(r=t.nextConfig)?r:{},c={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):a};i&&(0,o.Y)(c.pathname,i)&&(c.pathname=(0,u.n)(c.pathname,i),c.basePath=i);let h=c.pathname;if(c.pathname.startsWith("/_next/data/")&&c.pathname.endsWith(".json")){let e=c.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];c.buildId=r,h="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(c.pathname=h)}if(s){let e=t.i18nProvider?t.i18nProvider.analyze(c.pathname):l(c.pathname,s.locales);c.locale=e.detectedLocale,c.pathname=null!=(n=e.pathname)?n:c.pathname,!e.detectedLocale&&c.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(h):l(h,s.locales)).detectedLocale&&(c.locale=e.detectedLocale)}return c}(this[d].url.pathname,{nextConfig:this[d].options.nextConfig,parseData:!0,i18nProvider:this[d].options.i18nProvider}),a=function(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":")[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[d].url,this[d].options.headers);this[d].domainLocale=this[d].options.i18nProvider?this[d].options.i18nProvider.detectDomainLocale(a):function(e,t,r){if(e)for(let s of(r&&(r=r.toLowerCase()),e)){var n,i;let e=null==(n=s.domain)?void 0:n.split(":")[0].toLowerCase();if(t===e||r===s.defaultLocale.toLowerCase()||(null==(i=s.locales)?void 0:i.some(e=>e.toLowerCase()===r)))return s}}(null==(t=this[d].options.nextConfig)?void 0:null==(e=t.i18n)?void 0:e.domains,a);let c=(null==(r=this[d].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[d].options.nextConfig)?void 0:null==(n=i.i18n)?void 0:n.defaultLocale);this[d].url.pathname=s.pathname,this[d].defaultLocale=c,this[d].basePath=s.basePath??"",this[d].buildId=s.buildId,this[d].locale=s.locale??c,this[d].trailingSlash=s.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&((0,o.Y)(i,"/api")||(0,o.Y)(i,"/"+t.toLowerCase()))?e:s(e,"/"+t)}((e={basePath:this[d].basePath,buildId:this[d].buildId,defaultLocale:this[d].options.forceLocale?void 0:this[d].defaultLocale,locale:this[d].locale,pathname:this[d].url.pathname,trailingSlash:this[d].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=(0,n.Q)(t)),e.buildId&&(t=a(s(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=s(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:a(t,"/"):(0,n.Q)(t)}formatSearch(){return this[d].url.search}get buildId(){return this[d].buildId}set buildId(e){this[d].buildId=e}get locale(){return this[d].locale??""}set locale(e){var t,r;if(!this[d].locale||!(null==(r=this[d].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[d].locale=e}get defaultLocale(){return this[d].defaultLocale}get domainLocale(){return this[d].domainLocale}get searchParams(){return this[d].url.searchParams}get host(){return this[d].url.host}set host(e){this[d].url.host=e}get hostname(){return this[d].url.hostname}set hostname(e){this[d].url.hostname=e}get port(){return this[d].url.port}set port(e){this[d].url.port=e}get protocol(){return this[d].url.protocol}set protocol(e){this[d].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[d].url=h(e),this.analyze()}get origin(){return this[d].url.origin}get pathname(){return this[d].url.pathname}set pathname(e){this[d].url.pathname=e}get hash(){return this[d].url.hash}set hash(e){this[d].url.hash=e}get search(){return this[d].url.search}set search(e){this[d].url.search=e}get password(){return this[d].url.password}set password(e){this[d].url.password=e}get username(){return this[d].url.username}set username(e){this[d].url.username=e}get basePath(){return this[d].basePath}set basePath(e){this[d].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new f(String(this),this[d].options)}}},7664:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var n=r(4604);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.g.get(t,r,i);let s=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===s);if(void 0!==a)return n.g.get(t,a,i)},set(t,r,i,s){if("symbol"==typeof r)return n.g.set(t,r,i,s);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return n.g.set(t,o??r,i,s)},has(t,r){if("symbol"==typeof r)return n.g.has(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==s&&n.g.has(t,s)},deleteProperty(t,r){if("symbol"==typeof r)return n.g.deleteProperty(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===s||n.g.deleteProperty(t,s)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.g.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},4604:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},3576:(e,t,r)=>{"use strict";r.d(t,{Qb:()=>a,_5:()=>l,vr:()=>u});var n=r(3764),i=r(4604);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new s}}class a{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return i.g.get(e,t,r)}}})}}let o=Symbol.for("next.mutated.cookies");function l(e,t){let r=function(e){let t=e[o];return t&&Array.isArray(t)&&0!==t.length?t:[]}(t);if(0===r.length)return!1;let i=new n.n(e),s=i.getAll();for(let e of r)i.set(e);for(let e of s)i.set(e);return!0}class u{static wrap(e,t){let r=new n.n(new Headers);for(let t of e.getAll())r.set(t);let s=[],a=new Set,l=()=>{var e;let i=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore.call(fetch))?void 0:e.getStore();i&&(i.pathWasRevalidated=!0);let o=r.getAll();if(s=o.filter(e=>a.has(e.name)),t){let e=[];for(let t of s){let r=new n.n(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case o:return s;case"delete":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{l()}};case"set":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{l()}};default:return i.g.get(e,t,r)}}})}}},3764:(e,t,r)=>{"use strict";r.d(t,{n:()=>n.ResponseCookies,q:()=>n.RequestCookies});var n=r(1690)},9674:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppRouterContext:()=>l,CacheStates:()=>o,GlobalLayoutRouterContext:()=>c,LayoutRouterContext:()=>u,TemplateContext:()=>h});var n=r(718);let i=(0,n.D)(String.raw`/Users/tiennguyen/Documents/Coding/AI-NOTE/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js`),{__esModule:s,$$typeof:a}=i;i.default;let o=i.CacheStates,l=i.AppRouterContext,u=i.LayoutRouterContext,c=i.GlobalLayoutRouterContext,h=i.TemplateContext},9209:(e,t,r)=>{"use strict";r.r(t),r.d(t,{decode:()=>a,encode:()=>s});let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<n.length;e++)i[n.charCodeAt(e)]=e;let s=e=>{let t=new Uint8Array(e),r,i=t.length,s="";for(r=0;r<i;r+=3)s+=n[t[r]>>2]+n[(3&t[r])<<4|t[r+1]>>4]+n[(15&t[r+1])<<2|t[r+2]>>6]+n[63&t[r+2]];return i%3==2?s=s.substring(0,s.length-1)+"=":i%3==1&&(s=s.substring(0,s.length-2)+"=="),s},a=e=>{let t=.75*e.length,r=e.length,n,s=0,a,o,l,u;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let c=new ArrayBuffer(t),h=new Uint8Array(c);for(n=0;n<r;n+=4)a=i[e.charCodeAt(n)],o=i[e.charCodeAt(n+1)],l=i[e.charCodeAt(n+2)],u=i[e.charCodeAt(n+3)],h[s++]=a<<2|o>>4,h[s++]=(15&o)<<4|l>>2,h[s++]=(3&l)<<6|63&u;return c}},4276:(e,t,r)=>{"use strict";let n;n=r(5700),e.exports=n},5288:(e,t,r)=>{"use strict";function n(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}r.d(t,{c:()=>n})},3329:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});var n=r(5288);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.c)(e);return r===t||r.startsWith(t+"/")}},8752:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});var n=r(3329);function i(e,t){if(!(0,n.Y)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}},542:(e,t,r)=>{"use strict";function n(e){return e.replace(/\/$/,"")||"/"}r.d(t,{Q:()=>n})},9756:(e,t,r)=>{"use strict";e.exports=r(7842)},3206:(e,t,r)=>{"use strict";e.exports=r(501)},3912:(e,t,r)=>{"use strict";r.r(t),r.d(t,{snakeCase:()=>l});var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e){return e.toLowerCase()}Object.create,Object.create;var s=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function o(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(e,t){return e.replace(t,r)},e)}function l(e,t){var r;return void 0===t&&(t={}),void 0===(r=n({delimiter:"_"},t))&&(r={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=t.stripRegexp,l=t.transform,u=void 0===l?i:l,c=t.delimiter,h=void 0===c?" ":c,d=o(o(e,void 0===r?s:r,"$1\x00$2"),void 0===n?a:n,"\x00"),f=0,p=d.length;"\x00"===d.charAt(f);)f++;for(;"\x00"===d.charAt(p-1);)p--;return d.slice(f,p).split("\x00").map(u).join(h)}(e,n({delimiter:"."},r))}},3632:(e,t,r)=>{"use strict";let n=r(4732),{snakeCase:i}=r(3912);e.exports=function(e,t){return n(e,function(e,r){return[t.exclude.some(function(t){return"string"==typeof t?t===e:t.test(e)})?e:i(e,t.parsingOptions),r]},t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t))}},4927:(e,t,r)=>{"use strict";r.d(t,{W:()=>i});var n=r(4092);let i=(0,n.P)()},4092:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});let n=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class i{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}}let s=globalThis.AsyncLocalStorage;function a(){return s?new s:new i}},1276:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var n=r(4092);let i=(0,n.P)()},4083:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(4092);let i=(0,n.P)()}},e=>{var t=e(e.s=1182);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/createNoteBook/route"]=t}]);
//# sourceMappingURL=route.js.map