(()=>{var e={};e.id=865,e.ids=[865],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},8615:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>u});var r=t(73137),i=t(54647),n=t(4183),o=t.n(n),a=t(71775),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);t.d(s,c);let l=r.AppPageRouteModule,u=["",{children:["notebook",{children:["[noteId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,15142)),"/Users/tiennguyen/Documents/Coding/AI-NOTE/src/app/notebook/[noteId]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,50592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,71882)),"/Users/tiennguyen/Documents/Coding/AI-NOTE/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,50592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/tiennguyen/Documents/Coding/AI-NOTE/src/app/notebook/[noteId]/page.tsx"],x="/notebook/[noteId]/page",h={require:t,loadChunk:()=>Promise.resolve()},p=new l({definition:{kind:i.x.APP_PAGE,page:"/notebook/[noteId]/page",pathname:"/notebook/[noteId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},56922:(e,s,t)=>{Promise.resolve().then(t.bind(t,14290)),Promise.resolve().then(t.bind(t,52990)),Promise.resolve().then(t.bind(t,84102)),Promise.resolve().then(t.bind(t,54390)),Promise.resolve().then(t.t.bind(t,41297,23)),Promise.resolve().then(t.t.bind(t,42796,23)),Promise.resolve().then(t.bind(t,79955)),Promise.resolve().then(t.bind(t,13031))},79955:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(60080);t(9885);var i=t(69957),n=t(51734),o=t(40200),a=t(21145),c=t(57114);let l=({noteId:e})=>{let s=(0,c.useRouter)(),t=(0,o.D)({mutationFn:async()=>{let s=await a.Z.post("/api/deleteNote",{noteId:e});return s.data}});return r.jsx(i.z,{variant:"destructive",size:"sm",disabled:t.isLoading,onClick:()=>{let e=window.confirm("Are you sure you want to delete this note?");e&&t.mutate(void 0,{onSuccess:()=>{s.push("/dashboard")},onError:e=>{console.error(e)}})},children:r.jsx(n.Z,{})})}},13031:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var r=t(60080),i=t(9885),n=t.n(i),o=t(47523),a=t(96185),c=t(98222),l=t(53881),u=t(77888),d=t(47634),x=t(22931),h=t(98898),p=t(10942),m=t(3005),g=t(1681),v=t(17660),b=t(53488),f=t(77313),j=t(10146),N=t(80542),w=t(62932),q=t(42330);let k=({editor:e})=>(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>e.chain().focus().toggleBold().run(),disabled:!e.can().chain().focus().toggleBold().run(),className:e.isActive("bold")?"is-active":"",children:r.jsx(c.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleItalic().run(),disabled:!e.can().chain().focus().toggleItalic().run(),className:e.isActive("italic")?"is-active":"",children:r.jsx(l.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleStrike().run(),disabled:!e.can().chain().focus().toggleStrike().run(),className:e.isActive("strike")?"is-active":"",children:r.jsx(u.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleCode().run(),disabled:!e.can().chain().focus().toggleCode().run(),className:e.isActive("code")?"is-active":"",children:r.jsx(d.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),className:e.isActive("heading",{level:1})?"is-active":"",children:r.jsx(x.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:e.isActive("heading",{level:2})?"is-active":"",children:r.jsx(h.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),className:e.isActive("heading",{level:3})?"is-active":"",children:r.jsx(p.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:4}).run(),className:e.isActive("heading",{level:4})?"is-active":"",children:r.jsx(m.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:5}).run(),className:e.isActive("heading",{level:5})?"is-active":"",children:r.jsx(g.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:6}).run(),className:e.isActive("heading",{level:6})?"is-active":"",children:r.jsx(v.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleBulletList().run(),className:e.isActive("bulletList")?"is-active":"",children:r.jsx(b.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleOrderedList().run(),className:e.isActive("orderedList")?"is-active":"",children:r.jsx(f.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleCodeBlock().run(),className:e.isActive("codeBlock")?"is-active":"",children:r.jsx(j.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().toggleBlockquote().run(),className:e.isActive("blockquote")?"is-active":"",children:r.jsx(N.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().undo().run(),disabled:!e.can().chain().focus().undo().run(),children:r.jsx(w.Z,{className:"w-6 h-6"})}),r.jsx("button",{onClick:()=>e.chain().focus().redo().run(),disabled:!e.can().chain().focus().redo().run(),children:r.jsx(q.Z,{className:"w-6 h-6"})})]});var y=t(69957),C=t(40200),A=t(6978),P=t(21145),E=t(64868);let Z=({note:e})=>{let[s,t]=n().useState(e.editorState||`<h1>${e.name}</h1>`),{complete:i,completion:c}=(0,E.GO)({api:"/api/completion"}),l=(0,C.D)({mutationFn:async()=>{let t=await P.Z.post("/api/saveNote",{noteId:e.id,editorState:s});return t.data}}),u=A.Z.extend({addKeyboardShortcuts(){return{"Shift-a":()=>{let e=this.editor.getText().split(" ").slice(-30).join(" ");return i(e),!0}}}}),d=(0,o.jE)({autofocus:!0,extensions:[a.V,u],content:s,onUpdate:({editor:e})=>{t(e.getHTML())}}),x=n().useRef("");n().useEffect(()=>{if(!c||!d)return;let e=c.slice(x.current.length);x.current=c,d.commands.insertContent(e)},[c,d]);let h=function(e,s){let[t,r]=n().useState(e);return n().useEffect(()=>{let t=setTimeout(()=>{r(e)},s);return()=>{clearTimeout(t)}},[e,s]),t}(s,500);return n().useEffect(()=>{""!==h&&l.mutate(void 0,{onSuccess:e=>{console.log("success update!",e)},onError:e=>{console.error(e)}})},[h]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex",children:[d&&r.jsx(k,{editor:d}),r.jsx(y.z,{disabled:!0,variant:"outline",children:l.isLoading?"Saving...":"Saved"})]}),r.jsx("div",{className:"prose prose-sm w-full mt-4",children:r.jsx(o.kg,{editor:d})}),r.jsx("div",{className:"h-4"}),(0,r.jsxs)("span",{className:"text-sm",children:["Tip: Press"," ",r.jsx("kbd",{className:"px-2 py-1.5 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg",children:"Shift + A"})," ","for AI autocomplete"]})]})}},15142:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var r=t(48144),i=t(17536);let n=(0,i.createProxy)(String.raw`/Users/tiennguyen/Documents/Coding/AI-NOTE/src/components/DeleteButton.tsx`),{__esModule:o,$$typeof:a}=n,c=n.default,l=(0,i.createProxy)(String.raw`/Users/tiennguyen/Documents/Coding/AI-NOTE/src/components/TipTapEditor.tsx`),{__esModule:u,$$typeof:d}=l,x=l.default;var h=t(20147),p=t(78912);let m=(0,p.Clerk)({apiKey:process.env.CLERK_SECRET_KEY});var g=t(45746),v=t(23158),b=t(31893),f=t(5042),j=t(44602),N=t.n(j),w=t(6465);t(53830);let q=async({params:{noteId:e}})=>{let{userId:s}=await (0,b.I8)();if(!s)return(0,w.redirect)("/dashboard");let t=await m.users.getUser(s),i=await g.db.select().from(v.M).where((0,f.E)((0,f.F)(v.M.id,parseInt(e)),(0,f.F)(v.M.userId,s)));if(1!=i.length)return(0,w.redirect)("/dashboard");let n=i[0];return r.jsx("div",{className:"min-h-screen grainy p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"border shadow-xl border-stone-200 rounded-lg p-4 flex items-center",children:[r.jsx(N(),{href:"/dashboard",children:r.jsx(h.z,{variant:"gradient",children:"Back"})}),r.jsx("div",{className:"w-3"}),(0,r.jsxs)("span",{className:"font-semibold",children:[t.firstName," ",t.lastName]}),r.jsx("span",{className:"inline-block mx-1",children:"/"}),r.jsx("span",{className:"text-stone-500 font-semibold",children:n.name}),r.jsx("div",{className:"ml-auto",children:r.jsx(c,{noteId:n.id})})]}),r.jsx("div",{className:"h-4"}),r.jsx("div",{className:"border-stone-200 shadow-xl border rounded-lg px-16 py-8 w-full",children:r.jsx(x,{note:n})})]})})},k=q}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[922,952,675,885,230,870,800,401,415,560],()=>t(8615));module.exports=r})();